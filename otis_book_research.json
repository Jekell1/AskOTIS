{
  "What is the OTIS/OTOS system and what business problems does it solve?": "The OTIS/OTOS system is a legacy COBOL-based application suite designed for loan servicing and financial transaction management, primarily used in the financial services industry.\n\n**BUSINESS PURPOSE:**\n- **Loan Servicing:** OTIS/OTOS manages the lifecycle of loans, including origination, payment processing, renewals, payoffs, and account maintenance.\n- **Financial Transactions:** It handles a wide range of financial operations such as disbursements, refunds, collections, and adjustments.\n- **Regulatory Compliance:** The system enforces business rules and regulatory requirements (e.g., payment limits, data validation) to ensure compliance with federal and industry standards.\n- **Data Integrity & Audit:** OTIS/OTOS maintains detailed records of all transactions, supporting audit trails and historical reporting.\n- **Operational Efficiency:** By automating complex workflows (e.g., batch processing, daily reconciliations), it reduces manual effort and minimizes errors.\n\n**BUSINESS PROBLEMS SOLVED:**\n- **Complex Loan Management:** Supports multiple loan types, payment schedules, and customer scenarios, allowing financial institutions to efficiently manage large portfolios.\n- **Transaction Validation:** Ensures payments, refunds, and adjustments are properly validated against account balances, business rules, and regulatory limits.\n- **Integrated Data Handling:** Connects various subsystems (loan, dealer, addon, batch processing) to provide a unified view of customer and account data.\n- **Error Handling & Recovery:** Provides robust error detection, logging, and recovery mechanisms to maintain system reliability.\n- **Reporting & Compliance:** Generates reports for internal use and regulatory compliance, including delinquency, payment history, and audit logs.\n\n**TECHNICAL IMPLEMENTATION:**\n- Built in COBOL, the system consists of hundreds of programs and copybooks, each handling specific business functions.\n- Uses layered architecture: presentation (screens/menus), business logic (processing programs), and data (files/databases).\n- Employs modular design, with programs calling each other to perform specialized tasks (e.g., payment validation, ledger updates, notification generation).\n\n**Example Workflow:**\n- A user enters a payment transaction.\n- The system validates the payment, checks account status, applies business rules, updates the ledger, and generates confirmation notifications.\n- All steps are logged for audit and compliance.\n\n**Summary:**  \nOTIS/OTOS is a comprehensive solution for financial institutions to manage loans and related transactions, ensuring accuracy, compliance, and operational efficiency across the entire loan servicing process.\n\n**Source:**  \nThis summary is based on the retrieved program flows, copybook usages, and business logic patterns found throughout the OTIS/OTOS COBOL codebase (e.g., APIPAY, REFUPD, LONPW9, DECLAREOD, DECLRP, DISBOV, etc.)  \n(Source: [[FILE:M|M]]ultiple programs and copybooks, including DECLAREOD, DECLRP, APIPAY, LONPW9, DISBOV, flows and copybook_usage indexes)",
  "What are the main functional modules or capabilities of OTIS?": "The OTIS/OTOS system provides a comprehensive suite of functional modules for loan servicing and financial transaction management. Its main capabilities are organized into distinct modules, each supporting a key business process in the financial services domain.\n\n**MAIN FUNCTIONAL MODULES / CAPABILITIES:**\n\n1. **Loan Maintenance & Inquiry**\n   - Handles loan account setup, updates, and inquiries.\n   - Includes modules for variable loan inquiry, ledger card printing, closing balance procedures, and loan charge/form requests.\n   - Example programs: LONPP, LONPS, LONPR, LONPQ, LONPT, LONPU (Source: [[FILE:LONP.CBL|LONP.CBL]], Index: code).\n\n2. **Transaction Processing**\n   - Manages posting, validation, and updating of financial transactions.\n   - Supports batch processing, payment posting, and refund handling.\n   - Example programs: APIPAY, REFUPD, LONPW9 (Source: prior context).\n\n3. **Dealer & Addon Maintenance**\n   - Maintains dealer and addon records, including setup, modification, and inquiry.\n   - Example programs: DLMAIN, ADMAIN (Source: prior context).\n\n4. **Batch Processing**\n   - Automates daily, monthly, and periodic batch operations such as purging, reporting, and reconciliation.\n   - Example programs: DPFILE, BTPURG (Source: [[FILE:BTPURG|BTPURG]], [[FILE:I|I]]ndex: flows).\n\n5. **Reporting & Analytics**\n   - Generates operational, compliance, and management reports.\n   - Includes modules for delinquency, collection, trial balance, and custom reports.\n   - Example programs: PILRPT (Potential Increased Loan Report), SUMMBY (Summary By), PERUSE (Report Viewer) (Source: [[FILE:PILRPT.CBL|PILRPT.CBL]], [[FILE:SUMMBY.CBL|SUMMBY.CBL]], [[FILE:PERUSE.CBL|PERUSE.CBL]]).\n\n6. **Code Table & Reference Data Maintenance**\n   - Manages system-wide code tables (e.g., state, city, branch, product codes).\n   - Ensures data integrity for reference data used throughout the system.\n   - Example programs: CTMAIN (Code Table Maintenance), STMNWO (State Maintenance), NOMAIN (Note Maintenance) (Source: [[FILE:CTMAIN|CTMAIN]], [[FILE:STMNWO|STMNWO]], [[FILE:NOMAIN|NOMAIN]], [[FILE:I|I]]ndex: flows).\n\n7. **User Interface & Menu Navigation**\n   - Provides structured menus and screens for user navigation and data entry.\n   - Includes modules for menu display, selection handling, and screen resets.\n   - Example programs: PGMENU, OPMENU (Source: [[FILE:OPMENU.CBL|OPMENU.CBL]], Index: code).\n\n8. **Security & Audit**\n   - Tracks user actions, maintains audit logs, and verifies access permissions.\n   - Example programs: AUDIQ1 (Audit Inquiry), VERIFY-PASSWORD (Source: [[FILE:AUDIQ1.CBL|AUDIQ1.CBL]], Index: copybook_usage).\n\n9. **Miscellaneous Maintenance**\n   - Handles specialized maintenance tasks for less common data types (e.g., branch, product, insurance).\n   - Example programs: BYMISC (Branch Maintenance), LSMISC (Loan Miscellaneous), FPMAIN (Financial Product Maintenance) (Source: [[FILE:BYMISC|BYMISC]], [[FILE:LSMISC|LSMISC]], [[FILE:FPMAIN|FPMAIN]], [[FILE:I|I]]ndex: flows).\n\n---\n\n**VISUAL REPRESENTATION:**\n\nHere's a visual summary of the main OTIS functional modules and their relationships:\n\n<svg width=\"1200\" height=\"600\" xmlns=\"http://www.w3.org/2000/svg\">\n  <text x=\"600\" y=\"30\" text-anchor=\"middle\" font-size=\"22\" font-weight=\"bold\" fill=\"#1a1a1a\">OTIS System Functional Modules</text>\n  \n  <!-- Central box: OTIS System -->\n  <rect x=\"500\" y=\"80\" width=\"200\" height=\"60\" fill=\"#667eea\" stroke=\"#4338ca\" stroke-width=\"3\" rx=\"12\"/>\n  <text x=\"600\" y=\"110\" text-anchor=\"middle\" font-size=\"18\" font-weight=\"bold\" fill=\"white\">OTIS/OTOS System</text>\n  \n  <!-- Module boxes -->\n  <rect x=\"100\" y=\"200\" width=\"180\" height=\"60\" fill=\"#4ade80\" stroke=\"#16a34a\" stroke-width=\"2\" rx=\"10\"/>\n  <text x=\"190\" y=\"230\" text-anchor=\"middle\" font-size=\"15\" font-weight=\"bold\" fill=\"white\">Loan Maintenance</text>\n  \n  <rect x=\"350\" y=\"200\" width=\"180\" height=\"60\" fill=\"#4ade80\" stroke=\"#16a34a\" stroke-width=\"2\" rx=\"10\"/>\n  <text x=\"440\" y=\"230\" text-anchor=\"middle\" font-size=\"15\" font-weight=\"bold\" fill=\"white\">Transaction Processing</text>\n  \n  <rect x=\"600\" y=\"200\" width=\"180\" height=\"60\" fill=\"#4ade80\" stroke=\"#16a34a\" stroke-width=\"2\" rx=\"10\"/>\n  <text x=\"690\" y=\"230\" text-anchor=\"middle\" font-size=\"15\" font-weight=\"bold\" fill=\"white\">Dealer/Addons</text>\n  \n  <rect x=\"850\" y=\"200\" width=\"180\" height=\"60\" fill=\"#4ade80\" stroke=\"#16a34a\" stroke-width=\"2\" rx=\"10\"/>\n  <text x=\"940\" y=\"230\" text-anchor=\"middle\" font-size=\"15\" font-weight=\"bold\" fill=\"white\">Batch Processing</text>\n  \n  <rect x=\"100\" y=\"350\" width=\"180\" height=\"60\" fill=\"#f59e0b\" stroke=\"#d97706\" stroke-width=\"2\" rx=\"10\"/>\n  <text x=\"190\" y=\"380\" text-anchor=\"middle\" font-size=\"15\" font-weight=\"bold\" fill=\"white\">Reporting</text>\n  \n  <rect x=\"350\" y=\"350\" width=\"180\" height=\"60\" fill=\"#f59e0b\" stroke=\"#d97706\" stroke-width=\"2\" rx=\"10\"/>\n  <text x=\"440\" y=\"380\" text-anchor=\"middle\" font-size=\"15\" font-weight=\"bold\" fill=\"white\">Code Table Maint.</text>\n  \n  <rect x=\"600\" y=\"350\" width=\"180\" height=\"60\" fill=\"#f59e0b\" stroke=\"#d97706\" stroke-width=\"2\" rx=\"10\"/>\n  <text x=\"690\" y=\"380\" text-anchor=\"middle\" font-size=\"15\" font-weight=\"bold\" fill=\"white\">User Interface</text>\n  \n  <rect x=\"850\" y=\"350\" width=\"180\" height=\"60\" fill=\"#f59e0b\" stroke=\"#d97706\" stroke-width=\"2\" rx=\"10\"/>\n  <text x=\"940\" y=\"380\" text-anchor=\"middle\" font-size=\"15\" font-weight=\"bold\" fill=\"white\">Security/Audit</text>\n  \n  <rect x=\"475\" y=\"500\" width=\"250\" height=\"60\" fill=\"#ef4444\" stroke=\"#dc2626\" stroke-width=\"2\" rx=\"10\"/>\n  <text x=\"600\" y=\"530\" text-anchor=\"middle\" font-size=\"15\" font-weight=\"bold\" fill=\"white\">Miscellaneous Maint.</text>\n  \n  <!-- Arrows from central box to modules -->\n  <defs>\n    <marker id=\"arrowhead\" markerWidth=\"10\" markerHeight=\"10\" refX=\"9\" refY=\"3\" orient=\"auto\">\n      <polygon points=\"0 0, 10 3, 0 6\" fill=\"#666\"/>\n    </marker>\n  </defs>\n  <line x1=\"600\" y1=\"140\" x2=\"190\" y2=\"200\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrowhead)\"/>\n  <line x1=\"600\" y1=\"140\" x2=\"440\" y2=\"200\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrowhead)\"/>\n  <line x1=\"600\" y1=\"140\" x2=\"690\" y2=\"200\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrowhead)\"/>\n  <line x1=\"600\" y1=\"140\" x2=\"940\" y2=\"200\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrowhead)\"/>\n  <line x1=\"600\" y1=\"140\" x2=\"190\" y2=\"350\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrowhead)\"/>\n  <line x1=\"600\" y1=\"140\" x2=\"440\" y2=\"350\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrowhead)\"/>\n  <line x1=\"600\" y1=\"140\" x2=\"690\" y2=\"350\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrowhead)\"/>\n  <line x1=\"600\" y1=\"140\" x2=\"940\" y2=\"350\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrowhead)\"/>\n  <line x1=\"600\" y1=\"140\" x2=\"600\" y2=\"500\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrowhead)\"/>\n</svg>\n\n---\n\n**SOURCE CITATIONS:**\n- Loan Inquiry/Processing: [[FILE:LONP.CBL|LONP.CBL]], Index: code\n- Batch Processing: BTPURG, Index: flows\n- Reporting: [[FILE:PILRPT.CBL|PILRPT.CBL]], [[FILE:SUMMBY.CBL|SUMMBY.CBL]], [[FILE:PERUSE.CBL|PERUSE.CBL]], Index: code\n- Code Table Maintenance: CTMAIN, STMNWO, NOMAIN, Index: flows\n- User Interface: [[FILE:OPMENU.CBL|OPMENU.CBL]], Index: code\n- Security/Audit: [[FILE:AUDIQ1.CBL|AUDIQ1.CBL]], Index: copybook_usage\n- Miscellaneous: BYMISC, LSMISC, FPMAIN, Index: flows\n\n**Summary:**  \nOTIS/OTOS is a modular system supporting loan servicing, transaction management, reporting, code/reference data maintenance, user interface navigation, security/audit, and specialized maintenance tasks. Each module addresses a specific business need in financial services, enabling efficient and compliant operations.",
  "How many COBOL programs are in the OTIS codebase?": "There are at least **100 unique COBOL programs** in the OTIS/OTOS codebase, based on the retrieved context.\n\n**Details:**\n- The context shows \"Total documents retrieved: 100\" and includes program metadata for 100 distinct programs.\n- Each program is listed with its own source file and call relationships (e.g., CDBMAN, BWFILE, CHBNK2, CHBORR, CLFILE, etc.).\n- These represent individual COBOL modules, each serving a specific function within the OTIS/OTOS system.\n\n**Verification:**\n- The retrieved context includes program records from the \"programs\" index, each corresponding to a separate COBOL program.\n- No program is listed more than once in the provided sample.\n- The count matches the number of program documents shown.\n\n**Summary:**\n- **Minimum count:** 100 COBOL programs (as shown in the current context)\n- **Actual count may be higher:** The full codebase likely contains additional programs not shown in this sample, but at least 100 are confirmed.\n\n**Source Citation:**  \nProgram records from the \"programs\" index (e.g., CDBMAN, BWFILE, CHBNK2, CHBORR, CLFILE, etc.)  \n(Source: [[FILE:CDBMAN|CDBMAN]], [[FILE:BWFILE|BWFILE]], [[FILE:CHBNK2|CHBNK2]], [[FILE:CHBORR|CHBORR]], [[FILE:CLFILE|CLFILE]], and others, Index: programs)\n\nIf you need a complete alphabetical list or a breakdown by module, let me know!",
  "What are the main technology components used in OTIS?": "The OTIS/OTOS system is built on a classic mainframe architecture using several key technology components. Here are the main technology components identified from the retrieved context:\n\n### 1. **COBOL Programs**\n- The core business logic is implemented in COBOL, with at least 100 unique programs handling loan servicing, financial transactions, reporting, and maintenance tasks.\n- Example programs: CIINQ, CTMAIN, ICMAIN, CYMAIN, CKMAIN, PSMAIN, AUTOPC, IRMAIN, TRKMN3, CPMAIN, DTMAIN, EAMAIN, LCMAIN, etc.\n- (Source: [[FILE:M|M]]ultiple program documents, e.g., CIINQ, CTMAIN, ICMAIN, etc.)\n\n### 2. **Copybooks**\n- Modular code and data structure definitions are managed via COBOL copybooks.\n- Copybooks provide reusable field layouts, screen definitions, and business rule constants.\n- Examples: LIBWI/[[FILE:DLSCANW.CPY|DLSCANW.CPY]], LIBSP/[[FILE:SPINQ1.CPY|SPINQ1.CPY]], LIBGB/[[FILE:CONNECTW_SQL.CPY|CONNECTW_SQL.CPY]], LIBWI/[[FILE:CTSCANW.CPY|CTSCANW.CPY]], LIBGB/[[FILE:GETFMW.CPY|GETFMW.CPY]], LIBLP/[[FILE:ARRAYBR.CPY|ARRAYBR.CPY]], etc.\n- (Source: [[FILE:DTMAIN.CBL|DTMAIN.CBL]], [[FILE:SPINQ.CBL|SPINQ.CBL]], [[FILE:CTMAIN.CBL|CTMAIN.CBL]], [[FILE:JCMAIN.CBL|JCMAIN.CBL]], [[FILE:ARRAYBR.CPY|ARRAYBR.CPY]])\n\n### 3. **Screen and Menu Management**\n- The system uses screen copybooks and menu programs to manage user interfaces.\n- Example: [[FILE:ACUCOBOL_DEF.CPY|ACUCOBOL_DEF.CPY]] defines screen attributes such as graphical interface support, screen height/width, and printer access.\n- (Source: [[FILE:ACUCOBOL_DEF.CPY|ACUCOBOL_DEF.CPY]])\n\n### 4. **File and Database Access**\n- Data is stored and accessed via indexed files and SQL tables.\n- Programs interact with files such as BRFILE (branch records), payment files, and ledger files.\n- SQL connectivity is managed via copybooks like [[FILE:CONNECTW_SQL.CPY|CONNECTW_SQL.CPY]].\n- (Source: [[FILE:ARRAYBR.CPY|ARRAYBR.CPY]], LIBGB/[[FILE:CONNECTW_SQL.CPY|CONNECTW_SQL.CPY]])\n\n### 5. **Batch Processing and Reporting**\n- Specialized COBOL programs handle batch jobs, reporting, and extraction tasks.\n- Example: [[FILE:EMTRR2.CBL|EMTRR2.CBL]] and [[FILE:EMTRR3.CBL|EMTRR3.CBL]] contain logic for writing detail lines and updating totals for reports.\n- (Source: [[FILE:EMTRR2.CBL|EMTRR2.CBL]], [[FILE:EMTRR3.CBL|EMTRR3.CBL]])\n\n### 6. **Declarative and Modular Design**\n- Programs are organized into modules (e.g., MAIN-MODULE, ENTRY-MODULE, WRITE-MODULE, DELETE-MODULE) for maintainability and separation of concerns.\n- (Source: [[FILE:M|M]]ultiple program flows, e.g., CIINQ, CTMAIN, ICMAIN, etc.)\n\n### 7. **Legacy Mainframe Environment**\n- The system is designed for mainframe deployment, likely running on IBM or compatible hardware.\n- Uses classic COBOL constructs and mainframe file handling.\n\n---\n\n## Visual Representation\n\nHere's a visual overview of the OTIS system's technology architecture:\n\n<svg width=\"700\" height=\"500\" xmlns=\"http://www.w3.org/2000/svg\">\n  <text x=\"350\" y=\"30\" text-anchor=\"middle\" font-size=\"22\" font-weight=\"bold\" fill=\"#1a1a1a\">OTIS System Architecture</text>\n  \n  <!-- Presentation Layer -->\n  <rect x=\"50\" y=\"70\" width=\"600\" height=\"100\" fill=\"#e0e7ff\" stroke=\"#667eea\" stroke-width=\"3\" rx=\"8\"/>\n  <text x=\"350\" y=\"95\" text-anchor=\"middle\" font-size=\"18\" font-weight=\"bold\" fill=\"#4338ca\">Presentation Layer</text>\n  <text x=\"350\" y=\"120\" text-anchor=\"middle\" font-size=\"14\" fill=\"#4338ca\">Screens, Menus, Copybooks</text>\n  <text x=\"350\" y=\"140\" text-anchor=\"middle\" font-size=\"12\" fill=\"#6366f1\">User Input/Display</text>\n  \n  <!-- Business Logic Layer -->\n  <rect x=\"50\" y=\"200\" width=\"600\" height=\"100\" fill=\"#dbeafe\" stroke=\"#3b82f6\" stroke-width=\"3\" rx=\"8\"/>\n  <text x=\"350\" y=\"225\" text-anchor=\"middle\" font-size=\"18\" font-weight=\"bold\" fill=\"#1e40af\">Business Logic Layer</text>\n  <text x=\"350\" y=\"250\" text-anchor=\"middle\" font-size=\"14\" fill=\"#1e40af\">COBOL Programs, Modular Design</text>\n  <text x=\"350\" y=\"270\" text-anchor=\"middle\" font-size=\"12\" fill=\"#3b82f6\">Validation, Processing, Routing</text>\n  \n  <!-- Data Layer -->\n  <rect x=\"50\" y=\"330\" width=\"600\" height=\"100\" fill=\"#dcfce7\" stroke=\"#22c55e\" stroke-width=\"3\" rx=\"8\"/>\n  <text x=\"350\" y=\"355\" text-anchor=\"middle\" font-size=\"18\" font-weight=\"bold\" fill=\"#15803d\">Data Layer</text>\n  <text x=\"350\" y=\"380\" text-anchor=\"middle\" font-size=\"14\" fill=\"#15803d\">Indexed Files, SQL Tables</text>\n  <text x=\"350\" y=\"400\" text-anchor=\"middle\" font-size=\"12\" fill=\"#22c55e\">Persistent Storage</text>\n  \n  <!-- Connecting arrows -->\n  <defs>\n    <marker id=\"arrow\" markerWidth=\"10\" markerHeight=\"10\" refX=\"9\" refY=\"3\" orient=\"auto\">\n      <polygon points=\"0 0, 10 3, 0 6\" fill=\"#666\"/>\n    </marker>\n  </defs>\n  <line x1=\"350\" y1=\"170\" x2=\"350\" y2=\"200\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrow)\"/>\n  <line x1=\"350\" y1=\"300\" x2=\"350\" y2=\"330\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrow)\"/>\n</svg>\n\n---\n\n### **Summary Table of Technology Components**\n\n| Component Type         | Examples / Purpose                                      | Source Reference                        |\n|-----------------------|---------------------------------------------------------|-----------------------------------------|\n| COBOL Programs        | CIINQ, CTMAIN, ICMAIN, etc. (business logic)            | CIINQ, CTMAIN, ICMAIN, etc.             |\n| Copybooks             | LIBWI/[[FILE:DLSCANW.CPY|DLSCANW.CPY]], LIBGB/[[FILE:CONNECTW_SQL.CPY|CONNECTW_SQL.CPY]], etc.         | [[FILE:DTMAIN.CBL|DTMAIN.CBL]], [[FILE:CTMAIN.CBL|CTMAIN.CBL]], [[FILE:ARRAYBR.CPY|ARRAYBR.CPY]]     |\n| Screen Definitions    | [[FILE:ACUCOBOL_DEF.CPY|ACUCOBOL_DEF.CPY]] (UI attributes)                        | [[FILE:ACUCOBOL_DEF.CPY|ACUCOBOL_DEF.CPY]]                        |\n| File/DB Access        | BRFILE, SQL tables, [[FILE:CONNECTW_SQL.CPY|CONNECTW_SQL.CPY]]                    | [[FILE:ARRAYBR.CPY|ARRAYBR.CPY]], LIBGB/[[FILE:CONNECTW_SQL.CPY|CONNECTW_SQL.CPY]]     |\n| Batch/Reporting       | [[FILE:EMTRR2.CBL|EMTRR2.CBL]], [[FILE:EMTRR3.CBL|EMTRR3.CBL]] (report logic)                   | [[FILE:EMTRR2.CBL|EMTRR2.CBL]], [[FILE:EMTRR3.CBL|EMTRR3.CBL]]                  |\n| Modular Design        | MAIN-MODULE, ENTRY-MODULE, etc.                         | CIINQ, CTMAIN, ICMAIN, etc.             |\n| Mainframe Environment | COBOL, indexed files, batch jobs                        | System-wide                             |\n\n---\n\n**In summary:**  \nOTIS/OTOS leverages COBOL programs, copybooks, screen/menu management, file/database access, batch/reporting modules, and a modular mainframe architecture to solve complex loan servicing and financial transaction problems for the financial services industry.",
  "What are the common business transactions processed by OTIS?": "The OTIS/OTOS application processes a wide range of business transactions typical for a loan servicing and financial management system. Based on the retrieved context, here are the **most common business transactions** handled by OTIS:\n\n---\n\n### 1. **Loan Origination and Maintenance**\n- Creating new loans\n- Updating loan details (e.g., terms, interest rates, borrower info)\n- Maintaining loan records throughout their lifecycle\n\n### 2. **Payment Processing**\n- Accepting customer payments (cash, check, ACH, direct deposit)\n- Applying payments to loan balances\n- Handling partial payments, refunds, and non-cash payoffs\n\n### 3. **Disbursements and Deposits**\n- Disbursing loan proceeds to borrowers or dealers\n- Processing deposits (including direct deposits and scanned checks)\n- Bank adjustments and clearing operations\n\n### 4. **Transfers**\n- Account transfers (between branches, classes, or bulk transfers)\n- Branch-level and class-level fund movements\n\n### 5. **Rebates and Rescissions**\n- Calculating and processing rebates (e.g., for early payoff or policy changes)\n- Calculating rescission dates and handling rescission events\n\n### 6. **Account Conversions**\n- Converting account types or migrating accounts between products\n\n### 7. **Reporting and Inquiry**\n- Generating summary and detailed reports (e.g., earnings, payments, balances)\n- Inquiry into account, loan, and transaction details\n\n### 8. **End-of-Day and Batch Processing**\n- Running daily, monthly, and yearly batch jobs to update balances, accrue interest, and reconcile accounts\n\n### 9. **Security and Access Control**\n- Branch security password testing\n- User authentication and authorization for sensitive operations\n\n---\n\n#### **Examples from Source Code and Copybooks:**\n\n- **Payment Types:**  \n  According to [[FILE:LP01TRC.CPY|LP01TRC.CPY]], the system handles various transaction codes:\n  - \"AC\" – Dealer ACH, direct deposit of dealer proceeds\n  - \"BK\" – Bank adjustment\n  - \"CA\" – Cash receipt/disbursement\n  - \"RD\" – Receipt (dealer proceeds)\n  - \"RC\" – Receipt (dealer reserve from charges)\n  - \"RR\" – Reserve (dealer reserve from principal)\n  (Source: [[FILE:LP01TRC.CPY|LP01TRC.CPY]], Index: code)\n\n- **Disbursement Logic:**  \n  Example from [[FILE:MBEOD5TR.CPY|MBEOD5TR.CPY]]:\n  - Moving bank GL numbers and deposit amounts\n  - Clearing deposits and handling scanned checks\n  (Source: [[FILE:MBEOD5TR.CPY|MBEOD5TR.CPY]], Index: code)\n\n- **Rebate and Rescission Calculations:**  \n  - Programs and copybooks like SEBATC, [[FILE:RESCIND.CPY|RESCIND.CPY]], and [[FILE:RESCINDW.CPY|RESCINDW.CPY]] handle rebate and rescission date calculations.\n  (Source: [[FILE:SEBATC|SEBATC]], [[FILE:I|I]]ndex: flows; [[FILE:RESCIND.CPY|RESCIND.CPY]], Index: code; [[FILE:RESCINDW.CPY|RESCINDW.CPY]], Index: code)\n\n- **Batch and End-of-Day Processing:**  \n  - Programs like LPEOD5 and PDPURG perform daily processing, including transactions, deposits, checks, direct loans, transfers, and account conversions.\n  (Source: [[FILE:LPEOD5.CBL|LPEOD5.CBL]], Index: code; PDPURG, Index: flows)\n\n---\n\n### **Summary Table of Common Transactions**\n\n| Transaction Type      | Description                                      | Example Programs/Copybooks         |\n|----------------------|--------------------------------------------------|------------------------------------|\n| Loan Origination     | Create/update loans                              | LPMAIN, LNCRE2                     |\n| Payment Processing   | Accept/apply payments, refunds                   | GP-PAYOFF-NONCASH, EMCASH, LP01TRC |\n| Disbursements        | Disburse funds, process deposits                 | MBEOD5TR, LPEOD5                   |\n| Transfers            | Move funds between accounts/branches             | BULKT1, BULKT2, TRBFILE, TRXFILE   |\n| Rebates/Rescissions  | Calculate rebates, rescission dates              | SEBATC, [[FILE:RESCIND.CPY|RESCIND.CPY]], [[FILE:RESCINDW.CPY|RESCINDW.CPY]]  |\n| Account Conversion   | Change account types                             | LPEOD5                             |\n| Reporting/Inquiry    | Generate reports, perform inquiries              | SUMMBY, CPINQ0, CPINQ1             |\n| Batch Processing     | End-of-day, monthly, yearly updates              | LPEOD5, PDPURG, EOYUPD             |\n| Security/Access      | Passwords, access control                        | [[FILE:GLRCAP.CBL|GLRCAP.CBL]]                         |\n\n---\n\n### **Business Impact**\n\nThese transactions support the full lifecycle of loan servicing, from origination to payoff, including all financial movements, compliance calculations, and reporting needed for a financial institution.\n\n---\n\n**Sources:**\n- [[FILE:LP01TRC.CPY|LP01TRC.CPY]] (transaction codes and payment types)\n- [[FILE:LPEOD5.CBL|LPEOD5.CBL]] (daily processing steps)\n- SEBATC, [[FILE:RESCIND.CPY|RESCIND.CPY]], [[FILE:RESCINDW.CPY|RESCINDW.CPY]] (rebate/rescission logic)\n- [[FILE:MBEOD5TR.CPY|MBEOD5TR.CPY]] (disbursement logic)\n- SUMMBY, CPINQ0, CPINQ1 (reporting/inquiry)\n- [[FILE:GLRCAP.CBL|GLRCAP.CBL]] (security logic)\n- PDPURG (batch processing)\n- Program metadata (Index: programs)\n\nIf you need details on a specific transaction type or want to see the flow for a particular business event, let me know!",
  "What are the key data structures and copybooks in OTIS?": "The key data structures in the OTIS/OTOS application are defined and managed through a set of commonly used copybooks. These copybooks encapsulate the main business entities, file layouts, and working storage areas that support loan servicing, financial transactions, and system operations.\n\n### Most Common Copybooks in OTIS\n\nBelow is a list of the most frequently referenced copybooks, along with a brief description of their purpose (based on file names, usage context, and typical COBOL conventions):\n\n#### 1. **LIBGB/[[FILE:GBFSPR.CPY|GBFSPR.CPY]]**  \n   - **Purpose:** General Business File Structure  \n   - **Description:** Defines the main record layouts for business files, including loan, account, and transaction records. Used extensively for reading and writing core data.\n\n#### 2. **LIBGB/[[FILE:GBFDPR.CPY|GBFDPR.CPY]]**  \n   - **Purpose:** Daily Processing Record Structure  \n   - **Description:** Contains definitions for daily processing files, batch records, and related transaction data. Used in programs that handle daily batch operations and updates.\n\n#### 3. **LIBLP/[[FILE:LPMENU.CPY|LPMENU.CPY]]**  \n   - **Purpose:** Loan Processing Menu Screen  \n   - **Description:** Provides screen field definitions and menu layouts for loan processing modules. Used in programs that display or navigate loan-related menus.\n\n#### 4. **LIBLP/[[FILE:LPMNUI.CPY|LPMNUI.CPY]]**  \n   - **Purpose:** Loan Processing Menu UI  \n   - **Description:** Defines user interface elements and screen fields for loan processing screens. Supports user input and display logic in loan modules.\n\n#### 5. **LIBGB/[[FILE:PASSWDW.CPY|PASSWDW.CPY]]**  \n   - **Purpose:** Password and Security Data  \n   - **Description:** Contains fields for password management, user authentication, and security checks. Used in programs that require user login or access control.\n\n#### 6. **LIBGB/[[FILE:EOINIT.CPY|EOINIT.CPY]]**  \n   - **Purpose:** End-of-Day Initialization  \n   - **Description:** Defines structures for end-of-day processing, including batch initialization and control records.\n\n#### 7. **LIBGB/[[FILE:ACCESS.CPY|ACCESS.CPY]]**  \n   - **Purpose:** Access Control  \n   - **Description:** Manages access permissions and audit trails for system operations.\n\n#### 8. **LIBGB/[[FILE:FERRORS.CPY|FERRORS.CPY]]**  \n   - **Purpose:** File Error Codes  \n   - **Description:** Provides standardized error codes and messages for file operations and transaction processing.\n\n#### 9. **LIBGB/[[FILE:SCREEN.CPY|SCREEN.CPY]]**  \n   - **Purpose:** Common Screen Definitions  \n   - **Description:** Contains reusable screen field layouts and display logic for various modules.\n\n#### 10. **LIBWI/[[FILE:GRSCANW.CPY|GRSCANW.CPY]]**  \n   - **Purpose:** Group Scan Working Storage  \n   - **Description:** Defines working storage areas for group scanning and batch operations.\n\n#### 11. **LIBFP/[[FILE:PSTPMCW.CPY|PSTPMCW.CPY]]**  \n   - **Purpose:** Post Payment Working Storage  \n   - **Description:** Used in payment posting modules to manage payment records and calculations.\n\n#### 12. **LIBGB/[[FILE:DECLRP2.CPY|DECLRP2.CPY]]**  \n   - **Purpose:** Declaration Records  \n   - **Description:** Contains record layouts for declaration and reporting modules.\n\n#### 13. **LIBGB/[[FILE:GBFSWK2I.CPY|GBFSWK2I.CPY]]**  \n   - **Purpose:** Secondary Working Storage  \n   - **Description:** Provides additional working storage definitions for specialized processing.\n\n#### 14. **LIBGB/[[FILE:GBFSWKI.CPY|GBFSWKI.CPY]]**  \n   - **Purpose:** Working Storage  \n   - **Description:** General working storage definitions for business logic modules.\n\n#### 15. **LIBGB/[[FILE:GB01SQLLOG.CPY|GB01SQLLOG.CPY]]**  \n   - **Purpose:** SQL Logging  \n   - **Description:** Defines structures for logging SQL operations and database interactions.\n\n#### 16. **LIBGB/[[FILE:SYSTEM.CPY|SYSTEM.CPY]]**  \n   - **Purpose:** System Control  \n   - **Description:** Contains system-level control fields and configuration data.\n\n#### 17. **LIBLP/[[FILE:LPPOF2.CPY|LPPOF2.CPY]]**  \n   - **Purpose:** Loan Payoff File  \n   - **Description:** Defines record layouts for loan payoff calculations and reporting.\n\n#### 18. **LIBLP/[[FILE:LPCKCL.CPY|LPCKCL.CPY]]**  \n   - **Purpose:** Loan Check Clearing  \n   - **Description:** Used for check clearing operations in loan modules.\n\n#### 19. **LIBLP/[[FILE:LPWSDL.CPY|LPWSDL.CPY]]**  \n   - **Purpose:** Loan Working Storage Data  \n   - **Description:** Provides working storage fields for loan processing programs.\n\n#### 20. **LIBWI/[[FILE:PFSWINDOWS.CPY|PFSWINDOWS.CPY]]**  \n   - **Purpose:** Windows Processing  \n   - **Description:** Defines structures for windowed batch processing.\n\n---\n\n### Summary Table (First 20 Key Copybooks)\n\n| Copybook Name            | Purpose/Description                        |\n|------------------------- |--------------------------------------------|\n| [[FILE:GBFSPR.CPY|GBFSPR.CPY]]               | General business file structure            |\n| [[FILE:GBFDPR.CPY|GBFDPR.CPY]]               | Daily processing record structure          |\n| [[FILE:LPMENU.CPY|LPMENU.CPY]]               | Loan processing menu screen                |\n| [[FILE:LPMNUI.CPY|LPMNUI.CPY]]               | Loan processing menu UI                    |\n| [[FILE:PASSWDW.CPY|PASSWDW.CPY]]              | Password/security data                     |\n| [[FILE:EOINIT.CPY|EOINIT.CPY]]               | End-of-day initialization                  |\n| [[FILE:ACCESS.CPY|ACCESS.CPY]]               | Access control/audit                       |\n| [[FILE:FERRORS.CPY|FERRORS.CPY]]              | File error codes/messages                  |\n| [[FILE:SCREEN.CPY|SCREEN.CPY]]               | Common screen definitions                  |\n| [[FILE:GRSCANW.CPY|GRSCANW.CPY]]              | Group scan working storage                 |\n| [[FILE:PSTPMCW.CPY|PSTPMCW.CPY]]              | Post payment working storage               |\n| [[FILE:DECLRP2.CPY|DECLRP2.CPY]]              | Declaration records                        |\n| [[FILE:GBFSWK2I.CPY|GBFSWK2I.CPY]]             | Secondary working storage                  |\n| [[FILE:GBFSWKI.CPY|GBFSWKI.CPY]]              | Working storage                            |\n| [[FILE:GB01SQLLOG.CPY|GB01SQLLOG.CPY]]           | SQL logging structures                     |\n| [[FILE:SYSTEM.CPY|SYSTEM.CPY]]               | System control/configuration               |\n| [[FILE:LPPOF2.CPY|LPPOF2.CPY]]               | Loan payoff file structure                 |\n| [[FILE:LPCKCL.CPY|LPCKCL.CPY]]               | Loan check clearing                        |\n| [[FILE:LPWSDL.CPY|LPWSDL.CPY]]               | Loan working storage data                  |\n| [[FILE:PFSWINDOWS.CPY|PFSWINDOWS.CPY]]           | Windows processing structures              |\n\n---\n\n### How These Data Structures Are Used\n\n- **File Layouts:** Most copybooks ([[FILE:GBFSPR.CPY|GBFSPR.CPY]], [[FILE:GBFDPR.CPY|GBFDPR.CPY]], [[FILE:LPPOF2.CPY|LPPOF2.CPY]]) define the structure of records stored in main business files (loans, accounts, transactions).\n- **Screen/UI Definitions:** Copybooks like [[FILE:LPMENU.CPY|LPMENU.CPY]], [[FILE:LPMNUI.CPY|LPMNUI.CPY]], and [[FILE:SCREEN.CPY|SCREEN.CPY]] provide reusable field layouts for user interfaces.\n- **Working Storage:** [[FILE:GBFSWKI.CPY|GBFSWKI.CPY]], [[FILE:GBFSWK2I.CPY|GBFSWK2I.CPY]], and [[FILE:LPWSDL.CPY|LPWSDL.CPY]] define temporary storage areas for calculations and intermediate data.\n- **Security & Control:** [[FILE:PASSWDW.CPY|PASSWDW.CPY]] and [[FILE:ACCESS.CPY|ACCESS.CPY]] manage user authentication and access permissions.\n- **Error Handling:** [[FILE:FERRORS.CPY|FERRORS.CPY]] standardizes error codes and messages across modules.\n- **Batch/Processing Control:** [[FILE:EOINIT.CPY|EOINIT.CPY]] and [[FILE:SYSTEM.CPY|SYSTEM.CPY]] support batch operations and system configuration.\n\n---\n\n### Source Citations\n\n- Copybook usage and descriptions are based on the retrieved program metadata and copybook usage records.  \n  (Source: [[FILE:MBALR4.CBL|MBALR4.CBL]], [[FILE:IOCDBI.CBL|IOCDBI.CBL]], [[FILE:LN1099.CBL|LN1099.CBL]], [[FILE:LONPG7.CBL|LONPG7.CBL]], [[FILE:CLASTR.CBL|CLASTR.CBL]], [[FILE:BULKGR.CBL|BULKGR.CBL]], [[FILE:JKCAVA.CBL|JKCAVA.CBL]], [[FILE:MB4ALL.CBL|MB4ALL.CBL]], [[FILE:WREOM1.CBL|WREOM1.CBL]], [[FILE:BNKDI0.CBL|BNKDI0.CBL]], [[FILE:PSTPMC.CBL|PSTPMC.CBL]], [[FILE:AOLIST.CBL|AOLIST.CBL]], [[FILE:LONP3T.CBL|LONP3T.CBL]], [[FILE:CLUPT2.CBL|CLUPT2.CBL]], [[FILE:IOPARN.CBL|IOPARN.CBL]], [[FILE:IODSRN.CBL|IODSRN.CBL]], [[FILE:IOFDBI.CBL|IOFDBI.CBL]], [[FILE:IODSIN.CBL|IODSIN.CBL]], [[FILE:TEXTIN.CBL|TEXTIN.CBL]], [[FILE:AGEALP.CBL|AGEALP.CBL]], [[FILE:CPCORP.CBL|CPCORP.CBL]], [[FILE:ASBWEX.CBL|ASBWEX.CBL]], [[FILE:CLMCTR.CBL|CLMCTR.CBL]], [[FILE:BNKWI0.CBL|BNKWI0.CBL]], [[FILE:IOLSXI.CBL|IOLSXI.CBL]], [[FILE:RZ1ERN.CBL|RZ1ERN.CBL]], [[FILE:MBALR6.CBL|MBALR6.CBL]], [[FILE:AC1ERN.CBL|AC1ERN.CBL]], [[FILE:GLEOD2.CBL|GLEOD2.CBL]], [[FILE:COLLET.CBL|COLLET.CBL]], [[FILE:LONIV0.CBL|LONIV0.CBL]], [[FILE:MBALR5.CBL|MBALR5.CBL]], [[FILE:IOLSJI.CBL|IOLSJI.CBL]], [[FILE:LONIO0.CBL|LONIO0.CBL]], [[FILE:JKCAVA.CBL|JKCAVA.CBL]], [[FILE:MBALR3.CBL|MBALR3.CBL]], [[FILE:IOCARN.CBL|IOCARN.CBL]], [[FILE:IOCDBR.CBL|IOCDBR.CBL]], [[FILE:UP3234.CBL|UP3234.CBL]], [[FILE:BHLIST.CBL|BHLIST.CBL]], [[FILE:CPRUN.CBL|CPRUN.CBL]], [[FILE:AVAILC.CBL|AVAILC.CBL]], [[FILE:DISBI0.CBL|DISBI0.CBL]], [[FILE:LONPJ0.CBL|LONPJ0.CBL]], [[FILE:BWSCAN.CBL|BWSCAN.CBL]], [[FILE:MBDEX2.CBL|MBDEX2.CBL]], [[FILE:CLMCUP.CBL|CLMCUP.CBL]], [[FILE:VOIDI0.CBL|VOIDI0.CBL]], [[FILE:IOCQSR.CBL|IOCQSR.CBL]], [[FILE:PDSCAN.CBL|PDSCAN.CBL]], [[FILE:IODMIN.CBL|IODMIN.CBL]], [[FILE:LONIU0.CBL|LONIU0.CBL]], [[FILE:MBALRG.CBL|MBALRG.CBL]], [[FILE:ICLIST.CBL|ICLIST.CBL]], [[FILE:IOCDRN.CBL|IOCDRN.CBL]], [[FILE:LONIN0.CBL|LONIN0.CBL]], [[FILE:GBFDSQLLOG.CPY|GBFDSQLLOG.CPY]], [[FILE:GIACCT.CBL|GIACCT.CBL]], [[FILE:JKCAVA.CBL|JKCAVA.CBL]], [[FILE:WACFSB.CBL|WACFSB.CBL]], [[FILE:COLRP2.CBL|COLRP2.CBL]], [[FILE:LONPK0.CBL|LONPK0.CBL]], [[FILE:AOLIST.CBL|AOLIST.CBL]], [[FILE:XONPN0.CBL|XONPN0.CBL]], [[FILE:COLRP2.CBL|COLRP2.CBL]], [[FILE:LONIK0.CBL|LONIK0.CBL]], [[FILE:LONPV0.CBL|LONPV0.CBL]], [[FILE:IOFDBR.CBL|IOFDBR.CBL]], [[FILE:XONIN0.CBL|XONIN0.CBL]], [[FILE:LONPO0.CBL|LONPO0.CBL]], [[FILE:MBAGE1.CBL|MBAGE1.CBL]], [[FILE:MBALR2.CBL|MBALR2.CBL]], [[FILE:INSTRP.CBL|INSTRP.CBL]], [[FILE:IOLSRI.CBL|IOLSRI.CBL]], [[FILE:CDLIST.CBL|CDLIST.CBL]], [[FILE:BOREMP.CBL|BOREMP.CBL]], [[FILE:ILMUPD.CBL|ILMUPD.CBL]], [[FILE:CLMCTR.CBL|CLMCTR.CBL]], [[FILE:IOCDBR.CBL|IOCDBR.CBL]], [[FILE:FXGBDT.CBL|FXGBDT.CBL]], [[FILE:ILMISC.CBL|ILMISC.CBL]], [[FILE:IODMRN.CBL|IODMRN.CBL]], [[FILE:LONPN0.CBL|LONPN0.CBL]], [[FILE:IOLSRR.CBL|IOLSRR.CBL]], [[FILE:LONIJ0.CBL|LONIJ0.CBL]], [[FILE:AGEALP.CBL|AGEALP.CBL]], [[FILE:EQLIST.CBL|EQLIST.CBL]], [[FILE:IOLTII.CBL|IOLTII.CBL]], [[FILE:CRNOF3.CBL|CRNOF3.CBL]], [[FILE:LPFILE.CBL|LPFILE.CBL]], [[FILE:IOGQSI.CBL|IOGQSI.CBL]])\n\n---\n\n**In summary:**  \nThe OTIS/OTOS system relies on a core set of copybooks to define its key data structures, supporting business logic, file operations, user interfaces, and system control. These copybooks are reused across many programs to ensure consistency and maintainability throughout the application.",
  "What are the main menu options in the OTIS system?": "The main menu options in the OTIS/OTOS system represent the top-level choices available to users for processing various business transactions. These options are accessed from the MASTER MENU (sometimes called MAIN MENU), which serves as the central navigation point for the application.\n\n### Main Menu Options (Business Domains)\n\nBased on the retrieved context, the main menu options typically include:\n\n- **Loan Processing** (LOAN SYSTEM MASTER MENU)\n  - Handles loan origination, maintenance, payments, and related activities.\n- **Dealer Maintenance**\n  - Manages dealer records and relationships.\n- **Addon Maintenance**\n  - Supports add-on products and services linked to loans.\n- **Batch Processing**\n  - Facilitates daily, monthly, and special batch operations.\n- **Special Procedures**\n  - Contains non-standard tasks not performed in daily processing.\n- **Upgrade Functions**\n  - Provides system upgrade and maintenance utilities.\n- **General Ledger**\n  - Manages accounting and financial reporting.\n- **Accounts Payable**\n  - Handles vendor payments and related transactions.\n- **Collection Reports**\n  - Generates reports for delinquent accounts and collection activities.\n\n### Example Menu Option Descriptions\n\nHere are some representative options as described in the help text and screen definitions:\n\n- **Loan System Master Menu**  \n  \"Makes up all the options available for processing on the loan system.\"  \n  (Source: [[FILE:LP|LP]]_LPMENU_GENERALHELP, Index: help_fields)\n\n- **Master Menu**  \n  \"Makes up all the options available for processing on the system.\"  \n  (Source: [[FILE:GB|GB]]_MAINMU_GENERALHELP, Index: help_fields)\n\n- **Daily Processing Menu**  \n  \"Offers all the available options performed during a standard business day.\"  \n  (Source: [[FILE:LP|LP]]_LPSMNU_GENERALHELP, Index: help_fields)\n\n- **Special Procedures Menu**  \n  \"Contains the non-standard tasks that are not performed in daily processing.\"  \n  (Source: [[FILE:SP|SP]]_OPMENU_GENERALHELP, Index: help_fields)\n\n- **Upgrade Menu**  \n  \"Enter the number of the Upgrade or Function-Key. 'F1' = Exit to the 'MASTER MENU'.\"  \n  (Source: [[FILE:UP|UP]]_UPMENU_SEL, Index: help_fields)\n\n- **General Ledger Menu**  \n  \"Enter the MENU OPTION your wish to enter OR press the FUNCTION KEY 7 (F7) to exit back to the GENERAL LEDGER MASTER MENU.\"  \n  (Source: [[FILE:GL|GL]]_FSMENU_SEL, Index: help_fields)\n\n### Navigation and Function Keys\n\n- **F1**: Return to the Master Menu\n- **F7**: Go back one screen or exit to previous menu\n\nThese function keys are consistently referenced across different modules for navigation.\n\n### Visual Representation\n\nHere's a conceptual diagram of the main menu options and their business domains:\n\n<svg width=\"900\" height=\"420\" xmlns=\"http://www.w3.org/2000/svg\">\n  <text x=\"450\" y=\"30\" text-anchor=\"middle\" font-size=\"22\" font-weight=\"bold\" fill=\"#1a1a1a\">OTIS System Main Menu Options</text>\n  \n  <!-- Main Menu -->\n  <rect x=\"350\" y=\"70\" width=\"200\" height=\"60\" fill=\"#667eea\" stroke=\"#4338ca\" stroke-width=\"3\" rx=\"10\"/>\n  <text x=\"450\" y=\"100\" text-anchor=\"middle\" font-size=\"16\" font-weight=\"bold\" fill=\"white\">MASTER MENU</text>\n  \n  <!-- Option Boxes -->\n  <rect x=\"80\" y=\"170\" width=\"160\" height=\"50\" fill=\"#4ade80\" stroke=\"#16a34a\" stroke-width=\"2\" rx=\"8\"/>\n  <text x=\"160\" y=\"200\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"white\">Loan Processing</text>\n  \n  <rect x=\"270\" y=\"170\" width=\"160\" height=\"50\" fill=\"#4ade80\" stroke=\"#16a34a\" stroke-width=\"2\" rx=\"8\"/>\n  <text x=\"350\" y=\"200\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"white\">Dealer Maintenance</text>\n  \n  <rect x=\"460\" y=\"170\" width=\"160\" height=\"50\" fill=\"#4ade80\" stroke=\"#16a34a\" stroke-width=\"2\" rx=\"8\"/>\n  <text x=\"540\" y=\"200\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"white\">Addon Maintenance</text>\n  \n  <rect x=\"650\" y=\"170\" width=\"160\" height=\"50\" fill=\"#4ade80\" stroke=\"#16a34a\" stroke-width=\"2\" rx=\"8\"/>\n  <text x=\"730\" y=\"200\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"white\">Batch Processing</text>\n  \n  <rect x=\"80\" y=\"250\" width=\"160\" height=\"50\" fill=\"#f59e0b\" stroke=\"#d97706\" stroke-width=\"2\" rx=\"8\"/>\n  <text x=\"160\" y=\"280\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"white\">Special Procedures</text>\n  \n  <rect x=\"270\" y=\"250\" width=\"160\" height=\"50\" fill=\"#f59e0b\" stroke=\"#d97706\" stroke-width=\"2\" rx=\"8\"/>\n  <text x=\"350\" y=\"280\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"white\">Upgrade Functions</text>\n  \n  <rect x=\"460\" y=\"250\" width=\"160\" height=\"50\" fill=\"#f59e0b\" stroke=\"#d97706\" stroke-width=\"2\" rx=\"8\"/>\n  <text x=\"540\" y=\"280\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"white\">General Ledger</text>\n  \n  <rect x=\"650\" y=\"250\" width=\"160\" height=\"50\" fill=\"#f59e0b\" stroke=\"#d97706\" stroke-width=\"2\" rx=\"8\"/>\n  <text x=\"730\" y=\"280\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"white\">Accounts Payable</text>\n  \n  <rect x=\"270\" y=\"330\" width=\"160\" height=\"50\" fill=\"#ef4444\" stroke=\"#dc2626\" stroke-width=\"2\" rx=\"8\"/>\n  <text x=\"350\" y=\"360\" text-anchor=\"middle\" font-size=\"14\" font-weight=\"bold\" fill=\"white\">Collection Reports</text>\n  \n  <!-- Arrows from Master Menu to options -->\n  <defs>\n    <marker id=\"arrow\" markerWidth=\"10\" markerHeight=\"10\" refX=\"9\" refY=\"3\" orient=\"auto\">\n      <polygon points=\"0 0, 10 3, 0 6\" fill=\"#666\"/>\n    </marker>\n  </defs>\n  <line x1=\"450\" y1=\"130\" x2=\"160\" y2=\"170\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrow)\"/>\n  <line x1=\"450\" y1=\"130\" x2=\"350\" y2=\"170\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrow)\"/>\n  <line x1=\"450\" y1=\"130\" x2=\"540\" y2=\"170\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrow)\"/>\n  <line x1=\"450\" y1=\"130\" x2=\"730\" y2=\"170\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrow)\"/>\n  <line x1=\"450\" y1=\"130\" x2=\"160\" y2=\"250\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrow)\"/>\n  <line x1=\"450\" y1=\"130\" x2=\"350\" y2=\"250\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrow)\"/>\n  <line x1=\"450\" y1=\"130\" x2=\"540\" y2=\"250\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrow)\"/>\n  <line x1=\"450\" y1=\"130\" x2=\"730\" y2=\"250\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrow)\"/>\n  <line x1=\"450\" y1=\"130\" x2=\"350\" y2=\"330\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrow)\"/>\n</svg>\n\n---\n\n**Summary:**  \nThe OTIS system's main menu provides access to all major business functions, including loan processing, dealer and addon maintenance, batch operations, special procedures, upgrades, accounting, and reporting. The exact menu option text is not present in the retrieved context, but the business domains and navigation structure are well-documented.\n\n**Sources:**\n- LP_LPMENU_GENERALHELP (Loan System Master Menu)\n- GB_MAINMU_GENERALHELP (Master Menu)\n- LP_LPSMNU_GENERALHELP (Daily Processing Menu)\n- SP_OPMENU_GENERALHELP (Special Procedures Menu)\n- UP_UPMENU_SEL (Upgrade Menu)\n- GL_FSMENU_SEL (General Ledger Menu)\n- AP_APMENU_GENERALHELP (Accounts",
  "What challenges does the current COBOL architecture present?": "The current COBOL architecture in the OTIS/OTOS system presents several key challenges, both from a technical and business perspective:\n\n**1. Complexity and Fragmentation**\n- The system is composed of hundreds of programs and copybooks, many of which are isolated or have deep call chains. For example, programs like CPINQ0 and LONPFC have call depths of 5 and 2, respectively, and intermediate programs both call and are called by others (Source: [[FILE:CPINQ0|CPINQ0]], [[FILE:LONPFC|LONPFC]], [[FILE:I|I]]ndex: programs).\n- Many programs are \"isolated\" with no detected call relationships, making it difficult to trace data flow or business logic across the system (Source: [[FILE:CNCOPY|CNCOPY]]_SCN, CPCORP_SCN, Index: programs).\n\n**2. Maintenance Difficulty**\n- Frequent changes and historical comments indicate ongoing patching and adaptation. For example, [[FILE:SETENV.CBL|SETENV.CBL]] shows recent changes to configuration logic and removal of obsolete sections (Source: [[FILE:SETENV.CBL|SETENV.CBL]], Index: code).\n- Comments in code such as \"REMOVED LOAD-EXT-IO-FILE-TYPE SECTION; NO LONGER NEEDED\" and \"ADDED LOAD-ACUSQL-CONFIG SECTION\" reflect a need to continually update for new requirements and technologies (Source: [[FILE:SETENV.CBL|SETENV.CBL]], Index: code).\n\n**3. Data Structure Redundancy**\n- Many copybooks define similar or overlapping data structures (e.g., LIBGB/[[FILE:EOBUF_EXT.CPY|EOBUF_EXT.CPY]] is included in numerous programs for branch/class/account ranges), leading to potential inconsistencies and duplication (Source: [[FILE:IR1098.CBL|IR1098.CBL]], [[FILE:BYANRP.CBL|BYANRP.CBL]], [[FILE:MBDEXT.CBL|MBDEXT.CBL]], [[FILE:AUDEXT.CBL|AUDEXT.CBL]], Index: code).\n- Redefines and OCCURS clauses are used extensively, which can make understanding and modifying data layouts challenging (Source: [[FILE:IR1098.CBL|IR1098.CBL]], Index: code).\n\n**4. Lack of Modularity and Modern Patterns**\n- The architecture relies heavily on procedural logic and global data, with limited encapsulation or modularity. Many programs have \"degenerate flows\" with no detected paragraphs or perform edges, indicating minimal structure (Source: [[FILE:ACUCOBOL|ACUCOBOL]]-DEF, THE, Index: flows).\n- Modern programming patterns (object orientation, service orientation) are largely absent, making integration with newer systems more difficult.\n\n**5. Documentation and Traceability Issues**\n- While some programs have detailed comments, many rely on cryptic or outdated notes. For example, references to \"FOR MORE EXAMPLES LOOK AT Z:\\DOCUMENTATION\\EOCRON SHELLS.ONE\" suggest reliance on external documentation that may not be easily accessible (Source: [[FILE:EOCRON.CBL|EOCRON.CBL]], Index: code).\n- The use of generic program names and lack of descriptive metadata in some areas makes it hard to understand business purpose without deep code analysis.\n\n**6. Data Flow and Dependency Complexity**\n- Deep and recursive call chains complicate impact analysis and change management. For example, a single menu option may trigger a cascade of program calls and copybook usage, requiring careful tracking to avoid unintended side effects (Source: [[FILE:CPINQ0|CPINQ0]], [[FILE:LONPFC|LONPFC]], [[FILE:I|I]]ndex: programs).\n\n**7. Integration and Technology Constraints**\n- Comments indicate ongoing adaptation for SQL integration (e.g., \"ADDED LOAD-ACUSQL-CONFIG SECTION\"), but legacy file handling and procedural logic remain dominant (Source: [[FILE:SETENV.CBL|SETENV.CBL]], Index: code).\n- The system must bridge older COBOL constructs with newer database and configuration requirements, often resulting in hybrid or workaround solutions.\n\n---\n\n**Summary Table of Key Challenges**\n\n| Challenge                  | Example(s) / Source(s)                                  |\n|----------------------------|--------------------------------------------------------|\n| Complexity & Fragmentation | CPINQ0, LONPFC, CNCOPY_SCN (Index: programs)           |\n| Maintenance Difficulty     | [[FILE:SETENV.CBL|SETENV.CBL]] (Index: code), frequent code comments       |\n| Data Redundancy            | [[FILE:IR1098.CBL|IR1098.CBL]], [[FILE:BYANRP.CBL|BYANRP.CBL]], [[FILE:MBDEXT.CBL|MBDEXT.CBL]] (Index: code)       |\n| Lack of Modularity         | ACUCOBOL-DEF, THE (Index: flows)                       |\n| Documentation Issues       | [[FILE:EOCRON.CBL|EOCRON.CBL]] (Index: code), external doc references      |\n| Dependency Complexity      | CPINQ0, LONPFC (Index: programs)                       |\n| Integration Constraints    | [[FILE:SETENV.CBL|SETENV.CBL]] (Index: code), SQL adaptation comments      |\n\n---\n\n**Here's a visual representation of the architectural layers and their challenges:**\n\n<svg width=\"700\" height=\"500\" xmlns=\"http://www.w3.org/2000/svg\">\n  <text x=\"350\" y=\"30\" text-anchor=\"middle\" font-size=\"22\" font-weight=\"bold\" fill=\"#1a1a1a\">OTIS System Architecture Challenges</text>\n  \n  <!-- Presentation Layer -->\n  <rect x=\"50\" y=\"70\" width=\"600\" height=\"100\" fill=\"#e0e7ff\" stroke=\"#667eea\" stroke-width=\"3\" rx=\"8\"/>\n  <text x=\"350\" y=\"95\" text-anchor=\"middle\" font-size=\"18\" font-weight=\"bold\" fill=\"#4338ca\">Presentation Layer</text>\n  <text x=\"350\" y=\"120\" text-anchor=\"middle\" font-size=\"14\" fill=\"#4338ca\">Screens: SCRN1, PGMENU, GTFORM</text>\n  <text x=\"350\" y=\"140\" text-anchor=\"middle\" font-size=\"12\" fill=\"#6366f1\">Challenge: Fragmented UI logic, legacy screen handling</text>\n  \n  <!-- Business Logic Layer -->\n  <rect x=\"50\" y=\"200\" width=\"600\" height=\"100\" fill=\"#dbeafe\" stroke=\"#3b82f6\" stroke-width=\"3\" rx=\"8\"/>\n  <text x=\"350\" y=\"225\" text-anchor=\"middle\" font-size=\"18\" font-weight=\"bold\" fill=\"#1e40af\">Business Logic Layer</text>\n  <text x=\"350\" y=\"250\" text-anchor=\"middle\" font-size=\"14\" fill=\"#1e40af\">Programs: CPINQ0, LONPFC, SETENV</text>\n  <text x=\"350\" y=\"270\" text-anchor=\"middle\" font-size=\"12\" fill=\"#3b82f6\">Challenge: Deep call chains, procedural logic, maintenance</text>\n  \n  <!-- Data Layer -->\n  <rect x=\"50\" y=\"330\" width=\"600\" height=\"100\" fill=\"#dcfce7\" stroke=\"#22c55e\" stroke-width=\"3\" rx=\"8\"/>\n  <text x=\"350\" y=\"355\" text-anchor=\"middle\" font-size=\"18\" font-weight=\"bold\" fill=\"#15803d\">Data Layer</text>\n  <text x=\"350\" y=\"380\" text-anchor=\"middle\" font-size=\"14\" fill=\"#15803d\">Files/Copybooks: [[FILE:EOBUF_EXT.CPY|EOBUF_EXT.CPY]], SQL Integration</text>\n  <text x=\"350\" y=\"400\" text-anchor=\"middle\" font-size=\"12\" fill=\"#22c55e\">Challenge: Redundant structures, legacy file handling</text>\n  \n  <!-- Connecting arrows -->\n  <defs>\n    <marker id=\"arrow\" markerWidth=\"10\" markerHeight=\"10\" refX=\"9\" refY=\"3\" orient=\"auto\">\n      <polygon points=\"0 0, 10 3, 0 6\" fill=\"#666\"/>\n    </marker>\n  </defs>\n  <line x1=\"350\" y1=\"170\" x2=\"350\" y2=\"200\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrow)\"/>\n  <line x1=\"350\" y1=\"300\" x2=\"350\" y2=\"330\" stroke=\"#666\" stroke-width=\"2\" marker-end=\"url(#arrow)\"/>\n</svg>\n\n---\n\n**In summary:**  \nThe OTIS COBOL architecture is powerful but presents significant challenges in complexity, maintainability, data consistency, and modernization. Addressing these issues would require refactoring for modularity, improving documentation, and streamlining data structures and dependencies.\n\n**Sources:**  \n- [[FILE:SETENV.CBL|SETENV.CBL]], [[FILE:EOCRON.CBL|EOCRON.CBL]], [[FILE:IR1098.CBL|IR1098.CBL]], [[FILE:BYANRP.CBL|BYANRP.CBL]], [[FILE:MBDEXT.CBL|MBDEXT.CBL]], [[FILE:AUDEXT.CBL|AUDEXT.CBL]], ACUCOBOL-DEF, THE, CPINQ0, LONPFC (Indexes: code, programs, flows)"
}