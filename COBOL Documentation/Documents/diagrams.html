<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Diagrams - COBOL Documentation</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 600;
        }

        .header .meta {
            opacity: 0.9;
            margin-top: 10px;
            font-size: 1.1rem;
        }

        .nav-breadcrumb {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            font-size: 0.95rem;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .nav-breadcrumb a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s ease;
        }

        .nav-breadcrumb a:hover {
            text-decoration: underline;
            color: #5a6fd8;
        }

        .content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .content h1 {
            color: #2c3e50;
            font-size: 2.2rem;
            margin-bottom: 1rem;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .content h2 {
            color: #34495e;
            font-size: 1.8rem;
            margin: 2rem 0 1rem 0;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 8px;
        }

        .content h3 {
            color: #667eea;
            font-size: 1.4rem;
            margin: 1.5rem 0 0.8rem 0;
        }

        .content h4 {
            color: #7f8c8d;
            font-size: 1.2rem;
            margin: 1.2rem 0 0.6rem 0;
        }

        .content p {
            margin-bottom: 1.2rem;
            text-align: justify;
        }

        .content ul, .content ol {
            margin: 1rem 0 1rem 2rem;
        }

        .content li {
            margin-bottom: 0.5rem;
        }

        .content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        .content th, .content td {
            border: 1px solid #e0e0e0;
            padding: 12px 15px;
            text-align: left;
        }

        .content th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 0.5px;
        }

        .content tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .content tr:hover {
            background-color: #e8f4f8;
            transition: background-color 0.2s ease;
        }

        .content code {
            background: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 2px 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #d63384;
        }

        .content pre {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 1.5rem 0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .content pre code {
            background: none;
            border: none;
            color: inherit;
            padding: 0;
        }

        .content blockquote {
            border-left: 4px solid #667eea;
            background: #f8f9fa;
            padding: 15px 20px;
            margin: 1.5rem 0;
            border-radius: 0 8px 8px 0;
            font-style: italic;
        }

        .mermaid {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }

        .toc {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .toc h2 {
            color: #495057;
            font-size: 1.3rem;
            margin-bottom: 15px;
            border: none;
            padding: 0;
        }

        .toc ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .toc li {
            margin: 5px 0;
        }

        .toc a {
            color: #667eea;
            text-decoration: none;
            padding: 5px 10px;
            display: block;
            border-radius: 5px;
            transition: background-color 0.2s ease;
        }

        .toc a:hover {
            background-color: #e9ecef;
            text-decoration: underline;
        }

        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s ease;
            display: none;
        }

        .back-to-top:hover {
            transform: translateY(-3px);
        }

        .footer {
            text-align: center;
            padding: 30px;
            color: #666;
            font-size: 0.9rem;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .content {
                padding: 20px;
            }
            
            .content h1 {
                font-size: 1.8rem;
            }
            
            .content h2 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“„ System Diagrams</h1>
            <div class="meta">COBOL Payment Processing Documentation</div>
        </div>

        <div class="nav-breadcrumb"><a href="index.html">ğŸ  Home</a> > ğŸ“Š System Diagrams</div>

        <div class="content">
            
    <h1>System Flow Diagrams</h1>
    <p>Interactive Mermaid diagrams showing system architecture, data flows, and process workflows for the COBOL payment processing system.</p>
    
    <div class="toc">
        <h2>Available Diagrams</h2>
        <ul>
            <li><a href="#APIPAY_Complete_Call_Graph.mmd">ğŸ“Š APIPAY Complete Call Graph</a></li><li><a href="#APIPAY_Database_Updates.mmd">ğŸ“Š APIPAY Database Updates</a></li><li><a href="#APIPAY_Error_Handling.mmd">ğŸ“Š APIPAY Error Handling</a></li><li><a href="#APIPAY_Transaction_Processing.mmd">ğŸ“Š APIPAY Transaction Processing</a></li><li><a href="#C-CALL-CJUL_Call_Graph.mmd">ğŸ“Š C-CALL-CJUL Call Graph</a></li><li><a href="#C-CALL-CJUL_Conversion_Process.mmd">ğŸ“Š C-CALL-CJUL Conversion Process</a></li><li><a href="#C-CALL-CJUL_Main_Flow.mmd">ğŸ“Š C-CALL-CJUL Main Flow</a></li><li><a href="#C-CALL-JUL_Calculation_Components.mmd">ğŸ“Š C-CALL-JUL Calculation Components</a></li><li><a href="#C-CALL-JUL_Call_Graph.mmd">ğŸ“Š C-CALL-JUL Call Graph</a></li><li><a href="#C-CALL-JUL_Main_Flow.mmd">ğŸ“Š C-CALL-JUL Main Flow</a></li><li><a href="#C-CALL-NEWDATE_Call_Graph.mmd">ğŸ“Š C-CALL-NEWDATE Call Graph</a></li><li><a href="#C-CALL-NEWDATE_Input_Processing.mmd">ğŸ“Š C-CALL-NEWDATE Input Processing</a></li><li><a href="#C-CALL-NEWDATE_Main_Flow.mmd">ğŸ“Š C-CALL-NEWDATE Main Flow</a></li><li><a href="#C-DATE-TEST_Call_Graph.mmd">ğŸ“Š C-DATE-TEST Call Graph</a></li><li><a href="#C-DATE-TEST_Main_Flow.mmd">ğŸ“Š C-DATE-TEST Main Flow</a></li><li><a href="#C-DATE-TEST_Validation_Process.mmd">ğŸ“Š C-DATE-TEST Validation Process</a></li><li><a href="#C-DATER-MAIN_Action_Processing.mmd">ğŸ“Š C-DATER-MAIN Action Processing</a></li><li><a href="#C-DATER-MAIN_Call_Graph.mmd">ğŸ“Š C-DATER-MAIN Call Graph</a></li><li><a href="#C-DATER-MAIN_Flow.mmd">ğŸ“Š C-DATER-MAIN Flow</a></li><li><a href="#C-DATER-MAIN_Main_Flow.mmd">ğŸ“Š C-DATER-MAIN Main Flow</a></li><li><a href="#C-ELAPSED-TIME_Call_Graph.mmd">ğŸ“Š C-ELAPSED-TIME Call Graph</a></li><li><a href="#C-ELAPSED-TIME_Main_Flow.mmd">ğŸ“Š C-ELAPSED-TIME Main Flow</a></li><li><a href="#C-ELAPSED-TIME_Unit_Period_Processing.mmd">ğŸ“Š C-ELAPSED-TIME Unit Period Processing</a></li><li><a href="#C-INCR-DAYS_Call_Graph.mmd">ğŸ“Š C-INCR-DAYS Call Graph</a></li><li><a href="#C-INCR-DAYS_Increment_Loop.mmd">ğŸ“Š C-INCR-DAYS Increment Loop</a></li><li><a href="#C-INCR-DAYS_Main_Flow.mmd">ğŸ“Š C-INCR-DAYS Main Flow</a></li><li><a href="#C-INCR-HALF-MONTHS_Call_Graph.mmd">ğŸ“Š C-INCR-HALF-MONTHS Call Graph</a></li><li><a href="#C-INCR-HALF-MONTHS_Logic.mmd">ğŸ“Š C-INCR-HALF-MONTHS Logic</a></li><li><a href="#C-INCR-HALF-MONTHS_Main_Flow.mmd">ğŸ“Š C-INCR-HALF-MONTHS Main Flow</a></li><li><a href="#C-INCR-MONTHS_Arithmetic_Logic.mmd">ğŸ“Š C-INCR-MONTHS Arithmetic Logic</a></li><li><a href="#C-INCR-MONTHS_Call_Graph.mmd">ğŸ“Š C-INCR-MONTHS Call Graph</a></li><li><a href="#C-INCR-MONTHS_Main_Flow.mmd">ğŸ“Š C-INCR-MONTHS Main Flow</a></li><li><a href="#C-INCREMENT-PERIODS_Call_Graph.mmd">ğŸ“Š C-INCREMENT-PERIODS Call Graph</a></li><li><a href="#C-INCREMENT-PERIODS_Main_Flow.mmd">ğŸ“Š C-INCREMENT-PERIODS Main Flow</a></li><li><a href="#C-INCREMENT-PERIODS_Unit_Types.mmd">ğŸ“Š C-INCREMENT-PERIODS Unit Types</a></li><li><a href="#C-LEAP-YEAR-TEST_Call_Graph.mmd">ğŸ“Š C-LEAP-YEAR-TEST Call Graph</a></li><li><a href="#C-LEAP-YEAR-TEST_Decision_Process.mmd">ğŸ“Š C-LEAP-YEAR-TEST Decision Process</a></li><li><a href="#C-LEAP-YEAR-TEST_Main_Flow.mmd">ğŸ“Š C-LEAP-YEAR-TEST Main Flow</a></li><li><a href="#C-TIM-RESULTS_Call_Graph.mmd">ğŸ“Š C-TIM-RESULTS Call Graph</a></li><li><a href="#C-TIM-RESULTS_Main_Flow.mmd">ğŸ“Š C-TIM-RESULTS Main Flow</a></li><li><a href="#C-TIM360-358_Call_Graph.mmd">ğŸ“Š C-TIM360-358 Call Graph</a></li><li><a href="#C-TIM360-358_February_Logic.mmd">ğŸ“Š C-TIM360-358 February Logic</a></li><li><a href="#C-TIM360-358_Main_Flow.mmd">ğŸ“Š C-TIM360-358 Main Flow</a></li><li><a href="#C-TIM361_Call_Graph.mmd">ğŸ“Š C-TIM361 Call Graph</a></li><li><a href="#C-TIM361_Complex_Logic.mmd">ğŸ“Š C-TIM361 Complex Logic</a></li><li><a href="#C-TIM361_Main_Flow.mmd">ğŸ“Š C-TIM361 Main Flow</a></li><li><a href="#C-TIM362_Call_Graph.mmd">ğŸ“Š C-TIM362 Call Graph</a></li><li><a href="#C-TIM362_Hybrid_Logic.mmd">ğŸ“Š C-TIM362 Hybrid Logic</a></li><li><a href="#C-TIM362_Main_Flow.mmd">ğŸ“Š C-TIM362 Main Flow</a></li><li><a href="#C-TIM365-367_Call_Graph.mmd">ğŸ“Š C-TIM365-367 Call Graph</a></li><li><a href="#C-TIM365-367_Leap_Year_Logic.mmd">ğŸ“Š C-TIM365-367 Leap Year Logic</a></li><li><a href="#C-TIM365-367_Main_Flow.mmd">ğŸ“Š C-TIM365-367 Main Flow</a></li><li><a href="#C-TIM999-998_Call_Graph.mmd">ğŸ“Š C-TIM999-998 Call Graph</a></li><li><a href="#C-TIM999-998_Main_Flow.mmd">ğŸ“Š C-TIM999-998 Main Flow</a></li><li><a href="#C-TIM999-998_Method_Comparison.mmd">ğŸ“Š C-TIM999-998 Method Comparison</a></li><li><a href="#C-TIMALL_Call_Graph.mmd">ğŸ“Š C-TIMALL Call Graph</a></li><li><a href="#C-TIMALL_Main_Flow.mmd">ğŸ“Š C-TIMALL Main Flow</a></li><li><a href="#C-TIMALL_Router.mmd">ğŸ“Š C-TIMALL Router</a></li><li><a href="#C-TIMALL_Year_Type_Processing.mmd">ğŸ“Š C-TIMALL Year Type Processing</a></li><li><a href="#C-TIMBEG-TIMEND_Integration.mmd">ğŸ“Š C-TIMBEG-TIMEND Integration</a></li><li><a href="#C-TIMBEG_Call_Graph.mmd">ğŸ“Š C-TIMBEG Call Graph</a></li><li><a href="#C-TIMBEG_Flow.mmd">ğŸ“Š C-TIMBEG Flow</a></li><li><a href="#C-TIMBEG_Main_Flow.mmd">ğŸ“Š C-TIMBEG Main Flow</a></li><li><a href="#C-TIMEND_Call_Graph.mmd">ğŸ“Š C-TIMEND Call Graph</a></li><li><a href="#C-TIMEND_Flow.mmd">ğŸ“Š C-TIMEND Flow</a></li><li><a href="#C-TIMEND_Main_Flow.mmd">ğŸ“Š C-TIMEND Main Flow</a></li><li><a href="#C-TIMEND_Year_Type_Processing.mmd">ğŸ“Š C-TIMEND Year Type Processing</a></li><li><a href="#CJUL_Call_Graph.mmd">ğŸ“Š CJUL Call Graph</a></li><li><a href="#CJUL_Main_Flow.mmd">ğŸ“Š CJUL Main Flow</a></li><li><a href="#GET-GPENV_Call_Graph.mmd">ğŸ“Š GET-GPENV Call Graph</a></li><li><a href="#GET-GPENV_Data_Population.mmd">ğŸ“Š GET-GPENV Data Population</a></li><li><a href="#GET-GPENV_Environment_Retrieval.mmd">ğŸ“Š GET-GPENV Environment Retrieval</a></li><li><a href="#GET-GPENV_Main_Flow.mmd">ğŸ“Š GET-GPENV Main Flow</a></li><li><a href="#GET-TIME_Call_Graph.mmd">ğŸ“Š GET-TIME Call Graph</a></li><li><a href="#GET-TIME_Main_Flow.mmd">ğŸ“Š GET-TIME Main Flow</a></li><li><a href="#JUL_Call_Graph.mmd">ğŸ“Š JUL Call Graph</a></li><li><a href="#JUL_Main_Flow.mmd">ğŸ“Š JUL Main Flow</a></li><li><a href="#LONPF2_Batch_Timeline.mmd">ğŸ“Š LONPF2 Batch Timeline</a></li><li><a href="#LONPF2_Call_Graph.mmd">ğŸ“Š LONPF2 Call Graph</a></li><li><a href="#LONPF2_Error_Handling.mmd">ğŸ“Š LONPF2 Error Handling</a></li><li><a href="#LONPF2_File_Update_Sequence.mmd">ğŸ“Š LONPF2 File Update Sequence</a></li><li><a href="#LONPF2_Main_Flow.mmd">ğŸ“Š LONPF2 Main Flow</a></li><li><a href="#LONPF2_Transaction_Processing.mmd">ğŸ“Š LONPF2 Transaction Processing</a></li><li><a href="#LONPF7_Balance_Calculation.mmd">ğŸ“Š LONPF7 Balance Calculation</a></li><li><a href="#LONPF7_Batch_Timeline.mmd">ğŸ“Š LONPF7 Batch Timeline</a></li><li><a href="#LONPF7_Error_Handling.mmd">ğŸ“Š LONPF7 Error Handling</a></li><li><a href="#LONPF7_Main_Flow.mmd">ğŸ“Š LONPF7 Main Flow</a></li><li><a href="#LONPF7_Transaction_Processing.mmd">ğŸ“Š LONPF7 Transaction Processing</a></li><li><a href="#LONPF9_Auto_PL_Processing.mmd">ğŸ“Š LONPF9 Auto PL Processing</a></li><li><a href="#LONPF9_Batch_Timeline.mmd">ğŸ“Š LONPF9 Batch Timeline</a></li><li><a href="#LONPF9_Call_Graph.mmd">ğŸ“Š LONPF9 Call Graph</a></li><li><a href="#LONPF9_Error_Handling.mmd">ğŸ“Š LONPF9 Error Handling</a></li><li><a href="#LONPF9_Main_Flow.mmd">ğŸ“Š LONPF9 Main Flow</a></li><li><a href="#LONPF9_Transaction_Processing.mmd">ğŸ“Š LONPF9 Transaction Processing</a></li><li><a href="#LONPFB_Error_Handling.mmd">ğŸ“Š LONPFB Error Handling</a></li><li><a href="#LONPFB_Main_Flow.mmd">ğŸ“Š LONPFB Main Flow</a></li><li><a href="#LONPFB_Rebate_Calculation.mmd">ğŸ“Š LONPFB Rebate Calculation</a></li><li><a href="#LONPFB_Transaction_Processing.mmd">ğŸ“Š LONPFB Transaction Processing</a></li><li><a href="#LONPFC_Batch_Timeline.mmd">ğŸ“Š LONPFC Batch Timeline</a></li><li><a href="#LONPFC_Call_Graph.mmd">ğŸ“Š LONPFC Call Graph</a></li><li><a href="#LONPFC_Deferment_Processing.mmd">ğŸ“Š LONPFC Deferment Processing</a></li><li><a href="#LONPFC_Error_Handling.mmd">ğŸ“Š LONPFC Error Handling</a></li><li><a href="#LONPFC_Late_Charge_Processing.mmd">ğŸ“Š LONPFC Late Charge Processing</a></li><li><a href="#LONPFC_Main_Flow.mmd">ğŸ“Š LONPFC Main Flow</a></li><li><a href="#LONPFC_Payment_Distribution.mmd">ğŸ“Š LONPFC Payment Distribution</a></li><li><a href="#LONPFC_Payment_Processing.mmd">ğŸ“Š LONPFC Payment Processing</a></li><li><a href="#LONPFC_Transaction_Processing.mmd">ğŸ“Š LONPFC Transaction Processing</a></li><li><a href="#MAIN-PROGRAM_Batch_Timeline.mmd">ğŸ“Š MAIN-PROGRAM Batch Timeline</a></li><li><a href="#MAIN-PROGRAM_Call_Graph.mmd">ğŸ“Š MAIN-PROGRAM Call Graph</a></li><li><a href="#MAIN-PROGRAM_Environment_Setup.mmd">ğŸ“Š MAIN-PROGRAM Environment Setup</a></li><li><a href="#MAIN-PROGRAM_Main_Flow.mmd">ğŸ“Š MAIN-PROGRAM Main Flow</a></li><li><a href="#MAIN-PROGRAM_Transaction_Routing.mmd">ğŸ“Š MAIN-PROGRAM Transaction Routing</a></li><li><a href="#MAIN-PROGRAM_Validation_Processing.mmd">ğŸ“Š MAIN-PROGRAM Validation Processing</a></li><li><a href="#TIM360_Call_Graph.mmd">ğŸ“Š TIM360 Call Graph</a></li><li><a href="#TIM360_Main_Flow.mmd">ğŸ“Š TIM360 Main Flow</a></li><li><a href="#TIM365_Call_Graph.mmd">ğŸ“Š TIM365 Call Graph</a></li><li><a href="#TIM365_Main_Flow.mmd">ğŸ“Š TIM365 Main Flow</a></li><li><a href="#TIMALL_Call_Graph.mmd">ğŸ“Š TIMALL Call Graph</a></li><li><a href="#TIMALL_Main_Flow.mmd">ğŸ“Š TIMALL Main Flow</a></li><li><a href="#TIMUPER_Call_Graph.mmd">ğŸ“Š TIMUPER Call Graph</a></li><li><a href="#TIMUPER_Main_Flow.mmd">ğŸ“Š TIMUPER Main Flow</a></li><li><a href="#TIM_Call_Graph.mmd">ğŸ“Š TIM Call Graph</a></li><li><a href="#TIM_Main_Flow.mmd">ğŸ“Š TIM Main Flow</a></li><li><a href="#WEEKDAY_Call_Graph.mmd">ğŸ“Š WEEKDAY Call Graph</a></li><li><a href="#WEEKDAY_Main_Flow.mmd">ğŸ“Š WEEKDAY Main Flow</a></li>
        </ul>
    </div>
    
    
            <div class="diagram-section" id="APIPAY_Complete_Call_Graph.mmd">
                <h2>ğŸ“Š APIPAY Complete Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the apipay complete call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[MAIN-PROGRAM] --> B[INITIALIZATION]
    A --> C[SQL-CONNECT]
    A --> D[GET-GPENV]
    A --> E[Input Processing]
    A --> F[Validation Chain]
    A --> G[PAYMENT-POSTING]
    A --> H[CREATE-LOG]
    A --> I[END-PROGRAM]
    
    B --> B1[Environment Setup]
    B --> B2[File Path Configuration]
    B --> B3[Buffer Initialization]
    
    E --> E1[Parse INPUT-STRING]
    E --> E2[Convert BT-REC]
    E --> E3[Date Conversion]
    
    F --> F1[READ-BR-FILE]
    F --> F2[OPEN-CD1-FILE]
    F --> F3[READ-CD1-FILE]
    F --> F4[Machine Validation]
    F --> F5[Day Open Check]
    
    G --> G1[SETUP-LP-RECORD]
    G --> G2[SETUP-LONPF-BUFFER]
    G --> G3[Transaction Routing]
    G --> G4[Specialized Processing]
    G --> G5[Database Updates]
    
    G3 --> G31{Transaction Type}
    G31 -->|RP| G32[CALL LONPFB]
    G31 -->|PL/P2/P3| G33[CALL LONPF9]
    G31 -->|RE/O2/OT| G34[CALL LONPF7]
    G31 -->|PY/PA| G35[CALL LONPFC]
    G31 -->|RV/BK/BD| G36[CALL LONPF2 Direct]
    
    G32 --> G4
    G33 --> G4
    G34 --> G4
    G35 --> G4
    G36 --> G4
    
    G4 --> G41[Process Results]
    G41 --> G42{Success?}
    G42 -->|No| G43[Error Handling]
    G42 -->|Yes| G5
    
    G5 --> G51[CALL LONPF2]
    G51 --> G52[Database Commit]
    
    H --> H1[Format Log Entry]
    H --> H2[Write LOG-FILE]
    
    I --> I1[CLOSE-FILES]
    I --> I2[Set Return Code]
    I --> I3[EXIT-PROG]
    
    subgraph "File Operations"
        J[File Handling Procedures]
        J --> J1[OPEN-xxx-FILE]
        J --> J2[READ-xxx-FILE]
        J --> J3[CLOSE-xxx-FILE]
        J --> J4[CLEAR-xxx-FILE]
    end
    
    subgraph "Date/Time Processing"
        K[Date Utilities]
        K --> K1[C-TIMALL]
        K --> K2[C-DATER-MAIN]
        K --> K3[CONVERT-MMDDYY-TO-YYYYMMDD]
        K --> K4[Date Validation]
    end
    
    subgraph "Business Logic"
        L[Calculation Procedures]
        L --> L1[Interest Calculations]
        L --> L2[Payment Allocations]
        L --> L3[Balance Updates]
        L --> L4[Rebate Processing]
    end
    
    subgraph "Error Handling"
        M[Error Procedures]
        M --> M1[FILE-IO-ERROR]
        M --> M2[DECLARE-ERROR]
        M --> M3[Error Logging]
        M --> M4[Recovery Procedures]
    end
    
    F1 --> J
    F2 --> J
    F3 --> J
    E3 --> K
    G1 --> L
    G2 --> L
    G43 --> M
    
    classDef mainFlow fill:#e1f3ff
    classDef fileOps fill:#fff3e0
    classDef dateTime fill:#f0f8e8
    classDef business fill:#f8e8f8
    classDef errorHandle fill:#ffe8e8
    
    class A,B,C,D,E,F,G,H,I mainFlow
    class J,J1,J2,J3,J4 fileOps
    class K,K1,K2,K3,K4 dateTime
    class L,L1,L2,L3,L4 business
    class M,M1,M2,M3,M4 errorHandle</div>
                </div>
            </div>
            <div class="diagram-section" id="APIPAY_Database_Updates.mmd">
                <h2>ğŸ“Š APIPAY Database Updates</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the apipay database updates workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Database Update Start] --> B[Prepare Update Buffers]
    B --> C[SETUP-LP-RECORD]
    C --> D[SETUP-LONPF-BUFFER]
    
    D --> E[Specialized Processing Phase]
    E --> F{Transaction Type}
    
    F -->|RP| G[LONPFB Updates]
    F -->|PL/P2/P3| H[LONPF9 Updates]
    F -->|RE/O2/OT| I[LONPF7 Updates]
    F -->|PY/PA| J[LONPFC Updates]
    F -->|RV/BK/BD| K[LONPF2 Direct Updates]
    
    G --> G1[Interest Rebate Calculations]
    G1 --> G2[Balance Adjustments]
    G2 --> G3[Regulatory Compliance Updates]
    
    H --> H1[Principal Payment Processing]
    H1 --> H2[Amortization Schedule Updates]
    H2 --> H3[Payment History Records]
    
    I --> I1[Repossession Status Updates]
    I1 --> I2[Asset Recovery Records]
    I2 --> I3[Legal Status Changes]
    
    J --> J1[Standard Payment Application]
    J1 --> J2[Interest/Principal Allocation]
    J2 --> J3[Payment Date Updates]
    
    K --> K1[Direct Balance Updates]
    K1 --> K2[Transaction Reversal Processing]
    
    G3 --> L[Prepare for Final Update]
    H3 --> L
    I3 --> L
    J3 --> L
    K2 --> L
    
    L --> M[CALL LONPF2 for Final Updates]
    M --> N[LONPF2 Processing]
    
    N --> O[Update Loan Master File]
    O --> P[Update Payment History]
    P --> Q[Create GL Entries]
    Q --> R[Update Balance Files]
    R --> S[Create Audit Records]
    
    S --> T{All Updates Success?}
    T -->|No| U[Rollback Transaction]
    T -->|Yes| V[Commit Updates]
    
    U --> W[Log Rollback]
    W --> X[Return Error Status]
    
    V --> Y[Update Statistics]
    Y --> Z[Create Success Log]
    Z --> AA[Return Success Status]
    
    classDef preparation fill:#e1f3ff
    classDef processing fill:#fff3e0
    classDef database fill:#f0f8e8
    classDef completion fill:#f8e8f8
    classDef error fill:#ffe8e8
    
    class A,B,C,D preparation
    class E,F,G,H,I,J,K,G1,G2,H1,H2,I1,I2,J1,J2,K1,K2 processing
    class L,M,N,O,P,Q,R,S database
    class V,Y,Z,AA completion
    class T,U,W,X error</div>
                </div>
            </div>
            <div class="diagram-section" id="APIPAY_Error_Handling.mmd">
                <h2>ğŸ“Š APIPAY Error Handling</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the apipay error handling workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Error Detected] --> B{Error Source}
    
    B -->|Input Validation| C[Parameter Error]
    B -->|File I/O| D[File System Error]
    B -->|Business Logic| E[Business Rule Violation]
    B -->|System| F[System Error]
    
    C --> C1{Error Type}
    C1 -->|Branch Invalid| C2[Return Code 2]
    C1 -->|RefCode Invalid| C3[Return Code 3]
    C1 -->|Machine Mismatch| C4[Return Code 4]
    C1 -->|Global Missing| C5[Return Code 5]
    C1 -->|Day Not Open| C6[Return Code 6]
    
    D --> D1[File Error Handler]
    D1 --> D2[Log to ERRLOG]
    D2 --> D3{Retry Possible?}
    D3 -->|Yes| D4[Retry Operation]
    D3 -->|No| D5[Escalate Error]
    D4 --> D6{Retry Success?}
    D6 -->|Yes| D7[Continue Processing]
    D6 -->|No| D3
    
    E --> E1{Business Rule Type}
    E1 -->|Payment Rejected| E2[LONPF Error Handling]
    E1 -->|Authorization Missing| E3[Return Code 66]
    E1 -->|Processing Denied| E4[Return Code 67/68]
    E1 -->|Update Rejected| E5[Return Code 69]
    
    F --> F1[System Error Handler]
    F1 --> F2[Log Critical Error]
    F2 --> F3[Emergency Shutdown]
    
    C2 --> G[Create Error Log Entry]
    C3 --> G
    C4 --> G
    C5 --> G
    C6 --> G
    E2 --> G
    E3 --> G
    E4 --> G
    E5 --> G
    D5 --> G
    F3 --> G
    
    G --> H[Format Error Message]
    H --> I[Write to LOG-FILE]
    I --> J[Set Return Status]
    J --> K[Clean Up Resources]
    K --> L[Exit Program]
    
    D7 --> M[Resume Normal Processing]
    
    classDef inputError fill:#ffe6e6
    classDef fileError fill:#fff2e6
    classDef businessError fill:#e6f3ff
    classDef systemError fill:#f0e6ff
    classDef recovery fill:#e6ffe6
    classDef terminal fill:#d4d4d4
    
    class C,C1,C2,C3,C4,C5,C6 inputError
    class D,D1,D2,D3,D4,D5,D6 fileError
    class E,E1,E2,E3,E4,E5 businessError
    class F,F1,F2,F3 systemError
    class D7,M recovery
    class G,H,I,J,K,L terminal</div>
                </div>
            </div>
            <div class="diagram-section" id="APIPAY_Transaction_Processing.mmd">
                <h2>ğŸ“Š APIPAY Transaction Processing</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the apipay transaction processing workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Transaction Start] --> B[Parse Transaction Code]
    B --> C{Transaction Type}
    
    C -->|RP| D[Setup for Rebate Processing]
    C -->|PL/P2/P3| E[Setup for Principal Processing]
    C -->|RE/O2/OT| F[Setup for Repo/Other Processing]
    C -->|PY/PA| G[Setup for Standard Processing]
    C -->|RV/BK/BD| H[Setup for Reversal/Bank Processing]
    
    D --> D1[MOVE 'LP/LONPFB' TO FORM-NAM]
    E --> E1[MOVE 'LP/LONPF9' TO FORM-NAM]
    F --> F1[MOVE 'LP/LONPF7' TO FORM-NAM]
    G --> G1[MOVE 'LP/LONPFC' TO FORM-NAM]
    H --> H1[MOVE 'LP/LONPF2' TO FORM-NAM]
    
    D1 --> I[CALL Specialized Processor]
    E1 --> I
    F1 --> I
    G1 --> I
    H1 --> I
    
    I --> J{Processing Result}
    J -->|Error| K[Check Error Type]
    J -->|Success| L[Call LONPF2 for Updates]
    
    K --> K1{LONPFB Error?}
    K1 -->|Yes| K2[Return Code 67]
    K1 -->|No| K3{General Error?}
    K3 -->|Yes| K4[Return Code 68]
    
    L --> M{Update Success?}
    M -->|Error| N[Return Code 69]
    M -->|Success| O[Log Success]
    
    K2 --> P[Create Error Log]
    K4 --> P
    N --> P
    O --> Q[Return Success Code 0]
    P --> R[Return Error Code]
    
    Q --> S[Transaction Complete]
    R --> S
    
    classDef successPath fill:#d4f4dd
    classDef errorPath fill:#ffd4d4
    classDef processPath fill:#e1f3ff
    
    class O,Q,S successPath
    class K,K2,K4,N,P,R errorPath
    class D1,E1,F1,G1,H1,I,L processPath</div>
                </div>
            </div>
            <div class="diagram-section" id="C-CALL-CJUL_Call_Graph.mmd">
                <h2>ğŸ“Š C-CALL-CJUL Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-call-cjul call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[APIPAY Main Program] --> B[C-CALL-CJUL Module]
    B --> C[Initialize CJUL-INPUT]
    C --> D[Julian Date Processing]
    
    D --> E[Mathematical Conversion]
    E --> F[4-Year Cycle Division]
    F --> G[Year Calculation]
    G --> H[Day-of-Year Processing]
    
    H --> I[Leap Year Logic]
    I --> J[Month Determination]
    J --> K[Day-of-Month Calculation]
    
    K --> L[Date Assembly]
    L --> M[Return to Caller]
    
    subgraph "CJUL Working Storage"
        N[CJWS-JUL-BY4]
        O[CJWS-MOD-JUL]
        P[CJWS-WORK]
        Q[CJWS-MM]
    end
    
    subgraph "DYTOM Array"
        R[Month Boundaries]
        S[Jan=0, Feb=31, Mar=59...]
    end
    
    subgraph "Input/Output"
        T[P-CJUL-JULIAN-DATE Input]
        U[WS-CJUL-OUT-CCYY]
        V[WS-CJUL-OUT-MM]
        W[WS-CJUL-OUT-DD]
    end
    
    B --> N
    B --> O
    B --> P
    B --> Q
    
    J --> R
    J --> S
    
    C --> T
    L --> U
    L --> V
    L --> W
    
    style A fill:#e1f5fe
    style M fill:#c8e6c9
    style B fill:#f3e5f5</div>
                </div>
            </div>
            <div class="diagram-section" id="C-CALL-CJUL_Conversion_Process.mmd">
                <h2>ğŸ“Š C-CALL-CJUL Conversion Process</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-call-cjul conversion process workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Julian Input CJUL-IN] --> B[Scale by 4]
    B --> C[JUL-BY4 = CJUL-IN Ã— 4]
    
    C --> D[Calculate 4-Year Periods]
    D --> E[DIVIDE BY 1461]
    E --> F[Years Count + Remainder]
    
    F --> G[Modulo Adjustment]
    G --> H{Remainder â‰  0?}
    H -->|Yes| I[MOD-JUL = 1]
    H -->|No| J[MOD-JUL = 0]
    
    I --> K[Calculate Calendar Year]
    J --> K
    K --> L[CCYY = Years Ã— 4 Ã· 1461 + MOD]
    
    L --> M[Calculate Adjusted Day]
    M --> N[Day = JULIAN - Year_Base]
    N --> O[Leap Year Detection]
    
    O --> P{Year Ã· 4 = 0?}
    P -->|Yes| Q{Day â‰¥ 60?}
    P -->|No| R[No Leap Adjustment]
    
    Q -->|Yes| S[WORK = 1]
    Q -->|No| R
    
    R --> T[WORK = 0]
    S --> U[Apply Leap Adjustment]
    T --> U
    U --> V[Final Day = Day - WORK]
    
    V --> W[Month Lookup Process]
    W --> X[Use DYTOM Array]
    X --> Y[Scan from December to January]
    
    Y --> Z[Month Boundaries]
    Z --> AA[Jan=0 Feb=31 Mar=59 Apr=90...]
    AA --> BB[Find Correct Month]
    
    BB --> CC[Special February Logic]
    CC --> DD{Day = 59 and Leap Year?}
    DD -->|Yes| EE[February 29]
    DD -->|No| FF[Regular Day Calc]
    
    EE --> GG[Final Assembly]
    FF --> GG
    GG --> HH[Add 1900 to Year]
    HH --> II[Output CCYYMMDD]
    
    style A fill:#e3f2fd
    style II fill:#e8f5e8
    style H fill:#fff8e1
    style P fill:#fff8e1
    style Q fill:#fff8e1
    style DD fill:#fff8e1</div>
                </div>
            </div>
            <div class="diagram-section" id="C-CALL-CJUL_Main_Flow.mmd">
                <h2>ğŸ“Š C-CALL-CJUL Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-call-cjul main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Start C-CALL-CJUL] --> B[Input Processing]
    B --> C[MOVE P-CJUL-JULIAN-DATE TO CJUL-IN]
    C --> D[Scale by 4-Year Cycle]
    D --> E[COMPUTE CJWS-JUL-BY4 = CJUL-IN Ã— 4]
    E --> F[Find 4-Year Periods]
    F --> G[DIVIDE BY 1461 GIVING RESULT REMAINDER MOD]
    G --> H[Adjust Modulo]
    
    H --> I{MOD â‰  0?}
    I -->|Yes| J[MOVE 1 TO CJWS-MOD-JUL]
    I -->|No| K[Keep MOD = 0]
    
    J --> L[Calculate Year]
    K --> L
    L --> M[WS-CJUL-OUT-CCYY = CJUL-IN Ã— 4 Ã· 1461 + MOD]
    M --> N[Calculate Day-of-Year]
    N --> O[WS-CJUL-OUT-DD = JULIAN - Year_Contribution]
    O --> P[Leap Year Check]
    
    P --> Q{Year Ã· 4 = 0 AND Day â‰¥ 60?}
    Q -->|Yes| R[CJWS-WORK = 1 Leap Adjustment]
    Q -->|No| S[CJWS-WORK = 0 No Adjustment]
    
    R --> T[Apply Leap Adjustment]
    S --> T
    T --> U[WS-CJUL-OUT-DD = Day - Leap_Work]
    U --> V[Find Month via DYTOM]
    
    V --> W[MOVE 13 TO CJWS-MM]
    W --> X[Loop Through Months]
    X --> Y{DYTOM[MM] < Day OR MM = 1?}
    Y -->|No| Z[SUBTRACT 1 FROM CJWS-MM]
    Z --> X
    Y -->|Yes| AA[Month Found]
    
    AA --> BB[Special February Handling]
    BB --> CC{Day = 59?}
    CC -->|Yes| DD[ADD CJWS-WORK TO Day]
    CC -->|No| EE[Continue]
    
    DD --> FF[Final Day Calculation]
    EE --> FF
    FF --> GG[SUBTRACT DYTOM[MM] FROM Day]
    GG --> HH[Assemble Output]
    HH --> II[ADD 1900 TO CCYY]
    II --> JJ[MOVE Components to Output]
    JJ --> KK[End C-CALL-CJUL]
    
    style A fill:#e1f5fe
    style KK fill:#c8e6c9
    style I fill:#fff3e0
    style Q fill:#fff3e0
    style Y fill:#fff3e0
    style CC fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="C-CALL-JUL_Calculation_Components.mmd">
                <h2>ğŸ“Š C-CALL-JUL Calculation Components</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-call-jul calculation components workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Julian Calculation Components] --> B[Year Component]
    A --> C[Month Component]
    A --> D[Day Component]
    A --> E[Leap Day Adjustment]
    
    B --> F[YEAR-1900-1 Ã— 1461 Ã· 4]
    F --> G[Days from complete years since 1900]
    
    C --> H[DYTOM Month Lookup]
    H --> I[Jan=0, Feb=31, Mar=59, etc.]
    
    D --> J[Current Day of Month]
    J --> K[Direct day value 1-31]
    
    E --> L{Month > Feb AND Leap Year?}
    L -->|Yes| M[Add 1 extra day]
    L -->|No| N[Add 0 extra days]
    
    O[Final Formula]
    O --> P[Julian = Year + Month + Day + Leap]
    
    Q[DYTOM Table]
    Q --> R[Jan: 0, Feb: 31, Mar: 59]
    Q --> S[Apr: 90, May: 120, Jun: 151]
    Q --> T[Jul: 181, Aug: 212, Sep: 243]
    Q --> U[Oct: 273, Nov: 304, Dec: 334]
    
    style A fill:#e1f5fe
    style O fill:#f3e5f5
    style Q fill:#fff9c4
    style L fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="C-CALL-JUL_Call_Graph.mmd">
                <h2>ğŸ“Š C-CALL-JUL Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-call-jul call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart LR
    A[Calling Programs] --> B[C-CALL-JUL]
    C[C-TIMBEG] --> B
    D[C-DATE-TEST] --> B
    E[C-WEEKDAY] --> B
    F[Date Comparison Routines] --> B
    G[Date Arithmetic Operations] --> B
    
    B --> H[C-LEAP-YEAR-TEST]
    H --> I[Leap Year Determination]
    
    J[Input] --> B
    K[P-DATE-IN CCYYMMDD] --> B
    
    B --> L[Mathematical Operations]
    B --> M[DYTOM Table Lookup]
    
    B --> N[Output]
    N --> O[P-JULIAN-DATE Days since 12/31/1899]
    
    P[Usage Context] --> B
    Q[Date Arithmetic] --> B
    R[Date Comparisons] --> B
    S[Elapsed Time Calculations] --> B
    T[Date Validation] --> B
    
    style B fill:#4fc3f7
    style A fill:#ffb74d
    style C fill:#ffb74d
    style D fill:#ffb74d
    style E fill:#ffb74d
    style F fill:#ffb74d
    style G fill:#ffb74d
    style H fill:#81c784
    style O fill:#c8e6c9</div>
                </div>
            </div>
            <div class="diagram-section" id="C-CALL-JUL_Main_Flow.mmd">
                <h2>ğŸ“Š C-CALL-JUL Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-call-jul main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Start C-CALL-JUL] --> B[Input Preparation]
    B --> C[MOVE P-DATE-IN TO JJUL-IN]
    C --> D[Adjust Year to 1900 Base]
    D --> E[JWS-JUL-IN-CCYY = JJUL-IN-CCYY - 1900]
    E --> F[Leap Year Check]
    F --> G[MOVE JJUL-IN-CCYY TO LEAP-YEAR-CCYY]
    G --> H[PERFORM C-LEAP-YEAR-TEST]
    H --> I[Leap Day Adjustment]
    
    I --> J{Month > 2 AND Leap Year?}
    J -->|Yes| K[JWS-EXTRA-DAY = 1]
    J -->|No| L[JWS-EXTRA-DAY = 0]
    
    K --> M[Julian Calculation]
    L --> M
    
    M --> N[Year Component: YEAR-1 Ã— 1461 Ã· 4]
    N --> O[Month Component: DYTOM MM]
    O --> P[Day Component: DD]
    P --> Q[Add Leap Day Adjustment]
    
    Q --> R[COMPUTE P-JULIAN-DATE]
    R --> S[= Year + Month + Day + Extra]
    S --> T[End C-CALL-JUL]
    
    U[Examples]
    U --> V[20240315 â†’ Julian 45367]
    U --> W[20240229 â†’ Leap day handled]
    U --> X[19000101 â†’ Julian 1]
    
    style A fill:#e1f5fe
    style T fill:#c8e6c9
    style J fill:#fff3e0
    style M fill:#f3e5f5
    style U fill:#e1f5fe</div>
                </div>
            </div>
            <div class="diagram-section" id="C-CALL-NEWDATE_Call_Graph.mmd">
                <h2>ğŸ“Š C-CALL-NEWDATE Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-call-newdate call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[APIPAY Main Program] --> B[C-CALL-NEWDATE Module]
    B --> C[Input Processing]
    C --> D[Format Analysis]
    D --> E[Component Extraction]
    E --> F[Date Validation]
    F --> G[Year Processing]
    G --> H[Output Assembly]
    H --> I[Return to Caller]
    
    subgraph "Input Processing"
        J[Length Analysis]
        K[Separator Detection]
        L[Format Classification]
    end
    
    subgraph "Validation Modules"
        M[Month Validation]
        N[Day Validation]
        O[Year Validation]
        P[Range Checking]
    end
    
    subgraph "Year Processing"
        Q[2-digit to 4-digit]
        R[Century Logic]
        S[Pivot Point Analysis]
    end
    
    subgraph "Working Storage"
        T[NEWDATE-INPUT]
        U[NEWDATE-INPUT-LENGTH]
        V[WS-NEWDATE-WORK-AREA]
        W[Component Variables]
    end
    
    subgraph "Output Structure"
        X[WS-NEWDATE-OUT-CCYY]
        Y[WS-NEWDATE-OUT-MM]
        Z[WS-NEWDATE-OUT-DD]
        AA[Return Code]
    end
    
    C --> J
    C --> K
    C --> L
    
    F --> M
    F --> N
    F --> O
    F --> P
    
    G --> Q
    G --> R
    G --> S
    
    B --> T
    B --> U
    B --> V
    B --> W
    
    H --> X
    H --> Y
    H --> Z
    H --> AA
    
    style A fill:#e1f5fe
    style I fill:#c8e6c9
    style B fill:#f3e5f5</div>
                </div>
            </div>
            <div class="diagram-section" id="C-CALL-NEWDATE_Input_Processing.mmd">
                <h2>ğŸ“Š C-CALL-NEWDATE Input Processing</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-call-newdate input processing workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Input String Analysis] --> B[Length Check]
    B --> C{Length = 0?}
    C -->|Yes| D[Return Empty Error]
    C -->|No| E[Scan Characters]
    
    E --> F[Character Classification]
    F --> G[Identify Patterns]
    G --> H{Pattern Type?}
    
    H -->|MM/DD/YY| I[Slash Separated]
    H -->|MM-DD-YY| J[Dash Separated]
    H -->|MM DD YY| K[Space Separated]
    H -->|MMDDYY| L[Numeric Only 6-digit]
    H -->|MMDDYYYY| M[Numeric Only 8-digit]
    H -->|Other| N[Unknown Format]
    
    I --> O[Split by Slash]
    J --> P[Split by Dash]
    K --> Q[Split by Space]
    L --> R[Extract Positions 1-2, 3-4, 5-6]
    M --> S[Extract Positions 1-2, 3-4, 5-8]
    
    O --> T[Parse MM Component]
    P --> T
    Q --> T
    R --> T
    S --> T
    
    T --> U[Parse DD Component]
    U --> V[Parse YY/YYYY Component]
    V --> W[Component Validation]
    
    W --> X[Numeric Check MM]
    X --> Y{MM is Numeric?}
    Y -->|No| Z[MM Parse Error]
    Y -->|Yes| AA[Range Check MM]
    
    AA --> BB{01 â‰¤ MM â‰¤ 12?}
    BB -->|No| CC[MM Range Error]
    BB -->|Yes| DD[Numeric Check DD]
    
    DD --> EE{DD is Numeric?}
    EE -->|No| FF[DD Parse Error]
    EE -->|Yes| GG[Range Check DD]
    
    GG --> HH{01 â‰¤ DD â‰¤ Days_in_Month?}
    HH -->|No| II[DD Range Error]
    HH -->|Yes| JJ[Numeric Check YY]
    
    JJ --> KK{YY is Numeric?}
    KK -->|No| LL[YY Parse Error]
    KK -->|Yes| MM[Year Processing]
    
    N --> NN[Format Error]
    Z --> OO[Return Parse Error]
    CC --> OO
    FF --> OO
    II --> OO
    LL --> OO
    NN --> OO
    
    MM --> PP[Success - Components Ready]
    
    style A fill:#e3f2fd
    style PP fill:#e8f5e8
    style C fill:#fff8e1
    style H fill:#fff8e1
    style Y fill:#fff8e1
    style BB fill:#fff8e1
    style EE fill:#fff8e1
    style HH fill:#fff8e1
    style KK fill:#fff8e1
    style D fill:#ffebee
    style OO fill:#ffebee</div>
                </div>
            </div>
            <div class="diagram-section" id="C-CALL-NEWDATE_Main_Flow.mmd">
                <h2>ğŸ“Š C-CALL-NEWDATE Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-call-newdate main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Start C-CALL-NEWDATE] --> B[Initialize Variables]
    B --> C[Analyze Input Length]
    C --> D{Input Length > 0?}
    D -->|No| E[Set Error - Empty Input]
    D -->|Yes| F[Scan for Separators]
    
    F --> G[Check Separator Types]
    G --> H{Contains / or - or Space?}
    H -->|Yes| I[Separated Date Format]
    H -->|No| J[Numeric Only Format]
    
    I --> K[Parse with Separators]
    K --> L[Extract MM/DD/YY Components]
    J --> M[Parse Numeric String]
    M --> N[Extract by Position]
    
    L --> O[Validate Components]
    N --> O
    O --> P{Month Valid 01-12?}
    P -->|No| Q[Set Error - Invalid Month]
    P -->|Yes| R{Day Valid for Month?}
    
    R -->|No| S[Set Error - Invalid Day]
    R -->|Yes| T[Process Year]
    T --> U{2-digit or 4-digit Year?}
    U -->|2-digit| V[Apply Century Logic]
    U -->|4-digit| W[Use As-Is]
    
    V --> X[Year Pivot Analysis]
    X --> Y{Year < Pivot Point?}
    Y -->|Yes| Z[Add 2000]
    Y -->|No| AA[Add 1900]
    
    W --> BB[Final Validation]
    Z --> BB
    AA --> BB
    BB --> CC{Year Reasonable?}
    CC -->|No| DD[Set Error - Invalid Year]
    CC -->|Yes| EE[Assemble Output]
    
    EE --> FF[Format CCYYMMDD]
    FF --> GG[Set Success Return Code]
    GG --> HH[End C-CALL-NEWDATE]
    
    E --> II[Set Error Return Code]
    Q --> II
    S --> II
    DD --> II
    II --> HH
    
    style A fill:#e1f5fe
    style HH fill:#c8e6c9
    style D fill:#fff3e0
    style H fill:#fff3e0
    style P fill:#fff3e0
    style R fill:#fff3e0
    style U fill:#fff3e0
    style Y fill:#fff3e0
    style CC fill:#fff3e0
    style E fill:#ffebee
    style Q fill:#ffebee
    style S fill:#ffebee
    style DD fill:#ffebee</div>
                </div>
            </div>
            <div class="diagram-section" id="C-DATE-TEST_Call_Graph.mmd">
                <h2>ğŸ“Š C-DATE-TEST Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-date-test call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart LR
    A[Calling Programs] --> B[C-DATE-TEST]
    C[C-DATER-MAIN] --> B
    D[DATER-ROUTINE] --> B
    E[GET-GPENV] --> B
    F[Transaction Validation] --> B
    
    B --> G[C-CALL-JUL]
    B --> H[C-CALL-CJUL]
    
    G --> I[Date to Julian Conversion]
    H --> J[Julian to Date Conversion]
    
    K[Input] --> B
    L[NUM-DATE CCYYMMDD] --> B
    
    B --> M[Output]
    M --> N[NUM-DATE Original or 0]
    
    style B fill:#4fc3f7
    style A fill:#ffb74d
    style C fill:#ffb74d
    style D fill:#ffb74d
    style E fill:#ffb74d
    style F fill:#ffb74d
    style G fill:#81c784
    style H fill:#81c784</div>
                </div>
            </div>
            <div class="diagram-section" id="C-DATE-TEST_Main_Flow.mmd">
                <h2>ğŸ“Š C-DATE-TEST Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-date-test main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Start C-DATE-TEST] --> B[Copy Input Date]
    B --> C[MOVE NUM-DATE TO WS-NDTE]
    C --> D{Month Valid AND Day Valid?}
    D -->|No| E[Set NUM-DATE = 0]
    D -->|Yes| F[Convert to Julian]
    E --> Z[End C-DATE-TEST]
    
    F --> G[PERFORM C-CALL-JUL]
    G --> H[Store Julian in WS-JUL-WK]
    H --> I[Reset NUM-DATE = 0]
    I --> J[Convert Julian Back to Date]
    J --> K[PERFORM C-CALL-CJUL]
    K --> L[Get Back-Converted Date]
    L --> M{Original = Back-Converted?}
    
    M -->|No| N[Round-Trip Failed]
    M -->|Yes| O[Round-Trip Successful]
    N --> P[Keep NUM-DATE = 0]
    O --> Q[Restore Original Date]
    Q --> R[MOVE WS-NDTE TO NUM-DATE]
    
    P --> Z
    R --> Z
    
    S[Validation Checks]
    S --> T[MM: 01-12]
    S --> U[DD: Valid for Month/Year]
    S --> V[Julian Conversion Success]
    S --> W[Round-Trip Consistency]
    
    style A fill:#e1f5fe
    style Z fill:#c8e6c9
    style D fill:#fff3e0
    style M fill:#fff3e0
    style E fill:#ffebee
    style N fill:#ffebee
    style O fill:#e8f5e8
    style S fill:#e1f5fe</div>
                </div>
            </div>
            <div class="diagram-section" id="C-DATE-TEST_Validation_Process.mmd">
                <h2>ğŸ“Š C-DATE-TEST Validation Process</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-date-test validation process workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Date Validation Process] --> B[Format Validation]
    A --> C[Logical Validation]
    
    B --> D[Month Range Check]
    B --> E[Day Range Check]
    D --> F{MM: 01-12?}
    E --> G{DD Valid for Month?}
    
    F -->|No| H[INVALID: Month Out of Range]
    F -->|Yes| I[Month OK]
    G -->|No| J[INVALID: Day Out of Range]
    G -->|Yes| K[Day OK]
    
    I --> L[Format Validation Complete]
    K --> L
    H --> M[Return 0]
    J --> M
    
    L --> C
    C --> N[Julian Conversion Test]
    N --> O[PERFORM C-CALL-JUL]
    O --> P{Conversion Success?}
    P -->|No| Q[INVALID: Julian Conversion Failed]
    P -->|Yes| R[Round-Trip Test]
    
    R --> S[PERFORM C-CALL-CJUL]
    S --> T{Original = Back-Converted?}
    T -->|No| U[INVALID: Round-Trip Failed]
    T -->|Yes| V[VALID: Return Original Date]
    
    Q --> M
    U --> M
    V --> W[Return Original]
    
    style A fill:#e1f5fe
    style B fill:#fff9c4
    style C fill:#e8f5e8
    style M fill:#ffebee
    style W fill:#c8e6c9
    style F fill:#fff3e0
    style G fill:#fff3e0
    style P fill:#fff3e0
    style T fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="C-DATER-MAIN_Action_Processing.mmd">
                <h2>ğŸ“Š C-DATER-MAIN Action Processing</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-dater-main action processing workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Action Code Input] --> B{Action Code Value}
    
    B -->|E| C[Elapsed Time Processing]
    B -->|N| D[New Date Processing]
    B -->|I| E[Increment Processing]
    B -->|C| F[Julian to Calendar]
    B -->|J| G[Calendar to Julian]
    B -->|W| H[Weekday Processing]
    B -->|D| I[Date Compare Processing]
    B -->|T| J[Date Test Processing]
    
    C --> C1[Calculate time difference between dates]
    C1 --> C2[Set ELAPSED-DAYS, ELAPSED-MONTHS, ELAPSED-REM]
    
    D --> D1[Adjust inconsistent date to valid format]
    D1 --> D2[Normalize day when > month maximum]
    
    E --> E1[Add/subtract periods to date]
    E1 --> E2[Support M/D/Y/S/W/B unit types]
    
    F --> F1[Convert Julian date to YYYYMMDD]
    F1 --> F2[Handle date validation and adjustment]
    
    G --> G1[Convert YYYYMMDD to Julian]
    G1 --> G2[Calculate days since 12/31/1899]
    
    H --> H1[Determine day of week]
    H1 --> H2[Set DAY--OF-WEEK 1-7]
    
    I --> I1[Compare NUM-DATE with SYS-DATE]
    I1 --> I2[Set ELAPSED-RESULTS L/E/G]
    
    J --> J1[Validate date format and values]
    J1 --> J2[Set error flag if invalid]
    
    C2 --> K[Processing Complete]
    D2 --> K
    E2 --> K
    F2 --> K
    G2 --> K
    H2 --> K
    I2 --> K
    J2 --> K
    
    style A fill:#e1f5fe
    style B fill:#fff3e0
    style K fill:#c8e6c9
    style C1 fill:#f8bbd9
    style D1 fill:#f8bbd9
    style E1 fill:#f8bbd9
    style F1 fill:#f8bbd9
    style G1 fill:#f8bbd9
    style H1 fill:#f8bbd9
    style I1 fill:#f8bbd9
    style J1 fill:#f8bbd9</div>
                </div>
            </div>
            <div class="diagram-section" id="C-DATER-MAIN_Call_Graph.mmd">
                <h2>ğŸ“Š C-DATER-MAIN Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-dater-main call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[C-DATER-MAIN] --> B[CONVERT-SYS-NUM-NDTE-DATES-IN]
    A --> C[C-ELAPSED-TIME]
    A --> D[C-CALL-NEWDATE]
    A --> E[C-INCREMENT-PERIODS]
    A --> F[C-CALL-CJUL]
    A --> G[C-CALL-JUL]
    A --> H[C-WEEKDAY]
    A --> I[C-DATE-COMPARE]
    A --> J[C-DATE-TEST]
    A --> K[CONVERT-SYS-NUM-NDTE-DATES-OUT]
    
    C --> C1[C-TIMALL]
    C1 --> C2[C-TIMBEG]
    C1 --> C3[C-TIMEND]
    C1 --> C4[C-TIM-RESULTS]
    
    E --> E1[INCREMENT-COMMON]
    E1 --> E2[INCREMENT-UNITPER]
    E2 --> E3[DATER-ROUTINE]
    
    F --> F1[Date Format Conversion]
    G --> G1[Julian Calculation]
    
    H --> H1[Day Calculation Logic]
    I --> I1[Date Comparison Logic]
    J --> J1[Date Validation Logic]
    
    style A fill:#e1f5fe
    style B fill:#fff9c4
    style K fill:#fff9c4
    style C fill:#f3e5f5
    style D fill:#f3e5f5
    style E fill:#f3e5f5
    style F fill:#f3e5f5
    style G fill:#f3e5f5
    style H fill:#f3e5f5
    style I fill:#f3e5f5
    style J fill:#f3e5f5</div>
                </div>
            </div>
            <div class="diagram-section" id="C-DATER-MAIN_Flow.mmd">
                <h2>ğŸ“Š C-DATER-MAIN Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-dater-main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[C-DATER-MAIN Section] --> B[CONVERT-SYS-NUM-NDTE-DATES-IN]
    B --> C{EVALUATE DATER-ACTION-CODE}
    C -->|"E"| D[Perform C-ELAPSED-TIME]
    C -->|"N"| E[Perform C-CALL-NEWDATE]
    C -->|"I"| F[Perform C-INCREMENT-PERIODS]
    C -->|"C"| G[Perform C-CALL-CJUL]
    C -->|"J"| H[Perform C-CALL-JUL]
    C -->|"W"| I[Perform C-WEEKDAY]
    C -->|"D"| J[Perform C-DATE-COMPARE]
    C -->|"T"| K[Perform C-DATE-TEST]
    
    D --> L[Restore DATER-ACTION-CODE]
    E --> L
    F --> L
    G --> L
    H --> L
    I --> L
    J --> L
    K --> L
    
    L --> M[CONVERT-SYS-NUM-NDTE-DATES-OUT]
    
    subgraph "Operation Categories"
    D --> D1[Time Calculations]
    E --> E1[Date Generation]
    F --> E1
    G --> G1[Format Conversion]
    H --> G1
    I --> I1[Date Analysis]
    J --> I1
    K --> I1
    end</div>
                </div>
            </div>
            <div class="diagram-section" id="C-DATER-MAIN_Main_Flow.mmd">
                <h2>ğŸ“Š C-DATER-MAIN Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-dater-main main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[C-DATER-MAIN Entry] --> B[CONVERT-SYS-NUM-NDTE-DATES-IN]
    B --> C[MOVE DATER-ACTION-CODE TO SV-DATER-ACTION-CODE]
    C --> D{EVALUATE SV-DATER-ACTION-CODE}
    
    D -->|"E"| E[PERFORM C-ELAPSED-TIME]
    D -->|"N"| F[PERFORM C-CALL-NEWDATE]
    D -->|"I"| G[PERFORM C-INCREMENT-PERIODS]
    D -->|"C"| H[Julian to Calendar Conversion]
    D -->|"J"| I[Calendar to Julian Conversion]
    D -->|"W"| J[PERFORM C-WEEKDAY]
    D -->|"D"| K[PERFORM C-DATE-COMPARE]
    D -->|"T"| L[PERFORM C-DATE-TEST]
    
    H --> H1[MOVE JULIAN-DATE TO P-CJUL-JULIAN-DATE]
    H1 --> H2[PERFORM C-CALL-CJUL]
    H2 --> H3[MOVE P-CJUL-DATE-OUT TO NUM-DATE]
    
    I --> I1[MOVE NUM-DATE TO P-DATE-IN]
    I1 --> I2[PERFORM C-CALL-JUL]
    I2 --> I3[MOVE P-JULIAN-DATE TO JULIAN-DATE]
    
    E --> M[MOVE SV-DATER-ACTION-CODE TO DATER-ACTION-CODE]
    F --> M
    G --> M
    H3 --> M
    I3 --> M
    J --> M
    K --> M
    L --> M
    
    M --> N[CONVERT-SYS-NUM-NDTE-DATES-OUT]
    N --> O[Return to Caller]
    
    style A fill:#e1f5fe
    style O fill:#c8e6c9
    style D fill:#fff3e0
    style E fill:#f3e5f5
    style F fill:#f3e5f5
    style G fill:#f3e5f5
    style J fill:#f3e5f5
    style K fill:#f3e5f5
    style L fill:#f3e5f5</div>
                </div>
            </div>
            <div class="diagram-section" id="C-ELAPSED-TIME_Call_Graph.mmd">
                <h2>ğŸ“Š C-ELAPSED-TIME Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-elapsed-time call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[C-ELAPSED-TIME] --> B[Parameter Setup]
    A --> C[Zero Date Check]
    A --> D[Phase 1 Processing]
    A --> E[Phase 2 Processing]
    
    D --> D1[C-TIMALL]
    D --> D2[C-TIM-RESULTS]
    
    E --> E1[C-TIMALL]
    E --> E2[Unit Period Logic]
    
    D1 --> D1A[Year-Specific Routines]
    D1A --> D1B[C-TIM360-358]
    D1A --> D1C[C-TIM365-367]
    D1A --> D1D[C-TIM999-998]
    D1A --> D1E[Other Year Types]
    
    D1B --> D1B1[C-TIMBEG]
    D1B --> D1B2[C-TIMEND]
    D1B --> D1B3[C-LEAP-YEAR-TEST]
    
    D1C --> D1C1[C-TIMBEG]
    D1C --> D1C2[C-TIMEND]
    
    E1 --> E1A[Year-Specific Routines]
    E1A --> E1B[C-TIM998]
    E1A --> E1C[C-TIM360]
    E1A --> E1D[C-TIM365]
    
    D2 --> D2A[Result Processing Logic]
    E2 --> E2A[Unit Calculation Logic]
    
    style A fill:#e1f5fe
    style B fill:#fff9c4
    style C fill:#fff9c4
    style D fill:#f3e5f5
    style E fill:#e8f5e8
    style D1 fill:#f8bbd9
    style D2 fill:#f8bbd9
    style E1 fill:#f8bbd9
    style E2 fill:#f8bbd9</div>
                </div>
            </div>
            <div class="diagram-section" id="C-ELAPSED-TIME_Main_Flow.mmd">
                <h2>ğŸ“Š C-ELAPSED-TIME Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-elapsed-time main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[C-ELAPSED-TIME Entry] --> B[Save Unit Period Parameters]
    B --> B1[MOVE DATER-UNITPER-FREQ TO WS-XUNITPER-FREQ]
    B1 --> B2[MOVE DATER-UNITPER-CD TO WS-XUNITPER-CODE]
    B2 --> C[Set Working Date Fields]
    
    C --> C1[MOVE NUM-DATE TO WS-DATE1, WS-DATE1W]
    C1 --> C2[MOVE SYS-DATE TO WS-DATE2, WS-DATE2W]
    C2 --> D{Check for Zero Dates}
    
    D -->|WS-DATE1 = 0 OR WS-DATE2 = 0| E[Set Safe Default Dates]
    D -->|Valid Dates| F[Phase 1: Standard Calculation]
    
    E --> E1[MOVE 19000101 TO WS-DATE1 WS-DATE2 WS-DATE1W WS-DATE2W]
    E1 --> F
    
    F --> F1[MOVE ELAPSED-YRTYPE TO TA-YRTYPE]
    F1 --> F2[PERFORM C-TIMALL]
    F2 --> F3[PERFORM C-TIM-RESULTS]
    F3 --> F4[Move Results to Output Fields]
    
    F4 --> F5[MOVE WS-TIM-RESULTS TO ELAPSED_RESULTS]
    F5 --> F6[MOVE WS-XMONTHS TO ELAPSED-MONTHS]
    F6 --> F7[MOVE WS-XDAYS TO ELAPSED-DAYS]
    F7 --> F8[MOVE WS-XREM TO ELAPSED-REM]
    
    F8 --> G[Phase 2: Unit Period Calculation]
    G --> G1[MOVE WS-DATE1W TO WS-DATE1]
    G1 --> G2[MOVE WS-DATE2W TO WS-DATE2]
    G2 --> H{Select Year Type by Unit Code}
    
    H -->|"Y" OR "M"| I[MOVE 998 TO TA-YRTYPE]
    H -->|"S"| J[MOVE 360 TO TA-YRTYPE]
    H -->|"D", "W", "B"| K[MOVE 365 TO TA-YRTYPE]
    
    I --> L[PERFORM C-TIMALL]
    J --> L
    K --> L
    
    L --> M[Unit Period Result Processing]
    M --> N[Return to Caller]
    
    style A fill:#e1f5fe
    style D fill:#fff3e0
    style E fill:#ffcdd2
    style F fill:#f3e5f5
    style G fill:#e8f5e8
    style H fill:#fff3e0
    style N fill:#c8e6c9</div>
                </div>
            </div>
            <div class="diagram-section" id="C-ELAPSED-TIME_Unit_Period_Processing.mmd">
                <h2>ğŸ“Š C-ELAPSED-TIME Unit Period Processing</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-elapsed-time unit period processing workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Unit Period Processing] --> B{EVALUATE WS-XUNITPER-CODE}
    
    B -->|"M"| C[Monthly Processing]
    B -->|"Y"| D[Yearly Processing]
    B -->|"S"| E[Semi-monthly Processing]
    B -->|"D"| F[Daily Processing]
    B -->|"W"| G[Weekly Processing]
    B -->|"B"| H[Bi-weekly Processing]
    
    C --> C1[Use 998 Year Type]
    C1 --> C2{Check Frequency}
    C2 -->|FREQ = 1| C3[Standard Monthly Calculation]
    C2 -->|FREQ > 1| C4[Multi-month Period Calculation]
    
    D --> D1[Use 998 Year Type]
    D1 --> D2[Yearly Period Calculation]
    D2 --> D3[Apply Frequency Multiplier]
    
    E --> E1[Use 360 Year Type]
    E1 --> E2[Semi-monthly Calculation]
    E2 --> E3[15-day period processing]
    
    F --> F1[Use 365 Year Type]
    F1 --> F2[Daily Calculation]
    F2 --> F3[Apply Frequency for Multi-day Periods]
    
    G --> G1[Use 365 Year Type]
    G1 --> G2[Weekly Calculation]
    G2 --> G3[7-day period processing]
    
    H --> H1[Use 365 Year Type]
    H1 --> H2[Bi-weekly Calculation]
    H2 --> H3[14-day period processing]
    
    C3 --> I[Calculate Unit Periods]
    C4 --> I
    D3 --> I
    E3 --> I
    F3 --> I
    G3 --> I
    H3 --> I
    
    I --> I1[ELAPSED-UNITPER = Total Periods]
    I1 --> I2[ELAPSED-UNITPER-REM = Remainder]
    I2 --> J[Unit Processing Complete]
    
    style A fill:#e1f5fe
    style B fill:#fff3e0
    style C fill:#f3e5f5
    style D fill:#f3e5f5
    style E fill:#f3e5f5
    style F fill:#f3e5f5
    style G fill:#f3e5f5
    style H fill:#f3e5f5
    style I fill:#fff9c4
    style J fill:#c8e6c9</div>
                </div>
            </div>
            <div class="diagram-section" id="C-INCR-DAYS_Call_Graph.mmd">
                <h2>ğŸ“Š C-INCR-DAYS Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-incr-days call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[APIPAY Main Program] --> B[C-INCR-DAYS Module]
    B --> C[Input Validation]
    C --> D[Direction Processing]
    D --> E[Day Increment Loop]
    E --> F[Boundary Management]
    F --> G[Output Assembly]
    G --> H[Return to Caller]
    
    subgraph "Input Processing"
        I[Date Parsing]
        J[Increment Validation]
        K[Direction Determination]
    end
    
    subgraph "Calendar Logic"
        L[Leap Year Detection]
        M[Days-per-Month Lookup]
        N[Month Boundary Logic]
        O[Year Boundary Logic]
    end
    
    subgraph "Loop Processing"
        P[Forward Day Logic]
        Q[Backward Day Logic]
        R[Remaining Days Counter]
    end
    
    subgraph "Working Storage"
        S[INCR-DAYS-DATE]
        T[INCR-DAYS-INCREMENT]
        U[WS-INCR-DAYS-WORK-AREA]
        V[Current Date Variables]
    end
    
    subgraph "Output Structure"
        W[WS-INCR-DAYS-OUT-CCYY]
        X[WS-INCR-DAYS-OUT-MM]
        Y[WS-INCR-DAYS-OUT-DD]
        Z[Return Code]
    end
    
    subgraph "Calendar Tables"
        AA[DAYS-PER-MONTH-TABLE]
        BB[LEAP-YEAR-LOGIC]
    end
    
    C --> I
    C --> J
    D --> K
    
    F --> L
    F --> M
    F --> N
    F --> O
    
    E --> P
    E --> Q
    E --> R
    
    B --> S
    B --> T
    B --> U
    B --> V
    
    G --> W
    G --> X
    G --> Y
    G --> Z
    
    F --> AA
    F --> BB
    
    style A fill:#e1f5fe
    style H fill:#c8e6c9
    style B fill:#f3e5f5</div>
                </div>
            </div>
            <div class="diagram-section" id="C-INCR-DAYS_Increment_Loop.mmd">
                <h2>ğŸ“Š C-INCR-DAYS Increment Loop</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-incr-days increment loop workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Enter Day Loop] --> B{Remaining Days > 0?}
    B -->|No| C[Exit Loop - Complete]
    B -->|Yes| D{Direction?}
    
    D -->|FORWARD| E[Forward Day Processing]
    D -->|BACKWARD| F[Backward Day Processing]
    
    E --> G[Current Day = Current Day + 1]
    G --> H[Get Days in Current Month]
    H --> I{Is Leap Year and February?}
    I -->|Yes| J[Days = 29]
    I -->|No| K[Days = Standard Month Days]
    
    J --> L{Current Day > Days?}
    K --> L
    L -->|No| M[Continue in Same Month]
    L -->|Yes| N[Month Boundary Crossed]
    
    N --> O[Current Day = 1]
    O --> P[Current Month = Current Month + 1]
    P --> Q{Current Month > 12?}
    Q -->|Yes| R[Year Boundary Crossed]
    Q -->|No| S[Month Updated]
    
    R --> T[Current Year = Current Year + 1]
    T --> U[Current Month = 1]
    U --> S
    
    F --> V[Current Day = Current Day - 1]
    V --> W{Current Day < 1?}
    W -->|No| M
    W -->|Yes| X[Month Boundary Crossed Backward]
    
    X --> Y[Current Month = Current Month - 1]
    Y --> Z{Current Month < 1?}
    Z -->|Yes| AA[Year Boundary Crossed Backward]
    Z -->|No| BB[Get Days in New Month]
    
    AA --> CC[Current Year = Current Year - 1]
    CC --> DD[Current Month = 12]
    DD --> BB
    
    BB --> EE{Is Leap Year and February?}
    EE -->|Yes| FF[Days = 29]
    EE -->|No| GG[Days = Standard Month Days]
    
    FF --> HH[Current Day = Days]
    GG --> HH
    HH --> S
    
    M --> II[Decrement Remaining Days]
    S --> II
    II --> JJ[Remaining = Remaining - 1]
    JJ --> A
    
    style A fill:#e3f2fd
    style C fill:#c8e6c9
    style B fill:#fff8e1
    style D fill:#fff8e1
    style I fill:#fff8e1
    style L fill:#fff8e1
    style Q fill:#fff8e1
    style W fill:#fff8e1
    style Z fill:#fff8e1
    style EE fill:#fff8e1</div>
                </div>
            </div>
            <div class="diagram-section" id="C-INCR-DAYS_Main_Flow.mmd">
                <h2>ğŸ“Š C-INCR-DAYS Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-incr-days main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Start C-INCR-DAYS] --> B[Initialize Variables]
    B --> C[Validate Input Date]
    C --> D{Input Date Valid?}
    D -->|No| E[Set Error - Invalid Date]
    D -->|Yes| F[Parse Input Components]
    
    F --> G[Extract CCYY, MM, DD]
    G --> H[Validate Increment Value]
    H --> I{Increment Valid?}
    I -->|No| J[Set Error - Invalid Increment]
    I -->|Yes| K[Determine Direction]
    
    K --> L{Increment â‰¥ 0?}
    L -->|Yes| M[Forward Processing]
    L -->|No| N[Backward Processing]
    
    M --> O[Set Remaining Days = Increment]
    N --> P[Set Remaining Days = ABS(Increment)]
    N --> Q[Set Direction = BACKWARD]
    
    O --> R[Day Processing Loop]
    P --> R
    Q --> R
    
    R --> S{Remaining Days > 0?}
    S -->|No| T[Processing Complete]
    S -->|Yes| U{Direction = FORWARD?}
    
    U -->|Yes| V[Forward Day Logic]
    U -->|No| W[Backward Day Logic]
    
    V --> X[Add 1 to Current Day]
    X --> Y[Check Month Boundary]
    Y --> Z{Day > Days in Month?}
    Z -->|Yes| AA[Increment Month]
    Z -->|No| BB[Continue Day Loop]
    
    W --> CC[Subtract 1 from Current Day]
    CC --> DD[Check Month Boundary]
    DD --> EE{Day < 1?}
    EE -->|Yes| FF[Decrement Month]
    EE -->|No| BB
    
    AA --> GG[Set Day = 1]
    GG --> HH[Increment Month]
    HH --> II{Month > 12?}
    II -->|Yes| JJ[Increment Year, Set Month = 1]
    II -->|No| KK[Update Days in Month]
    
    FF --> LL[Decrement Month]
    LL --> MM{Month < 1?}
    MM -->|Yes| NN[Decrement Year, Set Month = 12]
    MM -->|No| OO[Get Days in Previous Month]
    OO --> PP[Set Day = Days in Month]
    
    JJ --> KK
    NN --> QQ[Set Day = 31]
    KK --> RR[Check Leap Year if February]
    QQ --> RR
    PP --> RR
    
    RR --> SS[Subtract 1 from Remaining]
    SS --> R
    
    BB --> SS
    
    T --> TT[Assemble Output]
    TT --> UU[Format CCYYMMDD]
    UU --> VV[Set Success Code]
    VV --> WW[End C-INCR-DAYS]
    
    E --> XX[Set Error Code]
    J --> XX
    XX --> WW
    
    style A fill:#e1f5fe
    style WW fill:#c8e6c9
    style D fill:#fff3e0
    style I fill:#fff3e0
    style L fill:#fff3e0
    style S fill:#fff3e0
    style U fill:#fff3e0
    style Z fill:#fff3e0
    style EE fill:#fff3e0
    style II fill:#fff3e0
    style MM fill:#fff3e0
    style E fill:#ffebee
    style J fill:#ffebee</div>
                </div>
            </div>
            <div class="diagram-section" id="C-INCR-HALF-MONTHS_Call_Graph.mmd">
                <h2>ğŸ“Š C-INCR-HALF-MONTHS Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-incr-half-months call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[APIPAY Main Program] --> B[C-INCR-HALF-MONTHS Module]
    B --> C[Input Processing]
    C --> D[Component Separation]
    D --> E[Full Month Processing]
    E --> F[Half-Month Logic]
    F --> G[Output Assembly]
    G --> H[Return to Caller]
    
    subgraph "Division Logic"
        I[Divide by 2]
        J[Extract Full Months]
        K[Extract Half-Month Remainder]
    end
    
    subgraph "Month Processing"
        L[C-INCR-MONTHS Module]
        M[Month Arithmetic]
        N[Date Validation]
        O[Boundary Handling]
    end
    
    subgraph "Half-Month Engine"
        P[Day Boundary Check Day 15]
        Q[Forward Half Logic]
        R[Backward Half Logic]
        S[15-Day Arithmetic]
    end
    
    subgraph "Working Storage"
        T[WS-UP-WORK]
        U[WS-HOLD-DD]
        V[WS-DIV-RESULT]
        W[WS-MOD-2]
        X[Date Components]
    end
    
    subgraph "Output Structure"
        Y[WS-NDTE-CCYY-S]
        Z[WS-NDTE-MM-S]
        AA[WS-NDTE-DD-S]
        BB[Half-Month Position]
    end
    
    subgraph "Constants"
        CC[HALF-MONTH-BOUNDARY = 15]
        DD[HALF-MONTH-DIVISOR = 2]
        EE[DAY-ADJUSTMENT = 15]
    end
    
    D --> I
    D --> J
    D --> K
    
    E --> L
    L --> M
    L --> N
    L --> O
    
    F --> P
    F --> Q
    F --> R
    F --> S
    
    B --> T
    B --> U
    B --> V
    B --> W
    B --> X
    
    G --> Y
    G --> Z
    G --> AA
    G --> BB
    
    F --> CC
    D --> DD
    F --> EE
    
    style A fill:#e1f5fe
    style H fill:#c8e6c9
    style B fill:#f3e5f5
    style L fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="C-INCR-HALF-MONTHS_Logic.mmd">
                <h2>ğŸ“Š C-INCR-HALF-MONTHS Logic</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-incr-half-months logic workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Half-Month Increment Input] --> B[Division Operation]
    B --> C[Increment Ã· 2]
    C --> D[Full Months = Quotient]
    C --> E[Half-Months = Remainder]
    
    D --> F{Full Months â‰  0?}
    F -->|Yes| G[Process via C-INCR-MONTHS]
    F -->|No| H[Skip to Half-Month Logic]
    
    G --> I[Month Boundary Handling]
    I --> J[Year Transitions]
    J --> H
    
    H --> K{Remainder?}
    K -->|+1| L[Forward Half-Month]
    K -->|-1| M[Backward Half-Month]  
    K -->|0| N[Complete - No Half]
    
    L --> O{Current Day > 15?}
    O -->|Yes| P[Second Half â†’ Next Month First Half]
    O -->|No| Q[First Half â†’ Second Half Same Month]
    
    P --> R[New Day = Original Day - 15]
    R --> S[Next Month via C-INCR-MONTHS]
    S --> T[Position in First Half]
    
    Q --> U[New Day = Original Day + 15]
    U --> V[Stay in Current Month]
    V --> W[Position in Second Half]
    
    M --> X{Current Day < 16?}
    X -->|Yes| Y[First Half â†’ Previous Month Second Half]
    X -->|No| Z[Second Half â†’ First Half Same Month]
    
    Y --> AA[Previous Month via C-INCR-MONTHS]
    AA --> BB[New Day = Original Day + 15]
    BB --> CC[Position in Second Half]
    
    Z --> DD[New Day = Original Day - 15]
    DD --> EE[Stay in Current Month]
    EE --> FF[Position in First Half]
    
    T --> GG[Final Result]
    W --> GG
    CC --> GG
    FF --> GG
    N --> GG
    
    subgraph "Half-Month Model"
        HH[First Half: Days 1-15]
        II[Second Half: Days 16-End]
        JJ[Boundary: Day 15/16]
    end
    
    subgraph "Examples"
        KK[Jan 10 + 1 half â†’ Jan 25]
        LL[Jan 25 + 1 half â†’ Feb 10]
        MM[Feb 10 - 1 half â†’ Jan 25]
        NN[Feb 25 - 1 half â†’ Feb 10]
    end
    
    style A fill:#e3f2fd
    style GG fill:#e8f5e8
    style F fill:#fff8e1
    style K fill:#fff8e1
    style O fill:#fff8e1
    style X fill:#fff8e1
    style G fill:#f3e5f5
    style S fill:#f3e5f5
    style AA fill:#f3e5f5</div>
                </div>
            </div>
            <div class="diagram-section" id="C-INCR-HALF-MONTHS_Main_Flow.mmd">
                <h2>ğŸ“Š C-INCR-HALF-MONTHS Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-incr-half-months main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Start C-INCR-HALF-MONTHS] --> B[Save Original Day]
    B --> C[MOVE WS-NDTE-DD-S TO WS-HOLD-DD]
    C --> D[Separate Full/Half Months]
    D --> E[DIVIDE WS-UP-WORK BY 2]
    E --> F[GIVING WS-DIV-RESULT REMAINDER WS-MOD-2]
    
    F --> G[Process Full Months]
    G --> H[MOVE WS-DIV-RESULT TO WS-UP-WORK]
    H --> I{WS-UP-WORK â‰  0?}
    I -->|Yes| J[PERFORM C-INCR-MONTHS]
    I -->|No| K[Skip Full Month Processing]
    
    J --> L[Process Half-Month Remainder]
    K --> L
    L --> M{WS-MOD-2 > 0?}
    
    M -->|Yes| N[Forward Half-Month]
    M -->|No| O{WS-MOD-2 < 0?}
    O -->|Yes| P[Backward Half-Month]
    O -->|No| Q[No Half-Month - Complete]
    
    N --> R{WS-NDTE-DD-S > 15?}
    R -->|Yes| S[Cross to Next Month]
    R -->|No| T[Stay in Current Month]
    
    S --> U[COMPUTE WS-NDTE-DD-S = WS-HOLD-DD - 15]
    U --> V[MOVE 1 TO WS-UP-WORK]
    V --> W[PERFORM C-INCR-MONTHS]
    W --> Q
    
    T --> X[ADD 15 TO WS-NDTE-DD-S]
    X --> Q
    
    P --> Y{WS-NDTE-DD-S < 16?}
    Y -->|Yes| Z[Cross to Previous Month]
    Y -->|No| AA[Stay in Current Month]
    
    Z --> BB[ADD 15 TO WS-NDTE-DD-S]
    BB --> CC[MOVE -1 TO WS-UP-WORK]
    CC --> DD[PERFORM C-INCR-MONTHS]
    DD --> Q
    
    AA --> EE[COMPUTE WS-NDTE-DD-S = WS-HOLD-DD - 15]
    EE --> Q
    
    Q --> FF[End C-INCR-HALF-MONTHS]
    
    style A fill:#e1f5fe
    style FF fill:#c8e6c9
    style I fill:#fff3e0
    style M fill:#fff3e0
    style O fill:#fff3e0
    style R fill:#fff3e0
    style Y fill:#fff3e0
    style J fill:#e8f5e8
    style W fill:#e8f5e8
    style DD fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="C-INCR-MONTHS_Arithmetic_Logic.mmd">
                <h2>ğŸ“Š C-INCR-MONTHS Arithmetic Logic</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-incr-months arithmetic logic workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Month Increment WS-UP-WORK] --> B[Division Operation]
    B --> C[DIVIDE BY 12]
    C --> D[Years Component = DIV-RESULT]
    C --> E[Months Component = MOD-12]
    
    D --> F[Year Calculation]
    E --> G[Month Calculation]
    F --> H[New Year = Current Year + Years]
    G --> I[New Month = Current Month + Months]
    
    H --> J[Boundary Check]
    I --> J
    J --> K{New Month < 1?}
    K -->|Yes| L[Underflow Adjustment]
    K -->|No| M{New Month > 12?}
    
    L --> N[Month = Month + 12]
    N --> O[Year = Year - 1]
    O --> P[Result Assembly]
    
    M -->|Yes| Q[Overflow Adjustment]
    M -->|No| P
    
    Q --> R[Month = Month - 12]
    R --> S[Year = Year + 1]
    S --> P
    
    P --> T[Date Validation]
    T --> U{Day Valid for New Month?}
    U -->|No| V[Day Adjustment Logic]
    U -->|Yes| W[Final Result]
    
    V --> X[C-CALL-NEWDATE Validation]
    X --> Y[Automatic Day Adjustment]
    Y --> Z[Feb 31 â†’ Feb 28/29]
    Z --> AA[Apr 31 â†’ Apr 30]
    AA --> W
    
    W --> BB[Valid Date Output]
    
    subgraph "Examples"
        CC[Jan 31 + 1 month]
        DD[â†’ Feb 28/29]
        EE[Dec 15 + 2 months]
        FF[â†’ Feb 15 next year]
        GG[Mar 31 + 1 month]
        HH[â†’ Apr 30]
    end
    
    style A fill:#e3f2fd
    style BB fill:#e8f5e8
    style K fill:#fff8e1
    style M fill:#fff8e1
    style U fill:#fff8e1
    style L fill:#fff3e0
    style Q fill:#fff3e0
    style V fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="C-INCR-MONTHS_Call_Graph.mmd">
                <h2>ğŸ“Š C-INCR-MONTHS Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-incr-months call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[APIPAY Main Program] --> B[C-INCR-MONTHS Module]
    B --> C[Input Processing]
    C --> D[Month Arithmetic]
    D --> E[Boundary Management]
    E --> F[Date Validation]
    F --> G[Output Assembly]
    G --> H[Return to Caller]
    
    subgraph "Arithmetic Engine"
        I[Division by 12]
        J[Year Component Extraction]
        K[Month Component Extraction]
        L[Addition Operations]
    end
    
    subgraph "Boundary Logic"
        M[Underflow Detection]
        N[Overflow Detection]
        O[Year Adjustment]
        P[Month Normalization]
    end
    
    subgraph "Validation System"
        Q[C-CALL-NEWDATE Module]
        R[Day Adjustment Logic]
        S[Month Length Validation]
        T[Leap Year Handling]
    end
    
    subgraph "Working Storage"
        U[WS-UP-WORK]
        V[WS-DIV-RESULT]
        W[WS-MOD-12]
        X[WS-NDTE-Variables]
    end
    
    subgraph "Output Structure"
        Y[WS-NDTE-CCYY-S]
        Z[WS-NDTE-MM-S]
        AA[WS-NDTE-DD-S]
        BB[Date Validity Flag]
    end
    
    subgraph "Calendar Constants"
        CC[MONTHS-PER-YEAR = 12]
        DD[MONTH-BOUNDARIES]
        EE[DAYS-PER-MONTH]
    end
    
    D --> I
    D --> J
    D --> K
    D --> L
    
    E --> M
    E --> N
    E --> O
    E --> P
    
    F --> Q
    F --> R
    F --> S
    F --> T
    
    B --> U
    B --> V
    B --> W
    B --> X
    
    G --> Y
    G --> Z
    G --> AA
    G --> BB
    
    D --> CC
    E --> DD
    F --> EE
    
    style A fill:#e1f5fe
    style H fill:#c8e6c9
    style B fill:#f3e5f5
    style Q fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="C-INCR-MONTHS_Main_Flow.mmd">
                <h2>ğŸ“Š C-INCR-MONTHS Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-incr-months main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Start C-INCR-MONTHS] --> B[Initialize Variables]
    B --> C[Calculate Year/Month Components]
    C --> D[DIVIDE WS-UP-WORK BY 12]
    D --> E[GIVING WS-DIV-RESULT REMAINDER WS-MOD-12]
    
    E --> F[Apply Month Increment]
    F --> G[ADD WS-MOD-12 TO WS-NDTE-MM-S]
    G --> H[ADD WS-DIV-RESULT TO WS-NDTE-CCYY-S]
    
    H --> I[Check Month Boundaries]
    I --> J{WS-NDTE-MM-S < 1?}
    J -->|Yes| K[Month Underflow]
    J -->|No| L{WS-NDTE-MM-S > 12?}
    
    K --> M[ADD 12 TO WS-NDTE-MM-S]
    M --> N[ADD -1 TO WS-NDTE-CCYY-S]
    N --> O[Prepare for Validation]
    
    L -->|Yes| P[Month Overflow]
    L -->|No| O
    
    P --> Q[ADD -12 TO WS-NDTE-MM-S]
    Q --> R[ADD 1 TO WS-NDTE-CCYY-S]
    R --> O
    
    O --> S[Validate Day Component]
    S --> T{WS-NDTE-DD-S > 99?}
    T -->|Yes| U[MOVE 99 TO NDTE-DD]
    T -->|No| V[MOVE WS-NDTE-DD-S TO NDTE-DD]
    
    U --> W[Prepare NEWDATE Call]
    V --> W
    W --> X[MOVE WS-NDTE-CCYY-S TO NDTE-CCYY]
    X --> Y[MOVE WS-NDTE-MM-S TO NDTE-MM]
    Y --> Z[MOVE "N" TO DATER-ACTION-CODE]
    
    Z --> AA[Call C-CALL-NEWDATE]
    AA --> BB[Validate Date Combination]
    BB --> CC[Adjust Invalid Date Combinations]
    CC --> DD[Update Working Variables]
    
    DD --> EE[MOVE NDTE-CCYY TO WS-NDTE-CCYY-S]
    EE --> FF[MOVE NDTE-MM TO WS-NDTE-MM-S]
    FF --> GG[MOVE NDTE-DD TO WS-NDTE-DD-S]
    
    GG --> HH[End C-INCR-MONTHS]
    
    style A fill:#e1f5fe
    style HH fill:#c8e6c9
    style J fill:#fff3e0
    style L fill:#fff3e0
    style T fill:#fff3e0
    style K fill:#fff8e1
    style P fill:#fff8e1
    style AA fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="C-INCREMENT-PERIODS_Call_Graph.mmd">
                <h2>ğŸ“Š C-INCREMENT-PERIODS Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-increment-periods call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart LR
    A[Calling Programs] --> B[C-INCREMENT-PERIODS]
    C[Payment Scheduling] --> B
    D[Loan Processing] --> B
    E[Interest Calculations] --> B
    F[Report Generation] --> B
    
    B --> G[C-INCR-MONTHS]
    B --> H[C-INCR-HALF-MONTHS]
    B --> I[C-INCR-DAYS]
    B --> J[C-CALL-NEWDATE]
    
    G --> K[Month-based Increments]
    H --> L[Semi-month Processing]
    I --> M[Day-based Increments]
    J --> N[Date Validation & Correction]
    
    O[Input Parameters] --> B
    P[DATER-UNITPER-CD] --> B
    Q[DATER-UNITPER-FREQ] --> B
    R[NDTE-DATE] --> B
    S[NDTE-HOLD] --> B
    
    B --> T[Output]
    T --> U[Validated NDTE-DATE]
    
    style B fill:#4fc3f7
    style A fill:#ffb74d
    style C fill:#ffb74d
    style D fill:#ffb74d
    style E fill:#ffb74d
    style F fill:#ffb74d
    style G fill:#81c784
    style H fill:#81c784
    style I fill:#81c784
    style J fill:#81c784</div>
                </div>
            </div>
            <div class="diagram-section" id="C-INCREMENT-PERIODS_Main_Flow.mmd">
                <h2>ğŸ“Š C-INCREMENT-PERIODS Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-increment-periods main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Start C-INCREMENT-PERIODS] --> B[Save Date Components]
    B --> C[WS-NDTE-MM-S = NDTE-MM]
    C --> D[WS-NDTE-DD-S = NDTE-DD]
    D --> E[WS-NDTE-CCYY-S = NDTE-CCYY]
    E --> F[Calculate Work Value]
    F --> G[WS-UP-WORK = NDTE-HOLD Ã— FREQ]
    G --> H[Evaluate Unit Period Code]
    
    H --> I{DATER-UNITPER-CD}
    I -->|M| J[Months - C-INCR-MONTHS]
    I -->|S| K[Semi-months - C-INCR-HALF-MONTHS]
    I -->|W| L[Weeks - WS-UP-WORK Ã— 7]
    I -->|B| M[Bi-weeks - WS-UP-WORK Ã— 14]
    I -->|D| N[Days - C-INCR-DAYS]
    I -->|Y| O[Years - WS-UP-WORK Ã— 12]
    
    L --> P[C-INCR-DAYS]
    M --> P
    N --> P
    O --> Q[C-INCR-MONTHS]
    J --> Q
    K --> R[C-INCR-HALF-MONTHS]
    
    P --> S[Restore Date Components]
    Q --> S
    R --> S
    
    S --> T[NDTE-MM = WS-NDTE-MM-S]
    T --> U[NDTE-DD = WS-NDTE-DD-S]
    U --> V[NDTE-CCYY = WS-NDTE-CCYY-S]
    V --> W[Date Validation]
    W --> X[DATER-ACTION-CODE = N]
    X --> Y[C-CALL-NEWDATE]
    Y --> Z[End C-INCREMENT-PERIODS]
    
    style A fill:#e1f5fe
    style Z fill:#c8e6c9
    style I fill:#fff3e0
    style H fill:#f3e5f5
    style J fill:#e8f5e8
    style K fill:#fff9c4
    style L fill:#ffeb3b
    style M fill:#ff9800
    style N fill:#2196f3
    style O fill:#9c27b0</div>
                </div>
            </div>
            <div class="diagram-section" id="C-INCREMENT-PERIODS_Unit_Types.mmd">
                <h2>ğŸ“Š C-INCREMENT-PERIODS Unit Types</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-increment-periods unit types workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Unit Period Types] --> B[Direct Units]
    A --> C[Converted Units]
    
    B --> D[M - Months 1:1]
    B --> E[S - Semi-months 1:1]
    B --> F[D - Days 1:1]
    
    C --> G[W - Weeks Ã— 7 days]
    C --> H[B - Bi-weeks Ã— 14 days]
    C --> I[Y - Years Ã— 12 months]
    
    D --> J[C-INCR-MONTHS]
    E --> K[C-INCR-HALF-MONTHS]
    F --> L[C-INCR-DAYS]
    
    G --> M[Convert to Days]
    H --> N[Convert to Days]
    I --> O[Convert to Months]
    
    M --> L
    N --> L
    O --> J
    
    P[Examples]
    P --> Q[M: Monthly payments]
    P --> R[S: Bi-weekly payroll]
    P --> S[W: Weekly reports]
    P --> T[B: Bi-weekly schedules]
    P --> U[D: Daily interest]
    P --> V[Y: Annual renewals]
    
    style A fill:#e1f5fe
    style B fill:#e8f5e8
    style C fill:#fff9c4
    style J fill:#81c784
    style K fill:#81c784
    style L fill:#81c784
    style P fill:#f3e5f5</div>
                </div>
            </div>
            <div class="diagram-section" id="C-LEAP-YEAR-TEST_Call_Graph.mmd">
                <h2>ğŸ“Š C-LEAP-YEAR-TEST Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-leap-year-test call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart LR
    A[Calling Programs] --> B[C-LEAP-YEAR-TEST]
    C[C-CALL-JUL] --> B
    D[C-CALL-NEWDATE] --> B
    E[C-TIM360-358] --> B
    F[C-TIM361] --> B
    G[C-TIM362] --> B
    H[C-TIM365-367] --> B
    
    I[Input] --> B
    J[LEAP-YEAR-CCYY] --> B
    
    B --> K[Mathematical Operations Only]
    B --> L[No External Calls]
    
    B --> M[Output]
    M --> N[LEAP-YEAR-FG T or F]
    
    O[Usage Context] --> B
    P[Julian Date Conversion] --> B
    Q[February Validation] --> B
    R[Calendar Calculations] --> B
    S[Year Type Processing] --> B
    
    style B fill:#4fc3f7
    style A fill:#ffb74d
    style C fill:#ffb74d
    style D fill:#ffb74d
    style E fill:#ffb74d
    style F fill:#ffb74d
    style G fill:#ffb74d
    style H fill:#ffb74d
    style K fill:#81c784
    style L fill:#81c784
    style N fill:#c8e6c9</div>
                </div>
            </div>
            <div class="diagram-section" id="C-LEAP-YEAR-TEST_Decision_Process.mmd">
                <h2>ğŸ“Š C-LEAP-YEAR-TEST Decision Process</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-leap-year-test decision process workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Leap Year Decision Process] --> B[Step 1: Divisible by 4?]
    
    B -->|No| C[NOT Leap Year]
    B -->|Yes| D[Step 2: Divisible by 100?]
    
    D -->|No| E[IS Leap Year]
    D -->|Yes| F[Step 3: Divisible by 400?]
    
    F -->|No| G[NOT Leap Year - Century Rule]
    F -->|Yes| H[IS Leap Year - Century Exception]
    
    I[Rule Examples]
    I --> J[Rule 1: 2021, 2022, 2023 â†’ Not Leap]
    I --> K[Rule 2: 2020, 2024, 2028 â†’ Leap Year]
    I --> L[Rule 3: 1900, 2100, 2200 â†’ Not Leap]
    I --> M[Rule 4: 2000, 2400, 2800 â†’ Leap Year]
    
    N[Result Flags]
    C --> O[LEAP-YEAR-FG = F]
    E --> P[LEAP-YEAR-FG = T]
    G --> Q[LEAP-YEAR-FG = F]
    H --> R[LEAP-YEAR-FG = T]
    
    style A fill:#e1f5fe
    style B fill:#fff3e0
    style D fill:#fff3e0
    style F fill:#fff3e0
    style C fill:#ffebee
    style E fill:#c8e6c9
    style G fill:#ffebee
    style H fill:#c8e6c9
    style I fill:#e1f5fe
    style N fill:#f3e5f5</div>
                </div>
            </div>
            <div class="diagram-section" id="C-LEAP-YEAR-TEST_Main_Flow.mmd">
                <h2>ğŸ“Š C-LEAP-YEAR-TEST Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-leap-year-test main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Start C-LEAP-YEAR-TEST] --> B[Initialize Flag to False]
    B --> C[MOVE F TO LEAP-YEAR-FG]
    C --> D[Test Divisible by 4]
    D --> E[DIVIDE BY 4, CHECK REMAINDER]
    E --> F{Remainder = 0?}
    
    F -->|No| G[Set Flag = F]
    F -->|Yes| H[Test Divisible by 100]
    
    H --> I[DIVIDE BY 100, CHECK REMAINDER]
    I --> J{Remainder = 0?}
    
    J -->|No| K[Set Flag = T]
    J -->|Yes| L[Test Divisible by 400]
    
    L --> M[DIVIDE BY 400, CHECK REMAINDER]
    M --> N{Remainder = 0?}
    
    N -->|No| O[Set Flag = F]
    N -->|Yes| P[Set Flag = T]
    
    G --> Q[End - Not Leap Year]
    K --> R[End - IS Leap Year]
    O --> S[End - Not Leap Year Century]
    P --> T[End - IS Leap Year Century]
    
    U[Examples]
    U --> V[2023 â†’ F Not div by 4]
    U --> W[2024 â†’ T Div by 4, not 100]
    U --> X[1900 â†’ F Div by 100, not 400]
    U --> Y[2000 â†’ T Div by 400]
    
    style A fill:#e1f5fe
    style Q fill:#ffebee
    style R fill:#c8e6c9
    style S fill:#ffebee
    style T fill:#c8e6c9
    style F fill:#fff3e0
    style J fill:#fff3e0
    style N fill:#fff3e0
    style U fill:#e1f5fe</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIM-RESULTS_Call_Graph.mmd">
                <h2>ğŸ“Š C-TIM-RESULTS Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-tim-results call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart LR
    A[Calling Programs] --> B[C-TIM-RESULTS]
    C[C-DATE-COMPARE] --> B
    D[ELAPSED-RESULTS Processing] --> B
    E[Payment Date Validation] --> B
    F[Date Sorting Routines] --> B
    G[Transaction Processing] --> B
    
    B --> H[WS-TIM-RESULTS Output]
    B --> I[No External Calls]
    
    H --> J[L - Less Than]
    H --> K[E - Equal]
    H --> L[G - Greater Than]
    
    M[Input Sources] --> B
    N[WS-JUL-1 - First Julian Date] --> B
    O[WS-JUL-2 - Second Julian Date] --> B
    
    style B fill:#4fc3f7
    style A fill:#ffb74d
    style C fill:#ffb74d
    style D fill:#ffb74d
    style E fill:#ffb74d
    style F fill:#ffb74d
    style G fill:#ffb74d
    style I fill:#81c784
    style J fill:#ffebee
    style K fill:#e8f5e8
    style L fill:#fff9c4</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIM-RESULTS_Main_Flow.mmd">
                <h2>ğŸ“Š C-TIM-RESULTS Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-tim-results main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Start C-TIM-RESULTS] --> B[Set Default Result]
    B --> C[MOVE L TO WS-TIM-RESULTS]
    C --> D{WS-JUL-2 > WS-JUL-1?}
    D -->|Yes| E[Second Date is Later]
    D -->|No| F{WS-JUL-2 = WS-JUL-1?}
    E --> G[MOVE G TO WS-TIM-RESULTS]
    F -->|Yes| H[Dates are Equal]
    F -->|No| I[Keep Default L]
    H --> J[MOVE E TO WS-TIM-RESULTS]
    G --> K[End C-TIM-RESULTS]
    J --> K
    I --> K
    
    L[Result Meanings]
    L --> M[L = Less Than, DATE2 < DATE1]
    L --> N[E = Equal, DATE2 = DATE1]
    L --> O[G = Greater Than, DATE2 > DATE1]
    
    style A fill:#e1f5fe
    style K fill:#c8e6c9
    style D fill:#fff3e0
    style F fill:#fff3e0
    style E fill:#fff9c4
    style H fill:#e8f5e8
    style I fill:#f3e5f5
    style L fill:#e1f5fe
    style M fill:#ffebee
    style N fill:#e8f5e8
    style O fill:#fff9c4</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIM360-358_Call_Graph.mmd">
                <h2>ğŸ“Š C-TIM360-358 Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-tim360-358 call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[APIPAY Main Program] --> B[C-TIM360-358 Module]
    B --> C[Date Standardization]
    C --> D[February Processing]
    D --> E[358-Day Adjustments]
    E --> F[Final Calculation]
    F --> G[Return to Caller]
    
    subgraph "Called Modules"
        H[C-TIMBEG]
        I[C-LEAP-YEAR-TEST]
        J[C-TIMEND]
    end
    
    subgraph "Processing Components"
        K[Day Capping Logic]
        L[Forward February Logic]
        M[Backward February Logic]
        N[358 Special Processing]
        O[Day Count Calculation]
    end
    
    subgraph "Working Storage"
        P[WS-DATE1-CCYY/MM/DD]
        Q[WS-DATE2-CCYY/MM/DD]
        R[TA-YRTYPE]
        S[LEAP-YEAR-CCYY]
        T[WS-XDAYS]
    end
    
    subgraph "Output Structure"
        U[WS-XDAYS Result]
        V[ELAPSED-MONTHS]
        W[ELAPSED-DAYS]
        X[ELAPSED-REM]
    end
    
    subgraph "Calculation Constants"
        Y[DAYS-PER-MONTH = 30]
        Z[DAYS-PER-YEAR = 360]
        AA[YEAR-TYPE-358 = Special]
    end
    
    B --> H
    D --> I
    F --> J
    
    C --> K
    D --> L
    D --> M
    E --> N
    F --> O
    
    B --> P
    B --> Q
    B --> R
    D --> S
    F --> T
    
    G --> U
    J --> V
    J --> W
    J --> X
    
    F --> Y
    F --> Z
    E --> AA
    
    style A fill:#e1f5fe
    style G fill:#c8e6c9
    style B fill:#f3e5f5
    style H fill:#e8f5e8
    style I fill:#e8f5e8
    style J fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIM360-358_February_Logic.mmd">
                <h2>ğŸ“Š C-TIM360-358 February Logic</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-tim360-358 february logic workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[February Processing Start] --> B[Check Date2 February Forward]
    B --> C{DATE2-MM = 2 AND DATE2-DD > DATE1-DD?}
    C -->|Yes| D[Forward February Adjustment]
    C -->|No| E[Check Date2 February Backward]
    
    D --> F[Check Leap Year Status]
    F --> G{DATE2-DD = 29?}
    G -->|Yes| H{LEAP-YEAR-TRUE?}
    G -->|No| I{DATE2-DD = 28?}
    
    H -->|Yes| J[Feb 29 in Leap Year]
    H -->|No| K[Feb 29 in Non-Leap Error]
    I -->|Yes| L{LEAP-YEAR-FALSE?}
    I -->|No| M[Other February Day]
    
    J --> N[MOVE 30 TO WS-DATE2-DD]
    L -->|Yes| O[Feb 28 in Non-Leap Year]
    L -->|No| M
    
    O --> N
    N --> P[Forward Adjustment Complete]
    
    E --> Q{DATE2-MM = 2 AND DATE2-DD < DATE1-DD?}
    Q -->|Yes| R[Backward February Adjustment]
    Q -->|No| S[No February Adjustment Needed]
    
    R --> T{DATE2-DD = 29?}
    T -->|Yes| U{LEAP-YEAR-TRUE?}
    T -->|No| V{DATE2-DD = 28?}
    
    U -->|Yes| W[MOVE 29 TO WS-DATE1-DD]
    U -->|No| X[Invalid Feb 29 in Non-Leap]
    V -->|Yes| Y{LEAP-YEAR-FALSE?}
    V -->|No| Z[Other February Day]
    
    Y -->|Yes| AA[MOVE 28 TO WS-DATE1-DD]
    Y -->|No| Z
    
    W --> BB[Backward Adjustment Complete]
    AA --> BB
    
    P --> CC[358-Day Type Check]
    BB --> CC
    S --> CC
    M --> CC
    Z --> CC
    
    CC --> DD{TA-YRTYPE = 358?}
    DD -->|Yes| EE[358 Special February Processing]
    DD -->|No| FF[February Processing Complete]
    
    EE --> GG{DATE1-MM = 2 AND DATE1-DD > DATE2-DD?}
    GG -->|Yes| HH[358 February Adjustment]
    GG -->|No| FF
    
    HH --> II{LEAP-YEAR-FALSE for DATE1?}
    II -->|Yes| JJ[ADD 2 TO WS-DATE1-DD]
    II -->|No| KK[ADD 1 TO WS-DATE1-DD]
    
    JJ --> LL[358 February Complete]
    KK --> LL
    LL --> FF
    
    subgraph "February Rules"
        MM[Feb 28 non-leap â†’ Day 30]
        NN[Feb 29 leap â†’ Day 30]
        OO[Backward: Adjust DATE1]
        PP[Forward: Adjust DATE2]
        QQ[358: Extra adjustment]
    end
    
    style A fill:#e3f2fd
    style FF fill:#e8f5e8
    style C fill:#fff8e1
    style G fill:#fff8e1
    style H fill:#fff8e1
    style I fill:#fff8e1
    style L fill:#fff8e1
    style Q fill:#fff8e1
    style T fill:#fff8e1
    style U fill:#fff8e1
    style V fill:#fff8e1
    style Y fill:#fff8e1
    style DD fill:#fff8e1
    style GG fill:#fff8e1
    style II fill:#fff8e1</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIM360-358_Main_Flow.mmd">
                <h2>ğŸ“Š C-TIM360-358 Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-tim360-358 main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Start C-TIM360-358] --> B[PERFORM C-TIMBEG]
    B --> C[Initialize Working Variables]
    C --> D[Day Standardization]
    
    D --> E{WS-DATE1-DD > 30?}
    E -->|Yes| F[MOVE 30 TO WS-DATE1-DD]
    E -->|No| G[Keep Original Day]
    
    F --> H{WS-DATE2-DD > 30?}
    G --> H
    H -->|Yes| I[MOVE 30 TO WS-DATE2-DD]
    H -->|No| J[February Processing]
    
    I --> J
    J --> K[MOVE WS-DATE2-CCYY TO LEAP-YEAR-CCYY]
    K --> L[PERFORM C-LEAP-YEAR-TEST]
    L --> M[Forward February Logic]
    
    M --> N{DATE2-MM = 2 AND DATE2-DD > DATE1-DD?}
    N -->|Yes| O{DATE2-DD = 29 AND LEAP-YEAR-TRUE?}
    N -->|No| P[Backward February Logic]
    
    O -->|Yes| Q[MOVE 30 TO WS-DATE2-DD]
    O -->|No| R{DATE2-DD = 28 AND LEAP-YEAR-FALSE?}
    
    R -->|Yes| Q
    R -->|No| S[Continue Processing]
    
    P --> T{DATE2-MM = 2 AND DATE2-DD < DATE1-DD?}
    T -->|Yes| U{DATE2-DD = 29 AND LEAP-YEAR-TRUE?}
    T -->|No| V[358-Day Processing]
    
    U -->|Yes| W[MOVE 29 TO WS-DATE1-DD]
    U -->|No| X{DATE2-DD = 28 AND LEAP-YEAR-FALSE?}
    
    X -->|Yes| Y[MOVE 28 TO WS-DATE1-DD]
    X -->|No| V
    
    Q --> V
    S --> V
    W --> V
    Y --> V
    
    V --> Z{TA-YRTYPE = 358?}
    Z -->|Yes| AA[358 Special Processing]
    Z -->|No| BB[Final Calculation]
    
    AA --> CC[MOVE WS-DATE1-CCYY TO LEAP-YEAR-CCYY]
    CC --> DD[PERFORM C-LEAP-YEAR-TEST]
    DD --> EE{DATE1-MM = 2 AND DATE1-DD > DATE2-DD?}
    
    EE -->|Yes| FF{LEAP-YEAR-FALSE?}
    EE -->|No| BB
    
    FF -->|Yes| GG[ADD 2 TO WS-DATE1-DD]
    FF -->|No| HH[ADD 1 TO WS-DATE1-DD]
    
    GG --> BB
    HH --> BB
    
    BB --> II[COMPUTE WS-XDAYS]
    II --> JJ[Years Component: DATE2-CCYY - DATE1-CCYY Ã— 360]
    JJ --> KK[Months Component: DATE2-MM - DATE1-MM Ã— 30]
    KK --> LL[Days Component: DATE2-DD - DATE1-DD]
    LL --> MM[Sum All Components]
    
    MM --> NN[PERFORM C-TIMEND]
    NN --> OO[End C-TIM360-358]
    
    style A fill:#e1f5fe
    style OO fill:#c8e6c9
    style E fill:#fff3e0
    style H fill:#fff3e0
    style N fill:#fff3e0
    style O fill:#fff3e0
    style R fill:#fff3e0
    style T fill:#fff3e0
    style U fill:#fff3e0
    style X fill:#fff3e0
    style Z fill:#fff3e0
    style EE fill:#fff3e0
    style FF fill:#fff3e0
    style B fill:#e8f5e8
    style L fill:#e8f5e8
    style DD fill:#e8f5e8
    style NN fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIM361_Call_Graph.mmd">
                <h2>ğŸ“Š C-TIM361 Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-tim361 call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[APIPAY Main Program] --> B[C-TIM361 Module]
    B --> C[Date Standardization]
    C --> D[Forward February Processing]
    D --> E[Backward February Processing]
    E --> F[Complex February Logic]
    F --> G[Final Calculation]
    G --> H[Return to Caller]
    
    subgraph "Called Modules"
        I[C-TIMBEG]
        J[C-LEAP-YEAR-TEST Multiple Calls]
        K[C-TIMEND]
    end
    
    subgraph "Processing Phases"
        L[Day Capping Logic]
        M[Forward February Logic]
        N[Backward February Logic]
        O[Complex Conditional Logic]
        P[February 28 Special Processing]
        Q[Day Count Calculation]
    end
    
    subgraph "Working Storage"
        R[WS-DATE1-CCYY/MM/DD]
        S[WS-DATE2-CCYY/MM/DD]
        T[LEAP-YEAR-CCYY Multiple Uses]
        U[WS-XDAYS Result]
    end
    
    subgraph "Output Structure"
        V[WS-XDAYS Result]
        W[ELAPSED-MONTHS]
        X[ELAPSED-DAYS]
        Y[ELAPSED-REM]
    end
    
    subgraph "Special Logic Constants"
        Z[DAYS-PER-MONTH = 30]
        AA[DAYS-PER-YEAR = 360]
        BB[FEBRUARY-MONTH = 2]
        CC[FEBRUARY-28-THRESHOLD = 28]
        DD[LEAP-YEAR-ADJUSTMENT = 1]
        EE[NON-LEAP-ADJUSTMENT = 2]
    end
    
    B --> I
    D --> J
    E --> J
    F --> J
    G --> K
    
    C --> L
    D --> M
    E --> N
    F --> O
    F --> P
    G --> Q
    
    B --> R
    B --> S
    D --> T
    E --> T
    F --> T
    G --> U
    
    H --> V
    K --> W
    K --> X
    K --> Y
    
    G --> Z
    G --> AA
    F --> BB
    F --> CC
    F --> DD
    F --> EE
    
    style A fill:#e1f5fe
    style H fill:#c8e6c9
    style B fill:#f3e5f5
    style I fill:#e8f5e8
    style J fill:#e8f5e8
    style K fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIM361_Complex_Logic.mmd">
                <h2>ğŸ“Š C-TIM361 Complex Logic</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-tim361 complex logic workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Complex February Logic Entry] --> B[Evaluate Multiple Conditions]
    B --> C[Condition 1: Month Check]
    C --> D{WS-DATE1-MM NOT = 2?}
    D -->|Yes| E[Skip Special Processing - Not February]
    D -->|No| F[Condition 2: Day Range Check]
    
    F --> G[Sub-condition 2A]
    G --> H{WS-DATE1-DD < 28?}
    H -->|Yes| I{WS-DATE1-DD NOT > WS-DATE2-DD?}
    H -->|No| J[Condition 2B: Date Equality]
    
    I -->|Yes| E
    I -->|No| J
    
    J --> K[Sub-condition 2B Components]
    K --> L{WS-DATE1-DD = WS-DATE2-DD?}
    L -->|Yes| M{WS-DATE1-MM = WS-DATE2-MM?}
    L -->|No| N[Condition Failed]
    
    M -->|Yes| O{WS-DATE1-CCYY = WS-DATE2-CCYY?}
    M -->|No| N
    
    O -->|Yes| P[Same Date - Skip Special Processing]
    O -->|No| N
    
    N --> Q[Complex Condition Met]
    Q --> R[Apply February 28 Special Logic]
    R --> S[Check DATE1 Leap Year]
    S --> T[MOVE WS-DATE1-CCYY TO LEAP-YEAR-CCYY]
    T --> U[PERFORM C-LEAP-YEAR-TEST]
    
    U --> V{LEAP-YEAR-FALSE?}
    V -->|Yes| W[Non-Leap Year Adjustment]
    V -->|No| X[Leap Year Adjustment]
    
    W --> Y[ADD 2 TO WS-DATE1-DD]
    W --> Z[Feb 28 â†’ Feb 30]
    X --> AA[ADD 1 TO WS-DATE1-DD]
    X --> BB[Feb 29 â†’ Feb 30]
    
    Y --> CC[Special Processing Complete]
    AA --> CC
    E --> DD[No Special Processing]
    P --> DD
    
    CC --> EE[Continue to Final Calculation]
    DD --> EE
    
    subgraph "Condition Logic Breakdown"
        FF[NOT Condition A OR Condition B OR Condition C]
        GG[A: Month â‰  February]
        HH[B: Day < 28 AND Day â‰¤ End Day]
        II[C: Exact Same Date]
        JJ[If ALL are false â†’ Apply Special Logic]
    end
    
    subgraph "February 28 Rules"
        KK[Feb 28 non-leap + 2 days â†’ Feb 30]
        LL[Feb 29 leap + 1 day â†’ Feb 30]
        MM[Cross-month spans only]
        NN[Same date spans excluded]
    end
    
    style A fill:#e3f2fd
    style EE fill:#e8f5e8
    style D fill:#fff8e1
    style H fill:#fff8e1
    style I fill:#fff8e1
    style L fill:#fff8e1
    style M fill:#fff8e1
    style O fill:#fff8e1
    style V fill:#fff8e1
    style Q fill:#fff3e0
    style R fill:#fff3e0
    style U fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIM361_Main_Flow.mmd">
                <h2>ğŸ“Š C-TIM361 Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-tim361 main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Start C-TIM361] --> B[PERFORM C-TIMBEG]
    B --> C[Initialize Working Variables]
    C --> D[Day Standardization]
    
    D --> E{WS-DATE1-DD > 30?}
    E -->|Yes| F[MOVE 30 TO WS-DATE1-DD]
    E -->|No| G{WS-DATE2-DD > 30?}
    
    F --> G
    G -->|Yes| H[MOVE 30 TO WS-DATE2-DD]
    G -->|No| I[Forward February Processing]
    
    H --> I
    I --> J{DATE2-MM = 2 AND DATE2-DD > DATE1-DD?}
    J -->|Yes| K[Check DATE2 Leap Year]
    J -->|No| L[Backward February Processing]
    
    K --> M[MOVE WS-DATE2-CCYY TO LEAP-YEAR-CCYY]
    M --> N[PERFORM C-LEAP-YEAR-TEST]
    N --> O{LEAP-YEAR-TRUE AND DATE2-DD = 29?}
    
    O -->|Yes| P[MOVE 30 TO WS-DATE2-DD]
    O -->|No| Q{LEAP-YEAR-FALSE AND DATE2-DD = 28?}
    
    Q -->|Yes| P
    Q -->|No| L
    
    P --> L
    L --> R{DATE2-MM = 2 AND DATE2-DD < DATE1-DD?}
    R -->|Yes| S[Check DATE2 Leap Year for Backward]
    R -->|No| T[Complex February Logic]
    
    S --> U[MOVE WS-DATE2-CCYY TO LEAP-YEAR-CCYY]
    U --> V[PERFORM C-LEAP-YEAR-TEST]
    V --> W{LEAP-YEAR-TRUE AND DATE2-DD = 29?}
    
    W -->|Yes| X[MOVE 29 TO WS-DATE1-DD]
    W -->|No| Y{LEAP-YEAR-FALSE AND DATE2-DD = 28?}
    
    Y -->|Yes| Z[MOVE 28 TO WS-DATE1-DD]
    Y -->|No| T
    
    X --> T
    Z --> T
    
    T --> AA[Complex Conditional Check]
    AA --> BB{NOT Multiple Conditions?}
    
    BB -->|Yes| CC[February 28 Special Processing]
    BB -->|No| DD[Skip Special Processing]
    
    CC --> EE[MOVE WS-DATE1-CCYY TO LEAP-YEAR-CCYY]
    EE --> FF[PERFORM C-LEAP-YEAR-TEST]
    FF --> GG{LEAP-YEAR-FALSE?}
    
    GG -->|Yes| HH[ADD 2 TO WS-DATE1-DD]
    GG -->|No| II[ADD 1 TO WS-DATE1-DD]
    
    HH --> JJ[Final Calculation]
    II --> JJ
    DD --> JJ
    
    JJ --> KK[COMPUTE WS-XDAYS]
    KK --> LL[Years: DATE2-CCYY - DATE1-CCYY Ã— 360]
    LL --> MM[Months: DATE2-MM - DATE1-MM Ã— 30]
    MM --> NN[Days: DATE2-DD - DATE1-DD]
    NN --> OO[Sum All Components]
    
    OO --> PP[PERFORM C-TIMEND]
    PP --> QQ[End C-TIM361]
    
    subgraph "Complex Conditions"
        RR[DATE1-MM = 2]
        SS[DATE1-DD >= 28]
        TT[Cross-Month Span]
        UU[Not Same Date]
    end
    
    style A fill:#e1f5fe
    style QQ fill:#c8e6c9
    style E fill:#fff3e0
    style G fill:#fff3e0
    style J fill:#fff3e0
    style O fill:#fff3e0
    style Q fill:#fff3e0
    style R fill:#fff3e0
    style W fill:#fff3e0
    style Y fill:#fff3e0
    style BB fill:#fff3e0
    style GG fill:#fff3e0
    style B fill:#e8f5e8
    style N fill:#e8f5e8
    style V fill:#e8f5e8
    style FF fill:#e8f5e8
    style PP fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIM362_Call_Graph.mmd">
                <h2>ğŸ“Š C-TIM362 Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-tim362 call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[APIPAY Main Program] --> B[C-TIM362 Module]
    B --> C[Component Calculation]
    C --> D[Decision Logic]
    D --> E[Simple Arithmetic OR Complex Logic]
    E --> F[Result Assembly]
    F --> G[Return to Caller]
    
    subgraph "Called Modules"
        H[C-TIMBEG]
        I[C-TIMEND]
        J[C-INCR-MONTHS]
        K[C-CALL-JUL Multiple Calls]
        L[C-LEAP-YEAR-TEST]
    end
    
    subgraph "Processing Paths"
        M[Simple 30-Day Path]
        N[Complex Hybrid Path]
        O[Month Adjustment Logic]
        P[Julian Date Conversion]
        Q[End-of-Month Validation]
    end
    
    subgraph "Working Storage"
        R[WS-DATEX Working Date]
        S[WS-XREM Year Difference]
        T[WS-XMONTHS Month Difference]
        U[WS-XDAYS Day Difference/Result]
        V[WS-HOLD-MOS Adjusted Months]
        W[WS-TMP-WORK Month Length]
        X[WS-TMP-JUL-1/2 Julian Dates]
        Y[P-DATE-IN/P-JULIAN-DATE Conversion]
    end
    
    subgraph "Output Structure"
        Z[WS-XDAYS Final Result]
        AA[ELAPSED-MONTHS]
        BB[ELAPSED-DAYS]
        CC[ELAPSED-REM]
    end
    
    subgraph "Data Tables"
        DD[DYTOM Array Day-of-Year Table]
        EE[LEAP-YEAR-LOGIC]
        FF[JULIAN-CONVERSION-TABLES]
    end
    
    B --> H
    F --> I
    E --> J
    E --> K
    E --> L
    
    D --> M
    D --> N
    E --> O
    E --> P
    E --> Q
    
    B --> R
    C --> S
    C --> T
    C --> U
    E --> V
    E --> W
    E --> X
    E --> Y
    
    G --> Z
    I --> AA
    I --> BB
    I --> CC
    
    E --> DD
    E --> EE
    K --> FF
    
    style A fill:#e1f5fe
    style G fill:#c8e6c9
    style B fill:#f3e5f5
    style H fill:#e8f5e8
    style I fill:#e8f5e8
    style J fill:#e8f5e8
    style K fill:#e8f5e8
    style L fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIM362_Hybrid_Logic.mmd">
                <h2>ğŸ“Š C-TIM362 Hybrid Logic</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-tim362 hybrid logic workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Input Dates] --> B[Component Calculation]
    B --> C[Years = DATE2-CCYY - DATE1-CCYY]
    C --> D[Months = DATE2-MM - DATE1-MM]
    D --> E[Days = DATE2-DD - DATE1-DD]
    
    E --> F[Decision Point]
    F --> G{Days â‰¥ 0?}
    
    G -->|Yes| H[Simple Path]
    G -->|No| I[Complex Path]
    
    H --> J[30-Day Month Arithmetic]
    J --> K[Total Days = YearsÃ—12+MonthsÃ—30 + Days]
    K --> L[Simple Result]
    
    I --> M[Hybrid Julian Method]
    M --> N[Month Adjustment]
    N --> O[Adjusted Months = Original Months - 1]
    O --> P[Date Manipulation]
    
    P --> Q[Subtract 1 month from End Date]
    Q --> R[via C-INCR-MONTHS]
    R --> S[Replace day with Start day]
    
    S --> T[End-of-Month Check]
    T --> U{Start day > 28?}
    U -->|Yes| V[Month Length Validation]
    U -->|No| W[Julian Conversion]
    
    V --> X[Calculate actual month length]
    X --> Y[Check leap year for February]
    Y --> Z{Start day > Month length?}
    
    Z -->|Yes| AA[Reset to end month first day]
    Z -->|No| W
    
    AA --> BB[Set to first day of end month]
    BB --> W
    
    W --> CC[Convert both dates to Julian]
    CC --> DD[Julian1 = End date]
    DD --> EE[Julian2 = Manipulated date]
    EE --> FF[Precise Days = Julian1 - Julian2]
    
    FF --> GG[Final Adjustment]
    GG --> HH{Precise Days > 30?}
    HH -->|Yes| II[Total = Precise + Adjusted-1Ã—30]
    HH -->|No| JJ[Total = Precise + AdjustedÃ—30]
    
    II --> KK[Hybrid Result]
    JJ --> KK
    
    L --> LL[Final Output]
    KK --> LL
    
    subgraph "Simple Method"
        MM[Standard 30-day months]
        NN[Direct arithmetic]
        OO[Fast calculation]
    end
    
    subgraph "Hybrid Method"
        PP[Month manipulation]
        QQ[Julian precision]
        RR[Complex adjustment]
        SS[Accurate for edge cases]
    end
    
    style A fill:#e3f2fd
    style LL fill:#e8f5e8
    style G fill:#fff8e1
    style U fill:#fff8e1
    style Z fill:#fff8e1
    style HH fill:#fff8e1
    style H fill:#e8f5e8
    style I fill:#fff3e0
    style R fill:#f3e5f5</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIM362_Main_Flow.mmd">
                <h2>ğŸ“Š C-TIM362 Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-tim362 main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Start C-TIM362] --> B[MOVE WS-DATE2 TO WS-DATEX]
    B --> C[PERFORM C-TIMBEG]
    C --> D[Calculate Component Differences]
    
    D --> E[COMPUTE WS-XREM = DATE2-CCYY - DATE1-CCYY]
    E --> F[COMPUTE WS-XMONTHS = DATE2-MM - DATE1-MM]
    F --> G[COMPUTE WS-XDAYS = DATE2-DD - DATE1-DD]
    
    G --> H[Check Day Arithmetic Sign]
    H --> I{WS-XDAYS NOT < 0?}
    
    I -->|Yes| J[Simple 30-Day Arithmetic]
    I -->|No| K[Complex Julian Logic]
    
    J --> L[COMPUTE WS-XDAYS = YearsÃ—12+MonthsÃ—30 + Days]
    L --> M[PERFORM C-TIMEND]
    M --> N[End C-TIM362]
    
    K --> O[Month Adjustment]
    O --> P[ADD -1 TO WS-XMONTHS]
    P --> Q[COMPUTE WS-HOLD-MOS = YearsÃ—12 + Months]
    Q --> R[Date Manipulation]
    
    R --> S[MOVE -1 TO WS-UP-WORK]
    S --> T[Set up C-INCR-MONTHS parameters]
    T --> U[PERFORM C-INCR-MONTHS]
    U --> V[Update WS-DATEX with result]
    
    V --> W[End-of-Month Logic]
    W --> X[MOVE WS-DATE1-DD TO WS-DATEX-DD]
    X --> Y{WS-DATE1-DD > 28?}
    
    Y -->|Yes| Z[Calculate Month Length]
    Y -->|No| AA[Julian Date Processing]
    
    Z --> BB[COMPUTE WS-TMP-WORK = DYTOM difference]
    BB --> CC[Check Leap Year for February]
    CC --> DD{LEAP-YEAR-FALSE AND WS-DATEX-MM = 2?}
    
    DD -->|Yes| EE[ADD 1 TO WS-TMP-WORK]
    DD -->|No| FF[Check Day vs Month Length]
    
    EE --> FF
    FF --> GG{WS-DATE1-DD > WS-TMP-WORK?}
    GG -->|Yes| HH[Reset to First of End Month]
    GG -->|No| AA
    
    HH --> II[MOVE WS-DATE2-MM TO WS-DATEX-MM]
    II --> JJ[MOVE 1 TO WS-DATEX-DD]
    JJ --> KK[MOVE WS-DATE2-CCYY TO WS-DATEX-CCYY]
    KK --> AA
    
    AA --> LL[Convert DATE2 to Julian]
    LL --> MM[MOVE WS-DATE2 TO P-DATE-IN]
    MM --> NN[PERFORM C-CALL-JUL]
    NN --> OO[MOVE P-JULIAN-DATE TO WS-TMP-JUL-1]
    
    OO --> PP[Convert DATEX to Julian]
    PP --> QQ[MOVE WS-DATEX TO P-DATE-IN]
    QQ --> RR[PERFORM C-CALL-JUL]
    RR --> SS[MOVE P-JULIAN-DATE TO WS-TMP-JUL-2]
    
    SS --> TT[Calculate Julian Difference]
    TT --> UU[COMPUTE WS-XDAYS = WS-TMP-JUL-1 - WS-TMP-JUL-2]
    UU --> VV[Final Adjustment]
    
    VV --> WW{WS-XDAYS > 30?}
    WW -->|Yes| XX[COMPUTE WS-XDAYS + HOLD-MOS-1Ã—30]
    WW -->|No| YY[COMPUTE WS-XDAYS + HOLD-MOSÃ—30]
    
    XX --> M
    YY --> M
    
    style A fill:#e1f5fe
    style N fill:#c8e6c9
    style I fill:#fff3e0
    style Y fill:#fff3e0
    style DD fill:#fff3e0
    style GG fill:#fff3e0
    style WW fill:#fff3e0
    style J fill:#e8f5e8
    style K fill:#fff8e1
    style C fill:#e8f5e8
    style U fill:#e8f5e8
    style NN fill:#e8f5e8
    style RR fill:#e8f5e8
    style M fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIM365-367_Call_Graph.mmd">
                <h2>ğŸ“Š C-TIM365-367 Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-tim365-367 call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[APIPAY Program] -->|Calls| B[C-TIM365-367]
    B -->|Initializes| C[C-TIMBEG]
    B -->|Tests Leap Year| D[C-LEAP-YEAR-TEST]
    B -->|Finalizes| E[C-TIMEND]
    
    F[Other Date Processing] -->|May Call| B
    
    subgraph "Function Calls"
    B -->|Uses| G[DYTOM Function]
    end
    
    subgraph "Data Flow"
    H[Input: WS-DATE1] --> B
    I[Input: WS-DATE2] --> B
    B --> J[Output: ELAPSED_MONTHS]
    B --> K[Output: ELAPSED_DAYS]
    B --> L[Output: ELAPSED_REM]
    end</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIM365-367_Leap_Year_Logic.mmd">
                <h2>ğŸ“Š C-TIM365-367 Leap Year Logic</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-tim365-367 leap year logic workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Leap Year Handling] --> B[Extract Year]
    B --> C{Year Divisible by 4?}
    C -->|Yes| D{Month > February?}
    C -->|No| E[No Leap Day Adjustment]
    D -->|Yes| F[Add Extra Day for February 29]
    D -->|No| E
    
    subgraph "Special Century Year Logic"
    G[Check Century Year] --> H{Is Year = 2000?}
    H -->|Yes| I{Month > February?}
    H -->|No| J[Apply Standard Leap Year Rule]
    I -->|Yes| K[Special Adjustment for Year 2000]
    I -->|No| J
    end
    
    L[C-LEAP-YEAR-TEST] --> M{LEAP-YEAR-TRUE?}
    M -->|Yes| N{Month > February?}
    M -->|No| O[No Leap Day Adjustment]
    N -->|Yes| P[Add 1 to Day Count]
    N -->|No| O</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIM365-367_Main_Flow.mmd">
                <h2>ğŸ“Š C-TIM365-367 Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-tim365-367 main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[C-TIM365-367 Section] --> B[Perform C-TIMBEG]
    B --> C[Calculate Year Difference]
    C --> D[Calculate Month Difference]
    D --> E[Calculate Day Difference]
    E --> F{Is Day Difference < 0?}
    F -->|Yes| G[Adjust Month and Year]
    G --> H[Calculate Days in Month]
    H --> I[Apply Leap Year Logic]
    I --> J[Adjust for Negative Day Difference]
    J --> K[Calculate Final Days]
    F -->|No| L[Skip Adjustments]
    K --> M[Compute Total Elapsed Days]
    L --> M
    M --> N[Perform C-TIMEND]
    
    subgraph "Leap Year Logic"
    I --> I1[Check if Year is Divisible by 4]
    I1 --> I2[Apply Special Century Year Rules]
    I2 --> I3[Add Day if Necessary]
    end
    
    subgraph "Negative Day Handling"
    J --> J1[Decrement Month]
    J1 --> J2{Month = 0?}
    J2 -->|Yes| J3[Set Month = 12, Decrement Year]
    J2 -->|No| J4[Keep Adjusted Month/Year]
    J3 --> J5[Calculate Days in Previous Month]
    J4 --> J5
    end</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIM999-998_Call_Graph.mmd">
                <h2>ğŸ“Š C-TIM999-998 Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-tim999-998 call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[APIPAY Program] -->|Calls| B[C-TIM999-998]
    B -->|Initializes| C[C-TIMBEG]
    B -->|Month Increments| D[C-INCR-MONTHS]
    B -->|Julian Conversion| E[C-CALL-JUL]
    B -->|Finalizes| F[C-TIMEND]
    
    G[Other Date Processing] -->|May Call| B
    
    subgraph "Data Flow"
    H[Input: WS-DATE1] --> B
    I[Input: WS-DATE2] --> B
    B --> J[Output: ELAPSED_MONTHS]
    B --> K[Output: ELAPSED_DAYS]
    B --> L[Output: ELAPSED_REM]
    end
    
    subgraph "Regulatory Context"
    M[Regulation Z] -->|Defines| N[Truth in Lending Method]
    N -->|Implemented by| B
    end</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIM999-998_Main_Flow.mmd">
                <h2>ğŸ“Š C-TIM999-998 Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-tim999-998 main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[C-TIM999-998 Section] --> B[Perform C-TIMBEG]
    B --> C[Calculate Month Difference]
    C --> D{Is Day1 > Day2?}
    D -->|Yes| E[Subtract 1 Month]
    D -->|No| F[Keep Month Difference]
    E --> G[Store Negative Month Value]
    F --> G
    G --> H[Set Working Date to Date2]
    H --> I[Increment Date2 Backwards by Months]
    I --> J[Convert Dates to Julian]
    J --> K[Calculate Elapsed Days]
    K --> L[Perform C-TIMEND]
    
    subgraph "Julian Conversion"
    J --> J1[Move Date to P-DATE-IN]
    J1 --> J2[Perform C-CALL-JUL]
    J2 --> J3[Store Julian Dates]
    end
    
    subgraph "Days Calculation"
    K --> K1[Multiply Months by 30]
    K1 --> K2[Add Julian Date Difference]
    end</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIM999-998_Method_Comparison.mmd">
                <h2>ğŸ“Š C-TIM999-998 Method Comparison</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-tim999-998 method comparison workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Date Difference Methods] --> B[YRTYPE 999 - Truth in Lending]
    A --> C[YRTYPE 998 - Elapsed Unit Periods]
    
    B --> B1[Standardized 30-day Months]
    B --> B2[Standardized 360-day Year]
    B --> B3[Whole Month Counting]
    B --> B4[Reg Z Compliant Results]
    
    C --> C1[30-day Unit Periods]
    C --> C2[Day Precision for Partial Periods]
    C --> C3[Remainder Days Tracked]
    C --> C4[Payment Schedule Alignment]
    
    subgraph "Example Calculation"
    D[Start: 03/03/97] --> E[End: 05/02/97]
    E --> F[YRTYPE 999 Result]
    E --> G[YRTYPE 998 Result]
    
    F --> F1[Months: 2]
    F --> F2[Days: 60]
    F --> F3[Remainder: 0]
    
    G --> G1[Months: 1]
    G --> G2[Days: 60]
    G --> G3[Remainder: 30]
    end</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIMALL_Call_Graph.mmd">
                <h2>ğŸ“Š C-TIMALL Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-timall call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[C-TIMALL] --> B[Zero Date Check]
    A --> C[State Backup]
    A --> D[Parameter Setup]
    A --> E[DATER-ROUTINE]
    A --> F[Year Type Processing]
    A --> G[State Restoration]
    
    F --> F1[C-TIM360-358]
    F --> F2[C-TIM361]
    F --> F3[C-TIM362]
    F --> F4[C-TIM365-367]
    F --> F5[C-TIM999-998]
    
    F1 --> F1A[C-TIMBEG]
    F1 --> F1B[C-TIMEND]
    F1 --> F1C[C-LEAP-YEAR-TEST]
    
    F2 --> F2A[C-TIMBEG]
    F2 --> F2B[C-TIMEND]
    
    F3 --> F3A[C-TIMBEG]
    F3 --> F3B[C-TIMEND]
    
    F4 --> F4A[C-TIMBEG]
    F4 --> F4B[C-TIMEND]
    F4 --> F4C[C-LEAP-YEAR-TEST]
    
    F5 --> F5A[C-TIMBEG]
    F5 --> F5B[C-TIMEND]
    F5 --> F5C[Special Timing Logic]
    
    E --> E1[Format Conversion]
    E1 --> E2[Action Code Processing]
    E2 --> E3[Result Processing]
    
    style A fill:#e1f5fe
    style B fill:#fff9c4
    style C fill:#e8f5e8
    style D fill:#fff9c4
    style E fill:#f3e5f5
    style F fill:#fff3e0
    style G fill:#e8f5e8
    style F1 fill:#f8bbd9
    style F2 fill:#f8bbd9
    style F3 fill:#f8bbd9
    style F4 fill:#f8bbd9
    style F5 fill:#f8bbd9</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIMALL_Main_Flow.mmd">
                <h2>ğŸ“Š C-TIMALL Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-timall main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[C-TIMALL Entry] --> B{Check Input Dates}
    B -->|NUM-DATE = 0 OR SYS-DATE = 0| C[Set All Results to Zero]
    B -->|Valid Dates| D[Backup State Variables]
    
    C --> C1[MOVE 0 TO ELAPSED-DAYS]
    C1 --> C2[MOVE 0 TO ELAPSED-MONTHS]
    C2 --> C3[MOVE 0 TO ELAPSED-REM]
    C3 --> C4[MOVE SPACES TO ELAPSED-RESULTS]
    C4 --> Z[Return to Caller]
    
    D --> D1[MOVE NDTE-DATE TO DATER-HOLD-NDTE-DATE]
    D1 --> D2[MOVE DATER-UNITPER-INFO TO HOLD-UNITPER-INFO]
    D2 --> E[Set Default Parameters]
    
    E --> E1[MOVE M TO DATER-UNITPER-CD]
    E1 --> E2[MOVE 1 TO DATER-UNITPER-FREQ]
    E2 --> E3[MOVE E TO DATER-ACTION-CODE]
    E3 --> F[PERFORM DATER-ROUTINE]
    
    F --> G[Restore State Variables]
    G --> G1[MOVE HOLD-UNITPER-INFO TO DATER-UNITPER-INFO]
    G1 --> G2[MOVE DATER-HOLD-NDTE-DATE TO NDTE-DATE]
    G2 --> Z
    
    style A fill:#e1f5fe
    style B fill:#fff3e0
    style C fill:#ffcdd2
    style D fill:#e8f5e8
    style E fill:#f3e5f5
    style F fill:#fff9c4
    style G fill:#e8f5e8
    style Z fill:#c8e6c9</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIMALL_Router.mmd">
                <h2>ğŸ“Š C-TIMALL Router</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-timall router workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[C-TIMALL Section] --> B{Evaluate TA-YRTYPE}
    B -->|358 or 360| C[Perform C-TIM360-358]
    B -->|361| D[Perform C-TIM361]
    B -->|362| E[Perform C-TIM362]
    B -->|365 or 367| F[Perform C-TIM365-367]
    B -->|998 or 999| G[Perform C-TIM999-998]
    
    subgraph "Year Type Categories"
    C --> C1[30-Day Month Methods]
    D --> D1[360+ Day Methods]
    E --> D1
    F --> F1[Actual Calendar Methods]
    G --> G1[Regulatory/Unit Period Methods]
    end
    
    subgraph "Business Applications"
    C1 --> BA1[Standard Financial Calculations]
    D1 --> BA2[Specialized Payment Calculations]
    F1 --> BA3[Actual Calendar-Based Calculations]
    G1 --> BA4[Regulatory Compliance Calculations]
    end</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIMALL_Year_Type_Processing.mmd">
                <h2>ğŸ“Š C-TIMALL Year Type Processing</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-timall year type processing workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[EVALUATE TA-YRTYPE] --> B{Year Type Value}
    
    B -->|358| C[C-TIM360-358]
    B -->|360| C
    B -->|361| D[C-TIM361]
    B -->|362| E[C-TIM362]
    B -->|365| F[C-TIM365-367]
    B -->|367| F
    B -->|998| G[C-TIM999-998]
    B -->|999| G
    B -->|Other| H[No Processing]
    
    C --> C1[360/358 Day Year Calculation]
    C1 --> C2[Adjust days > 30 to 30]
    C2 --> C3[Handle February special cases]
    C3 --> C4[Apply leap year logic]
    
    D --> D1[361 Day Year Calculation]
    D1 --> D2[Jefferson NJ specific logic]
    
    E --> E1[362 Day Year Calculation]
    E1 --> E2[Mercury Alabama specific logic]
    
    F --> F1[365/367 Day Year Calculation]
    F1 --> F2[Standard/Leap year processing]
    
    G --> G1[999/998 Special Timing]
    G1 --> G2[Unit period calculations]
    
    H --> H1[Return without processing]
    
    C4 --> I[Calculate Results]
    D2 --> I
    E2 --> I
    F2 --> I
    G2 --> I
    H1 --> I
    
    I --> I1[Set ELAPSED-MONTHS]
    I1 --> I2[Set ELAPSED-DAYS]
    I2 --> I3[Set ELAPSED-REM]
    I3 --> I4[Set ELAPSED-RESULTS]
    I4 --> J[Return to Caller]
    
    style A fill:#e1f5fe
    style B fill:#fff3e0
    style C fill:#f3e5f5
    style D fill:#f3e5f5
    style E fill:#f3e5f5
    style F fill:#f3e5f5
    style G fill:#f3e5f5
    style H fill:#ffcdd2
    style I fill:#fff9c4
    style J fill:#c8e6c9</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIMBEG-TIMEND_Integration.mmd">
                <h2>ğŸ“Š C-TIMBEG-TIMEND Integration</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-timbeg-timend integration workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Time Calculation Process] --> B[C-TIMBEG]
    B --> C[Specific Time Calculation]
    C --> D[C-TIMEND]
    
    subgraph "Date Processing System"
    B --> B1[Initialize]
    D --> D1[Finalize]
    end
    
    subgraph "Time Calculation Methods"
    C --> C1[C-TIM360-358]
    C --> C2[C-TIM361]
    C --> C3[C-TIM362]
    C --> C4[C-TIM365-367]
    C --> C5[C-TIM999-998]
    C --> C6[C-TIMALL]
    end
    
    subgraph "Data Flow"
    B1 --> B2[Date Ordering]
    B2 --> B3[Julian Conversion]
    B3 --> B4[Sign Determination]
    
    D1 --> D2[Apply Sign]
    D2 --> D3[Month Calculation]
    D3 --> D4[Remainder Calculation]
    D4 --> D5[Year Type Handling]
    end</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIMBEG_Call_Graph.mmd">
                <h2>ğŸ“Š C-TIMBEG Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-timbeg call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart LR
    A[C-TIMBEG] --> B[C-CALL-JUL]
    A --> C[Julian Conversion Process]
    B --> D[Date Validation]
    B --> E[Format Conversion]
    C --> F[WS-JUL-1 Generation]
    C --> G[WS-JUL-2 Generation]
    
    H[Calling Programs] --> A
    I[C-TIMALL] --> A
    J[C-ELAPSED-TIME] --> A
    K[Date Comparison Routines] --> A
    
    style A fill:#4fc3f7
    style B fill:#81c784
    style H fill:#ffb74d
    style I fill:#ffb74d
    style J fill:#ffb74d
    style K fill:#ffb74d</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIMBEG_Flow.mmd">
                <h2>ğŸ“Š C-TIMBEG Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-timbeg flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[C-TIMBEG Section] --> B[Save Original Dates]
    B --> C[Convert Date1 to Julian]
    C --> D[Convert Date2 to Julian]
    D --> E{Is Date1 > Date2?}
    E -->|Yes| F[Swap Dates and Julian Values]
    F --> G[Set Sign = -1]
    E -->|No| H[Keep Original Order]
    H --> I[Set Sign = 1]
    G --> J[Restore Original Input Dates]
    I --> J
    
    subgraph "Julian Conversion"
    C --> C1[Move WS-DATE1 to P-DATE-IN]
    C1 --> C2[Perform C-CALL-JUL]
    C2 --> C3[Store Julian Date]
    end</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIMBEG_Main_Flow.mmd">
                <h2>ğŸ“Š C-TIMBEG Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-timbeg main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Start C-TIMBEG] --> B[Preserve Original Dates]
    B --> C[Save NUM-DATE to SV-NUM-DATE]
    C --> D[Save SYS-DATE to SV-SYS-DATE]
    D --> E[Convert WS-DATE1 to Julian]
    E --> F[PERFORM C-CALL-JUL]
    F --> G[Store in WS-JUL-1]
    G --> H[Convert WS-DATE2 to Julian]
    H --> I[PERFORM C-CALL-JUL]
    I --> J[Store in WS-JUL-2]
    J --> K{WS-JUL-1 > WS-JUL-2?}
    K -->|Yes| L[Dates Out of Order]
    K -->|No| M[Dates in Order]
    L --> N[Swap WS-DATE1 and WS-DATE2]
    N --> O[Swap WS-JUL-1 and WS-JUL-2]
    O --> P[Set WS-XSIGN = -1]
    M --> Q[Set WS-XSIGN = +1]
    P --> R[Restore Original Values]
    Q --> R
    R --> S[Restore NUM-DATE from SV-NUM-DATE]
    S --> T[Restore SYS-DATE from SV-SYS-DATE]
    T --> U[End C-TIMBEG]

    style A fill:#e1f5fe
    style U fill:#c8e6c9
    style K fill:#fff3e0
    style L fill:#ffebee
    style M fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIMEND_Call_Graph.mmd">
                <h2>ğŸ“Š C-TIMEND Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-timend call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart LR
    A[Calling Programs] --> B[C-TIMEND]
    C[C-TIMALL] --> B
    D[C-ELAPSED-TIME] --> B
    E[Month-based Calculations] --> B
    
    B --> F[Mathematical Operations Only]
    B --> G[No External Calls]
    
    H[Input Processing] --> B
    I[WS-XDAYS Sign Application] --> B
    J[Month Calculation] --> B
    K[Date Order Restoration] --> B
    
    style B fill:#4fc3f7
    style A fill:#ffb74d
    style C fill:#ffb74d
    style D fill:#ffb74d
    style E fill:#ffb74d
    style F fill:#81c784
    style G fill:#81c784</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIMEND_Flow.mmd">
                <h2>ğŸ“Š C-TIMEND Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-timend flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[C-TIMEND Section] --> B[Apply Sign to Days]
    B --> C{Year Type = 998?}
    C -->|Yes| D[Apply Sign to Months]
    D --> E[Calculate Remainder = Days - Months*30]
    C -->|No| F[Divide Days by 30]
    F --> G[Get Months and Remainder]
    E --> H{Year Type = 365?}
    G --> H
    H -->|Yes| I[Recalculate Days as Julian Difference]
    H -->|No| J[Keep Calculated Days]
    I --> K{Sign < 0?}
    J --> K
    K -->|Yes| L[Restore Original Date Order]
    K -->|No| M[Keep Current Order]
    L --> N[End]
    M --> N
    
    subgraph "998 YRTYPE (Elapsed Unit Periods)"
    D --> D1[WS-XMONTHS = WS-XMONTHS * WS-XSIGN]
    E --> E1[WS-XREM = WS-XDAYS - WS-XMONTHS * 30]
    end
    
    subgraph "365 YRTYPE (Actual Calendar)"
    I --> I1[WS-XDAYS = WS-XSIGN * (WS-JUL-2 - WS-JUL-1)]
    end</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIMEND_Main_Flow.mmd">
                <h2>ğŸ“Š C-TIMEND Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-timend main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Start C-TIMEND] --> B[Apply Sign to Days]
    B --> C[COMPUTE WS-XDAYS = WS-XSIGN * WS-XDAYS]
    C --> D{TA-YRTYPE = 998?}
    D -->|Yes| E[Unit Period Processing]
    D -->|No| F[Standard Processing]
    
    E --> G[COMPUTE WS-XMONTHS = WS-XMONTHS * WS-XSIGN]
    G --> H[COMPUTE WS-XREM = WS-XDAYS - MONTHS * 30]
    H --> I{TA-YRTYPE = 365?}
    
    F --> J[DIVIDE WS-XDAYS BY 30]
    J --> K[GIVING WS-XMONTHS REMAINDER WS-XREM]
    K --> I
    
    I -->|Yes| L[365-Day Processing]
    I -->|No| M{WS-XSIGN < 0?}
    
    L --> N[COMPUTE WS-XDAYS = WS-XSIGN * JULIAN-DIFF]
    N --> M
    
    M -->|Yes| O[Restore Date Order]
    M -->|No| P[End C-TIMEND]
    
    O --> Q[Swap WS-DATE1 and WS-DATE2]
    Q --> R[Swap WS-JUL-1 and WS-JUL-2]
    R --> P
    
    style A fill:#e1f5fe
    style P fill:#c8e6c9
    style D fill:#fff3e0
    style I fill:#fff3e0
    style M fill:#fff3e0
    style E fill:#e8f5e8
    style F fill:#f3e5f5
    style L fill:#fff9c4</div>
                </div>
            </div>
            <div class="diagram-section" id="C-TIMEND_Year_Type_Processing.mmd">
                <h2>ğŸ“Š C-TIMEND Year Type Processing</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the c-timend year type processing workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">flowchart TD
    A[Year Type Processing] --> B{TA-YRTYPE Value}
    
    B -->|998| C[Unit Period Method]
    B -->|365| D[Standard Calendar Method]
    B -->|Other| E[30-Day Month Method]
    
    C --> F[Pre-calculated Months]
    F --> G[Apply Sign to Months]
    G --> H[Calculate Remainder Days - Months*30]
    H --> I[Unit Period Result]
    
    D --> J[Julian Date Difference]
    J --> K[Apply Sign to Difference]
    K --> L[Direct Day Calculation]
    L --> M[365-Day Result]
    
    E --> N[Divide Days by 30]
    N --> O[Integer Division for Months]
    O --> P[Modulo Operation for Remainder]
    P --> Q[Standard Result]
    
    style A fill:#e1f5fe
    style B fill:#fff3e0
    style C fill:#e8f5e8
    style D fill:#fff9c4
    style E fill:#f3e5f5
    style I fill:#c8e6c9
    style M fill:#c8e6c9
    style Q fill:#c8e6c9</div>
                </div>
            </div>
            <div class="diagram-section" id="CJUL_Call_Graph.mmd">
                <h2>ğŸ“Š CJUL Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the cjul call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[External Calling Program] --> B[CJUL SECTION]
    B --> C[DATER-ROUTINE]
    C --> D[Internal Date Logic]
    D --> E[Julian to Calendar Conversion]
    E --> F[Date Validation]
    F --> G[Error Checking]
    G --> C
    C --> B
    B --> A
    
    H[JUL SECTION] -.->|Often used together| B
    I[Date Arithmetic Routines] --> B
    J[Calendar Calculations] --> B
    K[Batch Processing] --> B
    
    style B fill:#e1f5fe
    style C fill:#f3e5f5
    style A fill:#e8f5e8
    style H fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="CJUL_Main_Flow.mmd">
                <h2>ğŸ“Š CJUL Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the cjul main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Start: CJUL SECTION] --> B[Set DATER-ACTION-CODE to 'C']
    B --> C[Call DATER-ROUTINE]
    C --> D{DATER-ROUTINE Processing}
    D --> E[Convert Julian to Calendar Date]
    E --> F{Conversion Successful?}
    F -->|Yes| G[Set NUM-DATE to Calendar Date]
    F -->|No| H[Set NUM-DATE to 0]
    F -->|No| I[Set Error Flag]
    G --> J[Return to Caller]
    H --> I
    I --> J
    
    style A fill:#e1f5fe
    style J fill:#e8f5e8
    style H fill:#ffebee
    style I fill:#ffebee</div>
                </div>
            </div>
            <div class="diagram-section" id="GET-GPENV_Call_Graph.mmd">
                <h2>ğŸ“Š GET-GPENV Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the get-gpenv call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[MAIN-PROGRAM SECTION] --> B[PERFORM GET-GPENV]
    B --> C[GET-GPENV SECTION]
    C --> D[ACCEPT GP-REC FROM ENVIRONMENT]
    D --> E[IMPLICIT RETURN]
    E --> A
    
    style A fill:#e1f5fe
    style C fill:#f3e5f5
    style D fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="GET-GPENV_Data_Population.mmd">
                <h2>ğŸ“Š GET-GPENV Data Population</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the get-gpenv data population workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[GPENV Environment String] --> B[COBOL ACCEPT Processing]
    B --> C[GP-ALLOW-SET-FOR-NONCASH]
    B --> D[GP-TRUE-NEXT-BATCH]
    B --> E[GP-REPO-CODE]
    B --> F[Other GP Configuration Fields]
    
    C --> G[Payment Processing Control]
    D --> H[Batch Processing Control]
    E --> I[Repossession Control]
    F --> J[System Behavior Control]
    
    G --> K[Available to APIPAY System]
    H --> K
    I --> K
    J --> K
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style K fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="GET-GPENV_Environment_Retrieval.mmd">
                <h2>ğŸ“Š GET-GPENV Environment Retrieval</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the get-gpenv environment retrieval workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[System Environment] --> B[GPENV Variable]
    B --> C[ACCEPT Statement]
    C --> D{Environment Access}
    D -->|Success| E[Parse Environment Data]
    D -->|Failure| F[Default/Spaces Values]
    E --> G[Populate GP-REC Fields]
    F --> G
    G --> H[Configuration Available]
    
    style A fill:#e3f2fd
    style B fill:#f1f8e9
    style C fill:#fff3e0
    style D fill:#fce4ec
    style G fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="GET-GPENV_Main_Flow.mmd">
                <h2>ğŸ“Š GET-GPENV Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the get-gpenv main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[MAIN-PROGRAM] --> B[PERFORM GET-GPENV]
    B --> C[GET-GPENV SECTION]
    C --> D[ACCEPT GP-REC FROM ENVIRONMENT 'GPENV']
    D --> E[Environment Variable Retrieved]
    E --> F[GP-REC Structure Populated]
    F --> G[Return to Caller]
    
    style A fill:#e1f5fe
    style C fill:#f3e5f5
    style D fill:#fff3e0
    style F fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="GET-TIME_Call_Graph.mmd">
                <h2>ğŸ“Š GET-TIME Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the get-time call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[GET-TIME] --> B[System Time Functions]
    B --> C[COBOL ACCEPT FROM TIME]
    
    D[Transaction Processing] --> A
    E[Logging Systems] --> A
    F[User Interface] --> A
    G[Report Generation] --> A
    H[Audit Systems] --> A
    
    A --> I[Time Format Options]
    I --> J[12-Hour Format with AM/PM]
    I --> K[24-Hour Military Format]
    
    A --> L[Output Components]
    L --> M[T-HH: Hours]
    L --> N[T-MM: Minutes]
    L --> O[T-COL: Colon Separator]
    L --> P[T-SPACE: Space Character]
    L --> Q[T-AMPM: AM/PM Indicator]
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style D fill:#fff3e0
    style E fill:#fff3e0
    style F fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="GET-TIME_Main_Flow.mmd">
                <h2>ğŸ“Š GET-TIME Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the get-time main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[GET-TIME Entry] --> B[ACCEPT TIME-NOW FROM TIME]
    B --> C{TIME-MILITARY-FG = Y?}
    C -->|Yes| D[Set T-AMPM = blank]
    C -->|No| E{H-AND-M <= 1159?}
    E -->|Yes| F[Set T-AMPM = AM]
    E -->|No| G[Set T-AMPM = PM]
    
    D --> H{12-Hour Format?}
    F --> H
    G --> H
    
    H -->|Yes| I{H-AND-M >= 1300?}
    H -->|No| M
    I -->|Yes| J[Subtract 1200 from H-AND-M]
    I -->|No| K{CUR-HH = 0?}
    J --> K
    K -->|Yes| L[Set CUR-HH = 12]
    K -->|No| M[Format Output Fields]
    L --> M
    
    M --> N[Set T-HH = CUR-HH]
    N --> O[Set T-MM = CUR-MM]
    O --> P[Set T-COL = :]
    P --> Q[Set T-SPACE = blank]
    Q --> R[Reset TIME-MILITARY-FG]
    R --> S[Return]
    
    style A fill:#e1f5fe
    style S fill:#e8f5e8
    style C fill:#fff3e0
    style E fill:#fff3e0
    style H fill:#fff3e0
    style I fill:#fff3e0
    style K fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="JUL_Call_Graph.mmd">
                <h2>ğŸ“Š JUL Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the jul call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[External Calling Program] --> B[JUL SECTION]
    B --> C[DATER-ROUTINE]
    C --> D[Century Processing Logic]
    C --> E[Calendar Mathematics]
    C --> F[Leap Year Calculations]
    C --> G[Month/Day Arithmetic]
    D --> H[Julian Day Computation]
    E --> H
    F --> H
    G --> H
    H --> I[Error Validation]
    I --> C
    C --> B
    B --> A
    
    J[CJUL SECTION] -.->|Often used together| B
    K[Date Arithmetic Routines] --> B
    L[Date Comparison Utilities] --> B
    M[Calendar Calculations] --> B
    N[Batch Processing] --> B
    
    style B fill:#e1f5fe
    style C fill:#f3e5f5
    style A fill:#e8f5e8
    style J fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="JUL_Main_Flow.mmd">
                <h2>ğŸ“Š JUL Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the jul main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Start: JUL SECTION] --> B[Set DATER-ACTION-CODE to 'J']
    B --> C[Call DATER-ROUTINE]
    C --> D{Year Processing}
    D --> E{NUM-YR < EXT-JULIAN-CC?}
    E -->|Yes| F[Apply Year 2000+ Logic]
    E -->|No| G[Use Standard Century]
    F --> H[Calendar to Julian Calculation]
    G --> H
    H --> I{Conversion Successful?}
    I -->|Yes| J[Set JULIAN-DATE to Day Count]
    I -->|No| K[Set JULIAN-DATE to 0]
    I -->|No| L[Set Error Flag]
    J --> M[Return to Caller]
    K --> L
    L --> M
    
    style A fill:#e1f5fe
    style M fill:#e8f5e8
    style K fill:#ffebee
    style L fill:#ffebee
    style F fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPF2_Batch_Timeline.mmd">
                <h2>ğŸ“Š LONPF2 Batch Timeline</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpf2 batch timeline workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">gantt
    title LONPF2 Batch Processing Timeline
    dateFormat  HH:mm
    axisFormat %H:%M
    
    section Initialization
    SQL Connect           :init1, 00:00, 00:02
    Environment Setup     :init2, after init1, 00:03
    File Opening          :init3, after init2, 00:05
    Parameter Reading     :init4, after init3, 00:02
    
    section Validation Phase  
    Input Validation      :val1, after init4, 00:03
    Loan Record Check     :val2, after val1, 00:02
    Business Rule Check   :val3, after val2, 00:05
    Transaction Validation:val4, after val3, 00:03
    
    section Transaction Processing
    Amount Distribution   :proc1, after val4, 00:04
    Balance Calculations  :proc2, after proc1, 00:03
    Status Determination  :proc3, after proc2, 00:02
    Special Processing    :proc4, after proc3, 00:06
    
    section File Updates
    BW1 Borrower Update   :file1, after proc4, 00:02
    CA1 Cash Update       :file2, after file1, 00:01
    DS1 Dealer Stats      :file3, after file2, 00:03
    TY1 Branch Stats      :file4, after file3, 00:02
    LN1 Loan Master       :crit, file5, after file4, 00:04
    LT1 Loan Trailers     :file6, after file5, 00:02
    TR1 Transaction GL    :crit, file7, after file6, 00:03
    LP1 Payment Record    :crit, file8, after file7, 00:02
    
    section Finalization
    Audit Trail Creation  :final1, after file8, 00:02
    Check Processing      :final2, after final1, 00:03
    File Closing          :final3, after final2, 00:02
    Return Code Setting   :final4, after final3, 00:01
    
    section Error Recovery
    Error Detection       :err1, 00:15, 00:16
    Rollback Processing   :err2, after err1, 00:03
    Error Logging         :err3, after err2, 00:01
    Recovery Procedures   :err4, after err3, 00:02</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPF2_Call_Graph.mmd">
                <h2>ğŸ“Š LONPF2 Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpf2 call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[MAIN-PROGRAM SECTION] --> B[SQL-CONNECT]
    A --> C[GET-GPENV]
    A --> D[RESTORE-SCREEN]
    A --> E[OPEN-LN1-FILE]
    A --> F[READ-LN1-FILE]
    A --> G[GET-LC]
    A --> H[GET-CON-REC-PRIOR-LNUPD]
    A --> I[GET-UNEARN-STATS-PRIOR-LNUPD]
    A --> J[PAID-THRU-CALCULATION]
    A --> K{LP-TRCD = RV?}
    
    K -->|Yes| L[UPDATE-LP-REVERSE]
    K -->|No| M[Normal Processing]
    
    L --> N[LOCATE-ORIGINAL-TRANSACTION]
    L --> O[REVERSE-AMOUNTS]
    L --> P[UPDATE-REVERSE-FLAGS]
    
    M --> Q[UPDATE-BW1-FILE]
    P --> Q
    
    Q --> R[OPEN-BW1-FILE]
    Q --> S[READ-BW1-FILE]
    Q --> T[UPDATE-BW1-CONT]
    Q --> U[CLOSE-BW1-FILE]
    
    Q --> V[UPDATE-CA1-FILE]
    V --> W[OPEN-CA1-FILE]
    V --> X[READ-CA1-FILE]
    V --> Y[UPDATE-CA1-CONT]
    V --> Z[CLOSE-CA1-FILE]
    
    Q --> AA[UPDATE-DS1-FILE]
    AA --> BB[UPDATE-DS1-CHECK-EXISTS]
    AA --> CC[DS1-UPDATE-RESERVE-BAL]
    AA --> DD[DS1-COMPUTE-PART-RC-AMT]
    AA --> EE[UPDATE-DS1-SXSVSS]
    
    Q --> FF[UPDATE-TY1-FILE]
    FF --> GG[OPEN-TY1-FILE]
    FF --> HH[READ-TY1-FILE]
    FF --> II[UPDATE-TY1-FILE-DLR-RESV]
    FF --> JJ[UPDATE-TY1-POST-BR]
    FF --> KK[CLOSE-TY1-FILE]
    
    Q --> LL[UPDATE-LN1-FILE]
    LL --> MM[CALCULATE-NEW-BALANCES]
    LL --> NN[UPDATE-PAYMENT-HISTORY]
    LL --> OO[SET-ACCOUNT-FLAGS]
    LL --> PP[HANDLE-PAYOFF-PROCESSING]
    
    Q --> QQ[UPDATE-LT1-FILE]
    QQ --> RR[OPEN-LT1-FILE]
    QQ --> SS[READ-LT1-FILE]
    QQ --> TT[UPDATE-ADDON-RECORDS]
    QQ --> UU[CLOSE-LT1-FILE]
    
    Q --> VV[UPDATE-TR1]
    VV --> WW[UPDATE-TR1-OPEN]
    VV --> XX[NEXT-AVAIL-SEQ]
    VV --> YY[CREATE-TR-RECORD]
    VV --> ZZ[WRITE-TR1-FILE]
    
    Q --> AAA[CHECK-UPDATE]
    AAA --> BBB[VALIDATE-CHECK-REQUEST]
    AAA --> CCC[CREATE-CHECK-RECORD]
    AAA --> DDD[UPDATE-CHECK-SEQUENCE]
    
    Q --> EEE[CONDITIONAL-SEND-MESS]
    EEE --> FFF[FORMAT-MESSAGE]
    EEE --> GGG[DISPLAY-MESSAGE]
    EEE --> HHH[LOG-MESSAGE]
    
    Q --> III[END-ROUTINE]
    III --> JJJ[CLOSE-ALL-FILES]
    III --> KKK[SET-RETURN-CODES]
    III --> LLL[PROGRAM-EXIT]
    
    style A fill:#e1f5fe
    style K fill:#fff3e0
    style Q fill:#f3e5f5
    style VV fill:#ffecb3
    style LL fill:#ffecb3
    style LLL fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPF2_Error_Handling.mmd">
                <h2>ğŸ“Š LONPF2 Error Handling</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpf2 error handling workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Error Detected] --> B{Error Category?}
    
    B --> C[File I/O Error]
    B --> D[Business Rule Violation]
    B --> E[Data Validation Error]
    B --> F[Concurrency Error]
    B --> G[System Error]
    
    C --> H[Check File Status]
    H --> I{Critical File Error?}
    I -->|Yes| J[Set ERRCD = X]
    I -->|No| K[Set ERRCD = E]
    J --> L[Close All Files]
    K --> M[Continue with Warning]
    L --> N[Terminate Program]
    
    D --> O{Rule Violation Type?}
    O -->|Invalid Transaction| P[Transaction Code Error]
    O -->|Amount Validation| Q[Amount Range Error]
    O -->|Account Status| R[Status Validation Error]
    O -->|Business Logic| S[Logic Validation Error]
    
    P --> T[Display Invalid Transaction Message]
    Q --> U[Display Amount Error Message]
    R --> V[Display Status Error Message]
    S --> W[Display Logic Error Message]
    
    E --> X{Validation Error Type?}
    X -->|Missing Data| Y[Display Required Field Message]
    X -->|Invalid Format| Z[Display Format Error Message]
    X -->|Out of Range| AA[Display Range Error Message]
    
    F --> BB{Concurrency Type?}
    BB -->|Record Lock| CC[Wait and Retry]
    BB -->|Data Changed| DD[Loan Changed Error]
    
    G --> EE[System Resource Error]
    EE --> FF[Log System Error]
    FF --> GG[Set Critical Error Code]
    
    T --> HH[Set ERRCD and MESS]
    U --> HH
    V --> HH
    W --> HH
    Y --> HH
    Z --> HH
    AA --> HH
    
    HH --> II[CONDITIONAL-SEND-MESS]
    II --> JJ{Route Code Check}
    JJ -->|Display| KK[Display Message to User]
    JJ -->|Log Only| LL[Log Message Only]
    
    CC --> MM{Retry Successful?}
    MM -->|Yes| NN[Continue Processing]
    MM -->|No| OO[Set Timeout Error]
    
    DD --> PP[Set Error M - Loan Changed]
    
    KK --> QQ[Wait for User Response]
    LL --> RR[Continue Background Processing]
    M --> RR
    NN --> RR
    
    QQ --> SS{User Action?}
    SS -->|Retry| TT[Return to Processing]
    SS -->|Cancel| UU[Exit Transaction]
    SS -->|Help| VV[Display Help Screen]
    VV --> QQ
    
    N --> WW[Program Termination]
    OO --> XX[Set Error Status]
    PP --> XX
    UU --> XX
    GG --> XX
    XX --> YY[Return Error to Caller]
    
    TT --> ZZ[Resume Normal Processing]
    RR --> ZZ
    
    style A fill:#ffebee
    style J fill:#ffcdd2
    style N fill:#f44336
    style ZZ fill:#c8e6c9
    style YY fill:#ff9800</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPF2_File_Update_Sequence.mmd">
                <h2>ğŸ“Š LONPF2 File Update Sequence</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpf2 file update sequence workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Start File Updates] --> B[File Update Order - CRITICAL SEQUENCE]
    
    B --> C[1. UPDATE-BW1-FILE]
    C --> D[Borrower Record Updates]
    D --> E[Update Customer Information]
    E --> F[2. UPDATE-CA1-FILE]
    
    F --> G{Cash Transaction?}
    G -->|Yes| H[Update Cash Drawer]
    G -->|No| I[3. UPDATE-LM1-FILE]
    H --> I
    
    I --> J{Memo Required?}
    J -->|Yes| K[Create Loan Memo]
    J -->|No| L[4. UPDATE-DS1-FILE]
    K --> L
    
    L --> M[Dealer Statistics Update]
    M --> N[Update Volume and Amounts]
    N --> O[Calculate Commissions]
    O --> P[5. UPDATE-TY1-FILE]
    
    P --> Q[Branch Statistics Update]
    Q --> R[Update Collection Stats]
    R --> S[Update Delinquency Stats]
    S --> T[6. UPDATE-LN1-FILE]
    
    T --> U[Loan Master Update - CRITICAL]
    U --> V[Calculate New Balances]
    V --> W[Update Payment History]
    W --> X[Set Account Status]
    X --> Y{Addon Products?}
    
    Y -->|Yes| Z[7. UPDATE-LT1-FILE]
    Y -->|No| AA[8. UPDATE-TR1]
    Z --> BB[Update Insurance/Addons]
    BB --> AA
    
    AA --> CC[Transaction GL Update]
    CC --> DD[Create GL Entries]
    DD --> EE[Set Account Distributions]
    EE --> FF[9. UPDATE-DT1-FILE]
    
    FF --> GG{Detail Required?}
    GG -->|Yes| HH[Create Detail Record]
    GG -->|No| II[10. UPDATE-LP1-FILE]
    HH --> II
    
    II --> JJ[Payment Record Creation]
    JJ --> KK[Set Posting Information]
    KK --> LL[Write Payment Record]
    LL --> MM[File Updates Complete]
    
    MM --> NN{All Updates Successful?}
    NN -->|Yes| OO[Commit Changes]
    NN -->|No| PP[Rollback and Error]
    
    OO --> QQ[Update Complete]
    PP --> RR[Error Exit]
    
    style A fill:#e3f2fd
    style B fill:#fff3e0
    style U fill:#ffecb3
    style CC fill:#ffecb3
    style II fill:#ffecb3
    style QQ fill:#e8f5e8
    style RR fill:#ffebee</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPF2_Main_Flow.mmd">
                <h2>ğŸ“Š LONPF2 Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpf2 main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Program Start] --> B[SQL-CONNECT]
    B --> C[Get Environment Variables]
    C --> D[Restore Screen Display]
    D --> E[Open and Read LN1-FILE]
    E --> F{Loan Record Changed?}
    F -->|Yes| G[Set Error: Loan Changed]
    F -->|No| H[Get Control Records]
    G --> Z[Exit with Error]
    H --> I[Read State Parameters SP1]
    I --> J[Read Branch Parameters BR]
    J --> K[Get Loan Control LC]
    K --> L[Save Original Values]
    L --> M[Calculate Payment Due]
    M --> N{Transaction Type?}
    
    N -->|RV - Reversal| O[UPDATE-LP-REVERSE]
    N -->|Payment Types| P[Normal Processing]
    
    O --> Q[File Update Sequence]
    P --> Q
    
    Q --> R[UPDATE-BW1-FILE - Borrower]
    R --> S[UPDATE-CA1-FILE - Cash Drawer]
    S --> T[UPDATE-DS1-FILE - Dealer Stats]
    T --> U[UPDATE-TY1-FILE - Branch Stats]
    U --> V[UPDATE-LN1-FILE - Loan Master]
    V --> W[UPDATE-LT1-FILE - Loan Trailers]
    W --> X[UPDATE-TR1 - Transaction GL]
    X --> Y[Check Request Processing]
    Y --> AA[Close Files and Exit]
    
    style A fill:#e1f5fe
    style Z fill:#ffebee
    style AA fill:#e8f5e8
    style N fill:#fff3e0
    style Q fill:#f3e5f5</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPF2_Transaction_Processing.mmd">
                <h2>ğŸ“Š LONPF2 Transaction Processing</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpf2 transaction processing workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Transaction Input] --> B{Validate Transaction Code}
    B -->|Invalid| C[Set Error Code X]
    B -->|Valid| D{Check Transaction Type}
    
    D -->|PY - Payment| E[Process Regular Payment]
    D -->|PA - Payment Alt| F[Process Payment Alternative]
    D -->|PO - Payoff| G[Process Payoff]
    D -->|RV - Reversal| H[Process Reversal]
    D -->|SX/SV/SS - Repo| I[Process Repo Transaction]
    D -->|RI/RC/RA - Rebate| J[Process Rebate]
    D -->|OV - Overpayment| K[Process Overpayment]
    D -->|BK/BD - Bankruptcy| L[Process Bankruptcy]
    D -->|Other| M[Process Other Transaction]
    
    E --> N[Validate Payment Amount]
    F --> N
    G --> O[Calculate Payoff Amount]
    H --> P[Locate Original Transaction]
    I --> Q[Update Repo Status]
    J --> R[Calculate Rebate Amount]
    K --> S[Handle Excess Payment]
    L --> T[Update Bankruptcy Status]
    M --> U[Standard Processing]
    
    N --> V{Amount Valid?}
    V -->|No| W[Set Error Message]
    V -->|Yes| X[Distribute Payment]
    
    O --> Y{Payoff Complete?}
    Y -->|No| Z[Partial Payoff]
    Y -->|Yes| AA[Complete Payoff]
    
    P --> BB{Original Found?}
    BB -->|No| CC[Reversal Error]
    BB -->|Yes| DD[Reverse Effects]
    
    Q --> EE[Update Statistics]
    R --> EE
    S --> FF[Create Check Request]
    T --> GG[Update Account Status]
    U --> EE
    
    X --> HH[Apply to Balances]
    Z --> HH
    AA --> II[Set Payoff Flag]
    DD --> JJ[Restore Balances]
    
    HH --> KK[Update Loan Record]
    II --> KK
    JJ --> KK
    EE --> KK
    FF --> KK
    GG --> KK
    
    KK --> LL[Create Audit Trail]
    LL --> MM[Transaction Complete]
    
    W --> NN[Exit with Error]
    C --> NN
    CC --> NN
    
    style A fill:#e3f2fd
    style MM fill:#e8f5e8
    style NN fill:#ffebee
    style D fill:#fff3e0
    style V fill:#fff3e0
    style Y fill:#fff3e0
    style BB fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPF7_Balance_Calculation.mmd">
                <h2>ğŸ“Š LONPF7 Balance Calculation</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpf7 balance calculation workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Balance Calculation Start] --> B[Load Current Balances]
    B --> B1[LP-OTHBAL = LN-OTHBAL]
    B1 --> B2[LP-OT2BAL = LN-OT2BAL]
    B2 --> B3[LP-INTBAL = LN-INTBAL]
    B3 --> B4[LP-LCBAL = LN-LCBAL]
    B4 --> B5[LP-CURBAL = LN-CURBAL]
    
    B5 --> C{Transaction Type}
    
    C -->|AL| D[Late Charge Calculation]
    D --> D1[Apply Late Charge Formula]
    D1 --> D2[Calculate Partial Payments]
    D2 --> D3[Update LC Balance]
    D3 --> D4[Set LC Paid Through Date]
    
    C -->|AI| E[Interest Calculation]
    E --> E1{Interest Bearing Loan?}
    E1 -->|Yes| E2[Add Induced Interest]
    E1 -->|No| E3[Skip Interest Addition]
    E2 --> F
    E3 --> F
    
    C -->|WL/WI| G[Waiver Processing]
    G --> G1[Validate Waiver Limits]
    G1 --> G2{Waiver Type}
    G2 -->|WL| G3[Reduce Late Charge Balance]
    G2 -->|WI| G4[Reduce Interest Balance]
    G3 --> F
    G4 --> F
    
    C -->|OT/WO/O2/W2| H[Other Charge Processing]
    H --> H1{Positive or Negative?}
    H1 -->|Positive| H2[Add to Other Balance]
    H1 -->|Negative| H3[Reduce Other Balance]
    H2 --> H4[Validate Amount Limits]
    H3 --> H5[Check Minimum Balance]
    H4 --> F
    H5 --> F
    
    C -->|AP| I[Applied Payment Processing]
    I --> I1[Distribute to LC First]
    I1 --> I2[Apply Remainder to Interest]
    I2 --> I3[Apply Remainder to Other]
    I3 --> F
    
    C -->|OP| J[Other Payment Processing]
    J --> J1[Auto OT/AP Combination]
    J1 --> J2[Apply Distribution Logic]
    J2 --> F
    
    C -->|RE| K[Repossession Expense]
    K --> K1[Add to Interest Due]
    K1 --> K2[Add to Other Balance]
    K2 --> F
    
    D4 --> F[Final Balance Calculation]
    F --> F1[Compute Applied Current]
    F1 --> F2[LP-APCUR = LP-TRAMT - LP-APINT - LP-APOTH - LP-APOT2 - LP-APLC]
    F2 --> F3[Update Current Balance]
    F3 --> F4[Calculate New Paid Through Date]
    F4 --> F5[Set IBPC Status]
    F5 --> L[Balance Update Complete]
    
    style A fill:#e1f5fe
    style L fill:#c8e6c9
    style C fill:#fff3e0
    style F fill:#f3e5f5</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPF7_Batch_Timeline.mmd">
                <h2>ğŸ“Š LONPF7 Batch Timeline</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpf7 batch timeline workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">gantt
    title LONPF7 Batch Processing Timeline
    dateFormat X
    axisFormat %s
    
    section Initialization
    SQL Connection         :0, 2
    Environment Setup      :2, 4
    File Opening          :4, 6
    Parameter Validation  :6, 8
    
    section Transaction Setup
    Balance Loading       :8, 10
    IBPC Testing         :10, 12
    Transaction Validation :12, 15
    Password Verification :15, 18
    
    section Amount Processing
    Late Charge Calculation :crit, 18, 22
    Interest Calculation   :22, 25
    Balance Distribution   :25, 28
    Waiver Processing     :28, 30
    
    section Balance Updates
    Current Balance Update :30, 32
    Paid Through Calculation :32, 34
    GL Distribution       :34, 36
    File Updates         :36, 38
    
    section Completion
    Screen Updates       :38, 40
    Transaction Logging  :40, 41
    File Cleanup        :41, 42
    Program Exit        :42, 43</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPF7_Error_Handling.mmd">
                <h2>ğŸ“Š LONPF7 Error Handling</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpf7 error handling workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Error Detection] --> B{Error Type}
    
    B -->|Invalid State| C[State Parameter Error]
    B -->|Invalid Branch| D[Branch Record Error]
    B -->|Invalid Global| E[Global Record Error]
    B -->|Password| F[Password Validation Error]
    B -->|Amount| G[Amount Validation Error]
    B -->|Balance| H[Balance Limit Error]
    B -->|Transaction| I[Transaction Code Error]
    
    C --> C1[Display: INVALID STATE PARAMETER RECORD]
    C1 --> C2[Set ERRCD = X]
    C2 --> Z[Exit Program]
    
    D --> D1[Display: INVALID BRANCH RECORD]
    D1 --> D2[Set ERRCD = X]
    D2 --> Z
    
    E --> E1[Display: INVALID GLOBAL RECORD]
    E1 --> E2[Set ERRCD = X]
    E2 --> Z
    
    F --> F1{Password Type}
    F1 -->|WL/WI| F2[Display: WAIVERS NOT ALLOWED WITHOUT PASSWORD]
    F1 -->|OT/AP| F3[Display: TRANSACTION NOT ALLOWED WITHOUT PASSWORD]
    F1 -->|WO/W2| F4[Display: WRITE-OFFS NOT ALLOWED WITHOUT PASSWORD]
    F2 --> F5[Set ROUTE-CD = 7]
    F3 --> F5
    F4 --> F5
    F5 --> Y[Return to Entry]
    
    G --> G1{Amount Error Type}
    G1 -->|Zero Amount| G2[Display: 0.00 NOT ALLOWED]
    G1 -->|Negative Invalid| G3[Display: NEGATIVE AMOUNT NOT ALLOWED]
    G1 -->|Exceeds Balance| G4[Display Balance Exceeded Message]
    G2 --> Y
    G3 --> Y
    G4 --> Y
    
    H --> H1{Balance Type}
    H1 -->|Late Charge| H2[Display: EXCEEDS LATE CHARGE BALANCE OF X.XX]
    H1 -->|Interest| H3[Display: EXCEEDS INTEREST CHARGE BALANCE OF X.XX]
    H1 -->|Purchase| H4[Display: THE PURCHASE BAL IS X.XX]
    H2 --> Y
    H3 --> Y
    H4 --> Y
    
    I --> I1{Transaction Error}
    I1 -->|Interest Only| I2[Display: INTEREST BEARING LOANS ONLY]
    I1 -->|No LC Formula| I3[Display: NO LATE CHARGE FORMULA FOR THIS CLASS]
    I1 -->|Invalid Code| I4[Display: INVALID TRANSACTION CODE]
    I2 --> Y
    I3 --> Y
    I4 --> Y
    
    Y --> Y1[Clear Error Fields]
    Y1 --> Y2[Redisplay Entry Screen]
    Y2 --> Y3[Wait for User Input]
    Y3 --> A
    
    Z --> Z1[Close All Files]
    Z1 --> Z2[Return to Calling Program]
    
    style A fill:#ffebee
    style Z fill:#c8e6c9
    style Y fill:#fff9c4
    style B fill:#e3f2fd</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPF7_Main_Flow.mmd">
                <h2>ğŸ“Š LONPF7 Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpf7 main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Program Start] --> B[Parameter Setup]
    B --> C[SQL Connection]
    C --> D[Environment Setup]
    D --> E{Batch Payment?}
    E -->|Yes| F[Batch Payment Routine]
    E -->|No| G[Interactive Processing]
    
    F --> F1[Set Balance Records]
    F1 --> F2[Calculate Paid Through Date]
    F2 --> F3{Transaction Type?}
    F3 -->|OT| F4[Add Interest to Other Balance]
    F3 -->|RE| F5[Add Amount to Interest/Other]
    F3 -->|O2| F6[Add Amount to AP Interest/O2 Balance]
    F4 --> F7[End Routine]
    F5 --> F7
    F6 --> F7
    
    G --> G1[Initialize Routine]
    G1 --> G2[Validate Transaction Type]
    G2 --> G3[Password Verification]
    G3 --> G4[Amount Entry Processing]
    G4 --> G5[Entry Line Calculations]
    G5 --> G6[Display Entry Screen]
    G6 --> G7[Accept User Input]
    G7 --> G8[Update Balances]
    G8 --> G9[Save Screen State]
    G9 --> F7
    
    F7 --> H[Close Files]
    H --> I[Program Exit]
    
    style A fill:#e1f5fe
    style I fill:#c8e6c9
    style F fill:#fff3e0
    style G fill:#f3e5f5</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPF7_Transaction_Processing.mmd">
                <h2>ğŸ“Š LONPF7 Transaction Processing</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpf7 transaction processing workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Transaction Entry] --> B{Transaction Code}
    
    B -->|AL| C[Late Charge Assessment]
    B -->|AI| D[Additional Interest]
    B -->|AP| E[Applied Payment]
    B -->|WL| F[Waive Late Charges]
    B -->|WI| G[Waive Interest]
    B -->|WO| H[Write-off Other]
    B -->|OT| I[Other Transactions]
    B -->|O2| J[Other Type 2]
    B -->|W2| K[Write-off Type 2]
    B -->|OP| L[Other Payment]
    B -->|RE| M[Repossession Expense]
    
    C --> C1[Validate Loan Type]
    C1 --> C2[Calculate Late Charges]
    C2 --> C3[Apply Late Charge Formula]
    C3 --> N[Update Balances]
    
    D --> D1[Check Interest Bearing]
    D1 --> D2[Add Interest to Balance]
    D2 --> N
    
    E --> E1[Password Check]
    E1 --> E2[Amount Distribution]
    E2 --> E3[Apply to Other/Interest/Late Charge]
    E3 --> N
    
    F --> F1[Password Verification]
    F1 --> F2[Validate Waiver Amount]
    F2 --> F3[Reduce Late Charge Balance]
    F3 --> N
    
    G --> G1[Password Verification]
    G1 --> G2[Validate Waiver Amount]
    G2 --> G3[Reduce Interest Balance]
    G3 --> N
    
    H --> H1[Password Check]
    H1 --> H2[Validate Write-off Amount]
    H2 --> H3[Adjust Other Balance]
    H3 --> N
    
    I --> I1[Password Check]
    I1 --> I2[Amount Entry]
    I2 --> I3[Apply to Other Charges]
    I3 --> N
    
    J --> J1[Amount Entry]
    J1 --> J2[Apply to O2 Balance]
    J2 --> N
    
    K --> K1[Password Check]
    K1 --> K2[Write-off O2 Amount]
    K2 --> N
    
    L --> L1[Combine OT/AP Logic]
    L1 --> L2[Auto Distribution]
    L2 --> N
    
    M --> M1[Add Repo Expense]
    M1 --> M2[Update Interest/Other]
    M2 --> N
    
    N --> O[Calculate Current Balance]
    O --> P[Update Paid Through Date]
    P --> Q[Create Transaction Record]
    Q --> R[End Processing]
    
    style A fill:#e3f2fd
    style R fill:#c8e6c9
    style B fill:#fff9c4
    style N fill:#f3e5f5</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPF9_Auto_PL_Processing.mmd">
                <h2>ğŸ“Š LONPF9 Auto PL Processing</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpf9 auto pl processing workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[P&L Transaction Input] --> B{BR-AUTO-PL-REF-AC Setting?}
    
    B -->|"1" - PL Only| C{Transaction = PL?}
    B -->|"2" - PL/P2| D{Transaction = PL or P2?}
    B -->|"3" - PL/P2/P3| E{Transaction = PL/P2/P3?}
    B -->|Other| F[No Auto Processing]
    
    C -->|Yes| G[Auto Processing Enabled]
    C -->|No| F
    D -->|Yes| G
    D -->|No| F
    E -->|Yes| G
    E -->|No| F
    
    G --> H[Read Current Loan Balance]
    H --> I[Calculate Available Refund]
    I --> J{Refund Amount > 0?}
    
    J -->|No| K[No Refund Required]
    J -->|Yes| L[Generate Refund Transaction]
    
    L --> M[Create RI Transaction]
    M --> N[Update Rebate Amounts]
    N --> O[Calculate Acceleration Needed]
    O --> P{Acceleration Required?}
    
    P -->|No| Q[Refund Only]
    P -->|Yes| R[Generate AC Transaction]
    
    R --> S[Call LPCERN for Earnings]
    S --> T[Move Earnings to Income]
    T --> U[Update Accumulation Fields]
    U --> V[Set LP-TILLNO for AC]
    V --> W[Write AC Transaction]
    W --> X[Update LN-CURBAL]
    
    Q --> Y[Apply Refund to Balance]
    X --> Y
    Y --> Z[Update Payment History]
    Z --> AA[Update Audit Trail]
    AA --> BB[Return Success Status]
    
    K --> CC[Continue Normal Processing]
    F --> CC
    CC --> BB
    
    BB --> DD[Check Balance Consistency]
    DD --> EE{Balances Valid?}
    EE -->|Yes| FF[Commit Changes]
    EE -->|No| GG[Rollback and Error]
    
    style A fill:#e1f5fe
    style G fill:#e8f5e8
    style L fill:#fff3e0
    style R fill:#fff3e0
    style FF fill:#c8e6c9
    style GG fill:#ffcdd2</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPF9_Batch_Timeline.mmd">
                <h2>ğŸ“Š LONPF9 Batch Timeline</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpf9 batch timeline workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">gantt
    title LONPF9 Batch Processing Timeline
    dateFormat HH:mm
    axisFormat %H:%M
    
    section System Startup
    Initialize SQL Connection    :active, init, 00:00, 00:01
    Load Configuration Files     :config, after init, 00:02
    Validate Environment         :env, after config, 00:01
    
    section Batch Processing
    Read Batch Input File        :batch-read, after env, 00:05
    Validate Batch Transactions  :batch-val, after batch-read, 00:10
    Process P&L Transactions     :pl-proc, after batch-val, 00:15
    Generate Auto Refunds        :auto-ref, after pl-proc, 00:08
    Update Loan Balances         :balance-upd, after auto-ref, 00:12
    
    section Earnings Processing
    Calculate Earnings           :earn-calc, after balance-upd, 00:10
    Update Accumulations         :accum-upd, after earn-calc, 00:05
    Generate GL Entries          :gl-gen, after accum-upd, 00:08
    
    section Audit and Reporting
    Write Payment History        :pay-hist, after gl-gen, 00:06
    Update Cash Drawer           :cash-draw, after pay-hist, 00:03
    Generate Transaction Log     :trans-log, after cash-draw, 00:04
    Create Batch Report          :batch-rep, after trans-log, 00:05
    
    section System Cleanup
    Close Database Connections   :db-close, after batch-rep, 00:02
    Archive Processed Files      :archive, after db-close, 00:03
    System Shutdown              :shutdown, after archive, 00:01</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPF9_Call_Graph.mmd">
                <h2>ğŸ“Š LONPF9 Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpf9 call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[MAIN-PROGRAM] --> B[BATCH-PAYMENT-ROUTINE]
    A --> C[SELECTION-MODULE]
    
    C --> D[INITIALIZE]
    C --> E[DISPLAY-ENTRY-LN]
    C --> F[ACCEPT-ENTRY-RTN]
    
    F --> G[ACCEPT-ENTER-TILLNO]
    F --> H[ACCEPT-CHECK-VDUSTATUS]
    F --> I[ACCEPT-GL-DISBURSE]
    F --> J[ACCEPT-PO-CODE]
    
    I --> K[DISBURSE-OTHER-INIT]
    K --> L[DISBURSE-GLNO-ENTRY]
    K --> M[DISBURSE-TOTAL-VERIFY]
    
    C --> N[UPDATE-AUTOMATIC-PL]
    N --> O[READ-LN1-FILE]
    N --> P[CALCULATE-REFUND]
    N --> Q[GENERATE-AC-TRANSACTION]
    
    C --> R[ENTER-PLREASON]
    C --> S[SETUP-AC-LINE]
    C --> T[SET-PAYOFF-LINES]
    
    E --> U[DISPLAY-NEXT-DOWN]
    E --> V[DISPLAY-NEXT-UP]
    
    A --> W[ERROR-HANDLING]
    W --> X[DECLARE-ERROR]
    W --> Y[CLOSE-FILES]
    
    B --> Z[VALIDATE-AUTO-PL]
    B --> AA[PROCESS-BATCH-TRANSACTION]
    B --> BB[UPDATE-BATCH-BALANCES]
    
    style A fill:#e1f5fe
    style W fill:#ffebee
    style N fill:#e8f5e8
    style I fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPF9_Error_Handling.mmd">
                <h2>ğŸ“Š LONPF9 Error Handling</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpf9 error handling workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Error Detected] --> B{Error Type?}
    
    B -->|File I/O Error| C[DECLARE-ERROR Section]
    B -->|Validation Error| D[Business Rule Validation]
    B -->|System Error| E[System Error Handler]
    B -->|User Input Error| F[Input Validation Handler]
    
    C --> G[Close All Open Files]
    G --> H[Set ERRCD = 'X']
    H --> I[Log Fatal Error]
    I --> J[Terminate Program]
    
    D --> K{Severity Level?}
    K -->|Critical| L[Set ERRCD = 'E']
    K -->|Warning| M[Set ERRCD = 'P']
    K -->|Info| N[Continue Processing]
    
    L --> O[Display Error Message]
    M --> O
    O --> P[Set RETURN-STATUS]
    P --> Q[Update LOG-MSG]
    Q --> R[Return to Calling Program]
    
    E --> S[Log System Error]
    S --> T[Attempt Recovery]
    T --> U{Recovery Successful?}
    U -->|Yes| V[Continue Processing]
    U -->|No| W[Set Fatal Error]
    W --> H
    
    F --> X{Input Error Type?}
    X -->|Invalid Transaction Code| Y[Display Valid Codes]
    X -->|Invalid Amount| Z[Display Amount Rules]
    X -->|Invalid Date| AA[Display Date Format]
    X -->|Missing Required Field| BB[Highlight Required Fields]
    
    Y --> CC[Return to Input Screen]
    Z --> CC
    AA --> CC
    BB --> CC
    CC --> DD[Clear Error Flags]
    DD --> EE[Accept Corrected Input]
    
    N --> FF[Continue Normal Processing]
    V --> FF
    EE --> FF
    
    style A fill:#ffebee
    style H fill:#ffcdd2
    style J fill:#f44336
    style R fill:#fff3e0
    style FF fill:#c8e6c9</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPF9_Main_Flow.mmd">
                <h2>ğŸ“Š LONPF9 Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpf9 main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[MAIN-PROGRAM] --> B{Batch Mode?}
    B -->|Yes| C[BATCH-PAYMENT-ROUTINE]
    B -->|No| D[SELECTION-MODULE]
    
    C --> E[Validate Auto-PL Settings]
    E --> F[Process P&L Transaction]
    F --> G[Generate Auto Refund]
    G --> H[Update Loan Records]
    H --> Z[END-ROUTINE]
    
    D --> I[INITIALIZE]
    I --> J[DISPLAY-ENTRY-LN]
    J --> K[ACCEPT-ENTRY-RTN]
    K --> L{Transaction Valid?}
    L -->|No| M[Display Error]
    M --> J
    L -->|Yes| N{GL Distribution?}
    N -->|Yes| O[DISBURSE-OTHER]
    N -->|No| P[Process Transaction]
    O --> P
    P --> Q{Auto-PL Required?}
    Q -->|Yes| R[UPDATE-AUTOMATIC-PL]
    Q -->|No| S[Update Balances]
    R --> S
    S --> T[Write Payment History]
    T --> U[Update Cash Drawer]
    U --> Z
    
    Z --> V[Close Files]
    V --> W[SQL Disconnect]
    W --> X[Program End]
    
    style A fill:#e1f5fe
    style Z fill:#c8e6c9
    style X fill:#ffcdd2</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPF9_Transaction_Processing.mmd">
                <h2>ğŸ“Š LONPF9 Transaction Processing</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpf9 transaction processing workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Transaction Input] --> B{Transaction Code?}
    
    B -->|JD| C[Judgment Decision Processing]
    B -->|PL/P2/P3| D[P&L Processing]
    B -->|PI| E[Principal Interest Processing]
    B -->|PW| F[Principal Write-off Processing]
    B -->|P4/P5| G[Extended P&L Processing]
    B -->|RP| H[Repo Payment Processing]
    B -->|IR| I[Insurance Reversal Processing]
    B -->|AC| J[Acceleration Processing]
    B -->|BK| K[Set Bankruptcy Status]
    B -->|BD| L[Remove Bankruptcy Status]
    
    C --> M[Validate JD Conditions]
    M --> N[Apply Judgment Decision]
    N --> O[Update Account Status]
    
    D --> P{Auto-PL Enabled?}
    P -->|Yes| Q[Calculate Refund Amount]
    P -->|No| R[Standard P&L Processing]
    Q --> S[Generate AC Transaction]
    S --> T[Update Earnings]
    T --> U[Apply Refund]
    R --> V[Update P&L Balances]
    U --> V
    
    E --> W[Validate PI Transaction]
    W --> X[Update Principal/Interest]
    
    F --> Y[Validate Write-off Authority]
    Y --> Z[Process Principal Write-off]
    
    G --> AA[Process Dealer Reserve]
    AA --> BB[Update Extended Balances]
    
    H --> CC[Validate Repo Status]
    CC --> DD[Process Repo Payment]
    
    I --> EE[Validate Insurance Reversal]
    EE --> FF[Process Reversal]
    
    J --> GG[Calculate Acceleration]
    GG --> HH[Update Earnings to Income]
    
    K --> II[Set BK Status Flag]
    L --> JJ[Clear BK Status Flag]
    
    O --> KK[Common Update Processing]
    V --> KK
    X --> KK
    Z --> KK
    BB --> KK
    DD --> KK
    FF --> KK
    HH --> KK
    II --> KK
    JJ --> KK
    
    KK --> LL[Validate Balance Consistency]
    LL --> MM{Validation Passed?}
    MM -->|Yes| NN[Commit Transaction]
    MM -->|No| OO[Set Error Code]
    NN --> PP[Return Success]
    OO --> QQ[Return Error]
    
    style A fill:#e1f5fe
    style KK fill:#fff3e0
    style NN fill:#c8e6c9
    style OO fill:#ffcdd2</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPFB_Error_Handling.mmd">
                <h2>ğŸ“Š LONPFB Error Handling</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpfb error handling workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Error Detected] --> B{Error Type}
    B -->|Input Validation| C[Input Error Handler]
    B -->|File Access| D[File Error Handler]
    B -->|Business Logic| E[Business Rule Error]
    B -->|System Error| F[System Error Handler]
    
    C --> G[Log Input Error]
    G --> H[Display Error Message]
    H --> I[Return to Input Screen]
    I --> J[Allow Re-entry]
    
    D --> K[Log File Error]
    K --> L{File Critical?}
    L -->|Yes| M[Abort Transaction]
    L -->|No| N[Continue with Warning]
    
    E --> O[Log Business Error]
    O --> P[Display Business Rule Message]
    P --> Q{Override Allowed?}
    Q -->|Yes| R[Prompt for Password]
    Q -->|No| S[Reject Transaction]
    
    R --> T{Password Valid?}
    T -->|Yes| U[Allow Override]
    T -->|No| V[Access Denied]
    
    F --> W[Log System Error]
    W --> X[Display System Message]
    X --> Y[Initiate Recovery]
    Y --> Z{Recovery Successful?}
    Z -->|Yes| AA[Resume Processing]
    Z -->|No| BB[Abort with Error]
    
    J --> CC[Continue Processing]
    N --> CC
    U --> CC
    AA --> CC
    
    M --> DD[Error Exit]
    S --> DD
    V --> DD
    BB --> DD
    
    subgraph "Error Logging"
        EE[Write Error Log]
        FF[Update Audit Trail]
        GG[Create Error Report]
    end
    
    G --> EE
    K --> EE
    O --> EE
    W --> EE
    
    EE --> FF
    FF --> GG
    
    subgraph "Error Messages"
        HH["Invalid Account Number"]
        II["File Access Error"]
        JJ["Rebate Exceeds Original"]
        KK["System Resource Error"]
    end
    
    H --> HH
    L --> II
    P --> JJ
    X --> KK
    
    style C fill:#ffeb3b
    style D fill:#ff9800
    style E fill:#ff5722
    style F fill:#f44336
    style DD fill:#ffcdd2
    style CC fill:#c8e6c9</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPFB_Main_Flow.mmd">
                <h2>ğŸ“Š LONPFB Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpfb main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[MAIN-PROGRAM START] --> B[SQL-CONNECT]
    B --> C[GET-GPENV]
    C --> D[OPEN-SP1-FILE]
    D --> E[READ-SP1-FILE]
    E --> F{SP1 File Valid?}
    F -->|No| G[INVALID STATE PARAMETER ERROR]
    F -->|Yes| H[OPEN-BR-FILE]
    H --> I[READ-BR-FILE]
    I --> J{BR File Valid?}
    J -->|No| K[INVALID BRANCH RECORD ERROR]
    J -->|Yes| L[Set Environment Variables]
    L --> M{HOLD-BP-TRCD Present?}
    M -->|Yes| N[BATCH-PAYMENT-ROUTINE]
    M -->|No| O[SELECTION-MODULE]
    N --> P[END-ROUTINE]
    O --> P
    G --> Q[Error Exit]
    K --> Q

    subgraph "Batch Processing"
        N --> R[SET-BAL-IBPC-LPREC]
        R --> S{Transaction = F9?}
        S -->|Yes| T[Set PO Transaction]
        S -->|No| U{Rebate Transaction?}
        T --> V[REBATE-CANCEL-ROUTINE]
        U -->|No| V
        U -->|Yes| W[Skip Rebate Calculation]
        V --> X[Update LP-APCUR]
        W --> X
        X --> Y[Update LP-CURBAL]
        Y --> Z[PAID-THRU-CALCULATION]
        Z --> AA[COMPUTE-BW-INTPAID]
        AA --> BB[SAVE-SCREEN]
    end

    subgraph "Interactive Processing"
        O --> CC[Display Menu]
        CC --> DD[Accept User Input]
        DD --> EE[Process Selection]
        EE --> FF[Transaction Processing]
        FF --> GG[Screen Update]
    end

    style N fill:#e1f5fe
    style O fill:#f3e5f5
    style G fill:#ffcdd2
    style K fill:#ffcdd2</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPFB_Rebate_Calculation.mmd">
                <h2>ğŸ“Š LONPFB Rebate Calculation</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpfb rebate calculation workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Rebate Request] --> B[Load Account Data]
    B --> C[Determine Rebate Type]
    C --> D{Insurance Rebate?}
    D -->|Yes| E[REBATE-GET-INS-AMT]
    D -->|No| F{Interest Rebate?}
    
    E --> G[Load Insurance Data]
    G --> H{Addon Insurance?}
    H -->|Yes| I[Process Addon Records]
    H -->|No| J[Process Main Insurance]
    
    I --> K[Calculate Addon Rebate]
    J --> L[Calculate Main Rebate]
    K --> M[Apply Rebate Formula]
    L --> M
    
    M --> N{Formula Type}
    N -->|Rule of 78| O[Apply Rule 78 Formula]
    N -->|Actuarial| P[Apply Actuarial Formula]
    N -->|Pro-Rata| Q[Apply Pro-Rata Formula]
    N -->|Mexican Formula| R[Apply Mexican Formula]
    
    F -->|Yes| S[REBATE-INTEREST-ADJ]
    F -->|No| T{Service Charge?}
    
    S --> U[Load Interest History]
    U --> V[Calculate Interest Earned]
    V --> W[Apply Interest Rebate Formula]
    W --> X[Update Interest Rebate Amount]
    
    T -->|Yes| Y[REBATE-SERCHG-ADJ]
    T -->|No| Z{Maintenance Fee?}
    
    Y --> AA[Load Service Charge Data]
    AA --> BB[Calculate Service Charge Rebate]
    BB --> CC[Update Service Charge Rebate]
    
    Z -->|Yes| DD[REBATE-MAINTFEE-ADJ]
    Z -->|No| EE{Deferment?}
    
    DD --> FF[Load Maintenance Fee Data]
    FF --> GG[Calculate Maintenance Fee Rebate]
    GG --> HH[Update Maintenance Fee Rebate]
    
    EE -->|Yes| II[REBATE-DEFERMENT]
    EE -->|No| JJ[No Rebate Applicable]
    
    II --> KK[Load Deferment Data]
    KK --> LL[Calculate Deferment Rebate]
    LL --> MM[Update Deferment Rebate]
    
    O --> NN[Store Rebate Amount]
    P --> NN
    Q --> NN
    R --> NN
    X --> NN
    CC --> NN
    HH --> NN
    MM --> NN
    
    NN --> OO[Validate Rebate Amount]
    OO --> PP{Amount Valid?}
    PP -->|Yes| QQ[Apply Rebate to Account]
    PP -->|No| RR[Rebate Error]
    
    QQ --> SS[Update Account Balance]
    SS --> TT[Create Rebate Transaction]
    TT --> UU[Update Transaction History]
    UU --> VV[Rebate Complete]
    
    JJ --> WW[Exit - No Processing]
    RR --> XX[Error Exit]
    
    style E fill:#e8f5e8
    style S fill:#fff3e0
    style Y fill:#e3f2fd
    style DD fill:#fce4ec
    style II fill:#f1f8e9
    style RR fill:#ffcdd2</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPFB_Transaction_Processing.mmd">
                <h2>ğŸ“Š LONPFB Transaction Processing</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpfb transaction processing workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Transaction Input] --> B[VERIFY-REBATE-CANCEL]
    B --> C{Account Valid?}
    C -->|No| D[Account Error]
    C -->|Yes| E[INITIALIZE-ROUTINE]
    E --> F[REBATE-CANCEL-ROUTINE]
    F --> G{Transaction Type}
    
    G -->|RC/RA/RP/R1/R2/R3| H[Insurance Rebate Processing]
    G -->|RI| I[Interest Rebate Processing]
    G -->|RS| J[Service Charge Rebate]
    G -->|RM| K[Maintenance Fee Rebate]
    G -->|RD| L[Deferment Rebate]
    G -->|CC/CA/CP/C1/C2/C3| M[Insurance Cancellation]
    G -->|CD| N[Deferment Cancellation]
    
    H --> O[REBATE-GET-INS-AMT]
    O --> P[Calculate Insurance Rebate]
    P --> Q[Update REB-AMOUNT Array]
    
    I --> R[REBATE-INTEREST-ADJ]
    R --> S[Load Interest Parameters]
    S --> T[Apply Interest Formula]
    T --> U[Update LP-INTPAID]
    
    J --> V[REBATE-SERCHG-ADJ]
    V --> W[Calculate Service Charge Rebate]
    W --> X[Update Service Charge Balance]
    
    K --> Y[REBATE-MAINTFEE-ADJ]
    Y --> Z[Calculate Maintenance Fee Rebate]
    Z --> AA[Update Maintenance Fee Balance]
    
    L --> BB[REBATE-DEFERMENT]
    BB --> CC[Calculate Deferment Rebate]
    CC --> DD[Update Deferment Balance]
    
    M --> EE[Cancel Insurance Charges]
    EE --> FF[Reverse Insurance Premiums]
    
    N --> GG[Cancel Deferment Charges]
    GG --> HH[Reverse Deferment Fees]
    
    Q --> II[TRANS-AMOUNT-ENTRY]
    U --> II
    X --> II
    AA --> II
    DD --> II
    FF --> II
    HH --> II
    
    II --> JJ[Update Account Balance]
    JJ --> KK[Create Transaction Record]
    KK --> LL[Update Files]
    LL --> MM[Transaction Complete]
    
    D --> NN[Error Exit]
    
    style H fill:#e8f5e8
    style I fill:#fff3e0
    style J fill:#e3f2fd
    style K fill:#fce4ec
    style L fill:#f1f8e9
    style M fill:#ffebee
    style N fill:#ffebee</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPFC_Batch_Timeline.mmd">
                <h2>ğŸ“Š LONPFC Batch Timeline</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpfc batch timeline workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">gantt
    title LONPFC Batch Processing Timeline
    dateFormat HH:mm
    axisFormat %H:%M
    
    section System Initialization
    SQL Connection Setup         :active, init, 00:00, 00:01
    Load State Parameters        :sp-load, after init, 00:01
    Load Branch Configuration    :br-load, after sp-load, 00:01
    Environment Variable Setup   :env-setup, after br-load, 00:01
    
    section Pre-Processing
    Validate Input Files         :validate, after env-setup, 00:03
    Initialize Working Storage   :ws-init, after validate, 00:01
    Setup Processing Flags       :flags, after ws-init, 00:01
    
    section Core Payment Processing
    Read Payment Transactions    :read-pay, after flags, 00:08
    Validate Payment Data        :val-pay, after read-pay, 00:12
    Calculate Payment Distribution :calc-dist, after val-pay, 00:15
    Process Late Charges         :late-chg, after calc-dist, 00:10
    Handle Escrow Collections    :escrow, after late-chg, 00:08
    
    section Specialized Processing
    Process Deferments           :defer, after escrow, 00:12
    Handle Payment Exceptions    :except, after defer, 00:06
    Process Non-cash Payments    :noncash, after except, 00:08
    Charge-off Processing        :chgoff, after noncash, 00:05
    
    section Balance Management
    Update Loan Balances         :bal-upd, after chgoff, 00:18
    Validate Balance Consistency :bal-val, after bal-upd, 00:08
    Calculate Accumulations      :accum, after bal-val, 00:06
    
    section Earnings and GL
    Process Earnings Calculations :earn, after accum, 00:12
    Generate GL Distributions    :gl-dist, after earn, 00:10
    Update Cash Drawer Records   :cash, after gl-dist, 00:05
    
    section Audit and History
    Write Payment History        :pay-hist, after cash, 00:08
    Create Transaction Logs      :trans-log, after pay-hist, 00:06
    Update Audit Trail          :audit, after trans-log, 00:04
    
    section Reporting and Cleanup
    Generate Processing Reports  :reports, after audit, 00:10
    Close Database Connections   :db-close, after reports, 00:02
    Archive Processed Files      :archive, after db-close, 00:05
    System Cleanup              :cleanup, after archive, 00:02</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPFC_Call_Graph.mmd">
                <h2>ğŸ“Š LONPFC Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpfc call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[MAIN-PROGRAM] --> B[SQL-CONNECT]
    A --> C[GET-GPENV]
    A --> D[SELECTION-MODULE]
    
    D --> E[VALIDATE-TRANSACTION-TYPE]
    D --> F[DISPLAY-ACCOUNT-INFO]
    D --> G[ACCEPT-TRANSACTION-DATA]
    D --> H[PROCESS-PAYMENT-LOGIC]
    
    H --> I[CALCULATE-PAYMENT-DISTRIBUTION]
    H --> J[APPLY-LATE-CHARGES]
    H --> K[PROCESS-ESCROW-COLLECTION]
    H --> L[HANDLE-DEFERMENT-PROCESSING]
    
    J --> M[LPLCAP-ROUTINE]
    K --> N[ESAPPL-PROCESSING]
    L --> O[DEFERMENT-CALCULATION]
    
    I --> P[VALIDATE-BALANCE-CONSISTENCY]
    P --> Q[UPDATE-LOAN-BALANCES]
    Q --> R[WRITE-PAYMENT-HISTORY]
    R --> S[UPDATE-CASH-DRAWER]
    
    D --> T[SPECIALIZED-PROCESSING]
    T --> U[PROCESS-Z2-TRANSACTION]
    T --> V[PROCESS-SS-TRANSACTION]
    T --> W[PROCESS-PX-TRANSACTION]
    T --> X[PROCESS-NONCASH-PAYMENTS]
    
    V --> Y[AUTO-REPO-WINDOW-CHECK]
    X --> Z[GL-DISTRIBUTION-PROCESSING]
    Z --> AA[ALLENT-ROUTINE]
    
    D --> BB[ERROR-HANDLING-ROUTINES]
    BB --> CC[CONDITIONAL-SEND-MESS]
    BB --> DD[ACCEPT-F4-BYPASS]
    BB --> EE[TEST-FOR-PE-AL]
    
    A --> FF[FILE-MANAGEMENT]
    FF --> GG[OPEN-CLOSE-ROUTINES]
    FF --> HH[READ-WRITE-OPERATIONS]
    FF --> II[ERROR-RECOVERY]
    
    A --> JJ[EARNINGS-INTEGRATION]
    JJ --> KK[LPEARN-PROCESSING]
    JJ --> LL[LPCERN-PROCESSING]
    JJ --> MM[ACCUMULATION-UPDATES]
    
    style A fill:#e1f5fe
    style D fill:#fff3e0
    style H fill:#e8f5e8
    style BB fill:#ffebee
    style JJ fill:#f3e5f5</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPFC_Deferment_Processing.mmd">
                <h2>ğŸ“Š LONPFC Deferment Processing</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpfc deferment processing workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Deferment Request] --> B[Validate Transaction Code]
    B --> C{Valid Deferment Code?}
    C -->|No| D[Display Error - Invalid Code]
    C -->|Yes| E{Deferment Code Type?}
    
    E -->|DF| F[Standard Deferment]
    E -->|D2-D9| G[Specialized Deferment]
    
    F --> H[Check SP-LCFRMLA Settings]
    G --> H
    H --> I{Formula Supports Deferment?}
    I -->|No| J[Display Error - Formula Conflict]
    I -->|Yes| K[Calculate Deferment Eligibility]
    
    K --> L{Deferment Formula Type?}
    L -->|97| M[Formula 97: 1/3 Payment or Interest]
    L -->|98| N[Formula 98: Interest-bearing Variation]
    L -->|99| O[Formula 99: Complex Interest-bearing]
    L -->|Standard| P[Standard Deferment Calculation]
    
    M --> Q[Calculate 1/3 of Regular Payment]
    Q --> R[Compare with Interest Due]
    R --> S[Use Lesser Amount]
    S --> T[Apply Interest-bearing Charges]
    
    N --> U[Calculate Interest-bearing Amount]
    U --> V[Apply to LP-APINT and LP-APCUR]
    V --> T
    
    O --> W[Complex Interest Calculation]
    W --> X[Validate Against Payment Limits]
    X --> T
    
    P --> Y[Calculate Standard Deferment]
    Y --> Z[Apply Non-interest Bearing]
    Z --> AA[Update Deferment Counter]
    
    T --> AA
    AA --> BB{Deferment Amount > 0?}
    BB -->|No| CC[No Deferment Applied]
    BB -->|Yes| DD[Apply Deferment Amount]
    
    DD --> EE[Update Paid-Through Date]
    EE --> FF[Calculate New Payment Schedule]
    FF --> GG[Update Deferment History]
    GG --> HH{Password Override Available?}
    
    HH -->|Yes| II[Allow Manual Override]
    HH -->|No| JJ[Use Calculated Amount]
    
    II --> KK{Override Amount Valid?}
    KK -->|No| LL[Display Override Error]
    KK -->|Yes| MM[Apply Override Amount]
    
    JJ --> NN[Apply Calculated Amount]
    MM --> NN
    NN --> OO[Update LN-LCPDTH-DATE]
    OO --> PP[Update LN-TOTNODEFACT]
    PP --> QQ[Update YTD Accumulations]
    QQ --> RR[Write Deferment Record]
    RR --> SS[Return Success Status]
    
    CC --> TT[Continue Without Deferment]
    TT --> SS
    
    D --> UU[Return to Input]
    J --> UU
    LL --> UU
    
    style A fill:#e1f5fe
    style DD fill:#fff3e0
    style SS fill:#c8e6c9
    style D fill:#ffcdd2
    style J fill:#ffcdd2</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPFC_Error_Handling.mmd">
                <h2>ğŸ“Š LONPFC Error Handling</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpfc error handling workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Error Detected] --> B{Error Category?}
    
    B --> C[File Error Handler]
    B --> D[Business Rule Violation]
    B --> E[Payment Error Handler]
    B --> F[Balance Error Handler]
    B --> G[Input Error Handler]
    
    C --> H[Check File Status]
    H --> I{Critical File Error?}
    I --> J[Set ERRCD X]
    I --> K[Set ERRCD E]
    J --> L[Close All Files]
    K --> M[Continue with Warning]
    L --> N[Terminate Program]
    
    D --> O{Rule Violation Type?}
    O --> P[Account Status Error]
    O --> Q[Transaction Limit Error]
    O --> R[Date Validation Error]
    O --> S[Authorization Error]
    
    P --> T[Display Account Status Message]
    Q --> U[Display Limit Exceeded Message]
    R --> V[Display Date Error Message]
    S --> W[Display Authorization Required]
    
    E --> X{Payment Error Type?}
    X --> Y[Display Minimum Payment Required]
    X --> Z[Display Maximum Payment Allowed]
    X --> DIST_ERR[Display Distribution Error]
    
    F --> BAL_CHK{Balance Error Type?}
    BAL_CHK --> RECALC[Recalculate Distribution]
    BAL_CHK --> NEG_BAL[Check Revolving Account Rules]
    BAL_CHK --> ADJ_PAY[Adjust Payment Amount]
    
    G --> INP_CHK{Input Error Type?}
    INP_CHK --> HIGHLIGHT[Highlight Required Fields]
    INP_CHK --> FORMAT[Display Format Requirements]
    INP_CHK --> RANGE[Display Valid Range]
    
    T --> ROUTE[Set ROUTE-CD for Message Display]
    U --> ROUTE
    V --> ROUTE
    W --> ROUTE
    Y --> ROUTE
    Z --> ROUTE
    DIST_ERR --> ROUTE
    
    ROUTE --> SEND[CONDITIONAL-SEND-MESS]
    SEND --> ROUTE_CHK{Route-CD Check}
    ROUTE_CHK --> DISPLAY[Display Message to User]
    ROUTE_CHK --> LOG[Log Message Only]
    
    RECALC --> RETURN_DIST[Return to Distribution Calculation]
    NEG_BAL --> ALLOW_NEG{Allow Negative Balance?}
    ALLOW_NEG --> CONTINUE[Continue Processing]
    ALLOW_NEG --> PREVENT[Prevent Transaction]
    ADJ_PAY --> RETURN_PAY[Return to Payment Entry]
    
    HIGHLIGHT --> RETURN_INPUT[Return to Input Screen]
    FORMAT --> RETURN_INPUT
    RANGE --> RETURN_INPUT
    
    DISPLAY --> WAIT[Wait for User Response]
    LOG --> BACKGROUND[Continue Background Processing]
    M --> BACKGROUND
    CONTINUE --> BACKGROUND
    
    WAIT --> USER_ACTION{User Action?}
    USER_ACTION --> RETURN_PROC[Return to Processing]
    USER_ACTION --> EXIT[Exit Transaction]
    USER_ACTION --> HELP[Display Help Screen]
    HELP --> WAIT
    
    N --> TERM[Program Termination]
    PREVENT --> ERR_STATUS[Set Error Status]
    EXIT --> ERR_STATUS
    ERR_STATUS --> RETURN_ERR[Return Error to Caller]
    
    RETURN_DIST --> RETURN_PROC
    RETURN_PAY --> RETURN_PROC
    RETURN_INPUT --> RETURN_PROC
    RETURN_PROC --> RESUME[Resume Normal Processing]
    BACKGROUND --> RESUME
    
    style A fill:#ffebee
    style J fill:#ffcdd2
    style N fill:#f44336
    style RESUME fill:#c8e6c9
    style RETURN_ERR fill:#ff9800</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPFC_Late_Charge_Processing.mmd">
                <h2>ğŸ“Š LONPFC Late Charge Processing</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpfc late charge processing workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Late Charge Processing Entry] --> B[Check SP-LCFRMLA Setting]
    B --> C{Late Charge Formula Type?}
    
    C -->|B,G,J,K| D[Principal-Only Formula]
    C -->|P| E[Percentage-Based Formula]
    C -->|F,I,L,M| F[Fixed Amount Formula]
    C -->|Other| G[Standard Formula Processing]
    
    D --> H[Set LN-LC-CODE to Zero]
    H --> I[Prevent LPLCAP Override]
    I --> J[Calculate Principal-Based LC]
    
    E --> K[Calculate Percentage of Balance]
    K --> L[Apply Percentage Rate]
    L --> M[Validate Against Limits]
    
    F --> N[Apply Fixed Late Charge Amount]
    N --> O[Validate Against Payment Capacity]
    
    G --> P[Call LPLCAP Routine]
    P --> Q[Calculate Standard Late Charge]
    
    J --> R[Validate Late Charge Amount]
    M --> R
    O --> R
    Q --> R
    
    R --> S{LC Amount > 0?}
    S -->|No| T[No Late Charge Applied]
    S -->|Yes| U[Apply Late Charge]
    
    U --> V{Payment Covers LC?}
    V -->|No| W[Partial LC Application]
    V -->|Yes| X[Full LC Application]
    
    W --> Y[Apply Partial Amount]
    Y --> Z[Update LC Owed Balance]
    Z --> AA[Set LCAP-APP Amount]
    
    X --> BB[Apply Full LC Amount]
    BB --> CC[Clear LC Due Balance]
    CC --> DD[Update LCAP-APP]
    
    AA --> EE[Update LN-TOTLCHG]
    DD --> EE
    EE --> FF[Update LC Paid-Through Date]
    FF --> GG{Re-apply LC Required?}
    
    GG -->|Yes| HH[Check Re-apply Conditions]
    GG -->|No| II[Late Charge Complete]
    
    HH --> JJ{Formula Allows Re-apply?}
    JJ -->|Yes| KK[Re-apply Late Charges]
    JJ -->|No| II
    
    KK --> LL[Calculate Re-apply Amount]
    LL --> MM[Update LP-APINTOWE]
    MM --> NN[Apply to Payment Distribution]
    NN --> II
    
    T --> OO[Continue Without LC]
    II --> PP[Update Late Charge History]
    OO --> PP
    PP --> QQ[Return LC Processing Status]
    
    style A fill:#e1f5fe
    style U fill:#fff3e0
    style II fill:#c8e6c9
    style T fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPFC_Main_Flow.mmd">
                <h2>ğŸ“Š LONPFC Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpfc main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[MAIN-PROGRAM] --> B[Initialize SQL Connection]
    B --> C[Load Configuration Parameters]
    C --> D[Validate Branch Settings]
    D --> E[Setup Processing Environment]
    E --> F[SELECTION-MODULE]
    
    F --> G{Transaction Type?}
    
    G -->|Payment| H[Payment Processing Route]
    G -->|Deferment| I[Deferment Processing Route]
    G -->|Exception| J[Exception Processing Route]
    G -->|Specialized| K[Specialized Processing Route]
    
    H --> L[Validate Payment Amount]
    L --> M[Calculate Payment Distribution]
    M --> N[Apply Late Charges]
    N --> O[Process Escrow Collection]
    O --> P[Update Loan Balances]
    
    I --> Q[Validate Deferment Eligibility]
    Q --> R[Calculate Deferment Amount]
    R --> S[Apply Deferment Charges]
    S --> T[Update Paid-Through Dates]
    T --> P
    
    J --> U[Validate Exception Conditions]
    U --> V[Process Payment Exception]
    V --> W[Handle Overpayment/Shortage]
    W --> P
    
    K --> X{Specialized Type?}
    X -->|Z2| Y[OT2 Balance Paydown]
    X -->|SS| Z[Sale/Settlement Processing]
    X -->|PX| AA[Partial Charge-off]
    X -->|PN/PZ| BB[Non-cash Payment]
    X -->|IN| CC[Insurance Loss]
    
    Y --> P
    Z --> DD[Auto Repo Window Check]
    DD --> P
    AA --> P
    BB --> EE[GL Distribution Processing]
    EE --> P
    CC --> P
    
    P --> FF[Validate Balance Consistency]
    FF --> GG{Validation Passed?}
    GG -->|Yes| HH[Write Payment History]
    GG -->|No| II[Set Error Codes]
    
    HH --> JJ[Update Cash Drawer]
    JJ --> KK[Create GL Entries]
    KK --> LL[Update Earnings/Accumulations]
    LL --> MM[END-ROUTINE]
    
    II --> NN[Display Error Message]
    NN --> MM
    
    MM --> OO[Close Files]
    OO --> PP[SQL Disconnect]
    PP --> QQ[Program End]
    
    style A fill:#e1f5fe
    style F fill:#fff3e0
    style P fill:#e8f5e8
    style MM fill:#c8e6c9
    style II fill:#ffcdd2</div>
                </div>
            </div>
            <div class="diagram-section" id="LONPFC_Payment_Processing.mmd">
                <h2>ğŸ“Š LONPFC Payment Processing</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the lonpfc payment processing workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Payment Input] --> B[Validate Payment Amount]
    B --> C{Amount Valid?}
    C -->|No| D[Display Error Message]
    D --> E[Return to Input]
    E --> A
    
    C -->|Yes| F[Calculate Total Obligations]
    F --> G[INT + LC + OTH + OT2 + ESC]
    G --> H{Payment >= Obligations?}
    
    H -->|No| I[Partial Payment Processing]
    H -->|Yes| J[Full Payment Processing]
    
    I --> K[Calculate Distribution Priority]
    K --> L[Apply to Late Charges First]
    L --> M[Apply to Interest Due]
    M --> N[Apply to Other Charges]
    N --> O[Apply to Other 2 Charges]
    O --> P[Apply Remainder to Principal]
    
    J --> Q[Apply to All Obligations]
    Q --> R[Calculate Principal Payment]
    R --> S{Excess Payment?}
    S -->|Yes| T[Handle Overpayment]
    S -->|No| U[Standard Distribution]
    
    T --> V{Revolving Account?}
    V -->|Yes| W[Allow Negative Balance]
    V -->|No| X[Prevent Overpayment]
    X --> Y[Adjust Payment Amount]
    Y --> U
    W --> U
    
    P --> Z[Validate Balance Consistency]
    U --> Z
    Z --> AA{Math Consistent?}
    AA -->|No| BB[Recalculate Distribution]
    BB --> K
    
    AA -->|Yes| CC[Apply Late Charges]
    CC --> DD[Call LPLCAP Routine]
    DD --> EE[Update Late Charge Balances]
    EE --> FF[Calculate Escrow Amount]
    FF --> GG{Escrow Required?}
    
    GG -->|Yes| HH[Validate Escrow Amount]
    GG -->|No| II[Skip Escrow Processing]
    
    HH --> JJ{Escrow <= Available?}
    JJ -->|No| KK[Reduce Escrow to Maximum]
    JJ -->|Yes| LL[Apply Full Escrow]
    KK --> LL
    
    LL --> MM[Update All Balances]
    II --> MM
    MM --> NN[Calculate New Current Balance]
    NN --> OO[Update Accumulation Fields]
    OO --> PP[Write Payment History Record]
    PP --> QQ[Update Cash Drawer]
    QQ --> RR[Return Success Status]
    
    style A fill:#e1f5fe
    style CC fill:#fff3e0
    style MM fill:#e8f5e8
    style RR fill:#c8e6c9
    style D fill:#ffcdd2</div>
                </div>
            </div>
            <div class="diagram-section" id="MAIN-PROGRAM_Batch_Timeline.mmd">
                <h2>ğŸ“Š MAIN-PROGRAM Batch Timeline</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the main-program batch timeline workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">gantt
    title MAIN-PROGRAM Processing Timeline
    dateFormat X
    axisFormat %s
    
    section Environment Setup
    GB/SETENV Call           :env1, 0, 1
    SQL Connection          :env2, after env1, 2
    GET-GPENV              :env3, after env2, 1
    Input Processing       :env4, after env3, 2
    
    section Initialization
    INITIALIZATION         :init1, after env4, 3
    Error Check           :init2, after init1, 1
    
    section Validation Phase
    Branch Validation     :val1, after init2, 2
    Reference Code Check  :val2, after val1, 2
    Machine Validation    :val3, after val2, 1
    Global Config Setup   :val4, after val3, 2
    Business Day Check    :val5, after val4, 2
    
    section Account Processing
    Account Lookup        :acc1, after val5, 2
    Account Validation    :acc2, after acc1, 3
    Payment Validation    :acc3, after acc2, 4
    G/L Interface Check   :acc4, after acc3, 1
    
    section Transaction Processing
    Transaction Routing   :trans1, after acc4, 1
    Module Processing     :trans2, after trans1, 5
    
    section Completion
    Success Logging       :comp1, after trans2, 1
    File Cleanup         :comp2, after comp1, 2
    Resource Cleanup     :comp3, after comp2, 1</div>
                </div>
            </div>
            <div class="diagram-section" id="MAIN-PROGRAM_Call_Graph.mmd">
                <h2>ğŸ“Š MAIN-PROGRAM Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the main-program call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[MAIN-PROGRAM SECTION] --> B[GET-GPENV]
    A --> C[INITIALIZATION]
    A --> D[READ-BR-FILE]
    A --> E[OPEN-CD1-FILE]
    A --> F[READ-CD1-FILE]
    A --> G[OPEN-GB-FILE]
    A --> H[READ-GB-FILE]
    A --> I[CLOSE-GB-FILE]
    A --> J[OPEN-LN1-FILE]
    A --> K[OPEN-BW1-FILE]
    A --> L[OPEN-RC2-FILE]
    A --> M[READ-RC2-FILE]
    A --> N[CLOSE-RC2-FILE]
    A --> O[LOAD-OPEN-FILE]
    A --> P[ACCESS-CALL]
    A --> Q[OPEN-OP-FILE]
    A --> R[READ-LN1-FILE]
    A --> S[CONVERT-MMDDYY-TO-YYYYMMDD]
    A --> T[READ-GI1-FILE]
    
    A --> U{Transaction Type}
    U -->|Bankruptcy| V[BANKRUPT-POSTING]
    U -->|Reversal| W[REVERSAL-POSTING]
    U -->|Other Charges| X[OTHER-CHG-POSTING]
    U -->|Payoff| Y[PAYOFF-POSTING]
    U -->|Regular| Z[PAYMENT-POSTING]
    
    A --> AA[CREATE-LOG]
    A --> BB[CLOSE-OP-FILE]
    A --> CC[REMOVE-WORKFILE]
    
    style A fill:#e1f5fe
    style U fill:#fff3e0
    style V fill:#f3e5f5
    style W fill:#f3e5f5
    style X fill:#f3e5f5
    style Y fill:#f3e5f5
    style Z fill:#f3e5f5</div>
                </div>
            </div>
            <div class="diagram-section" id="MAIN-PROGRAM_Environment_Setup.mmd">
                <h2>ğŸ“Š MAIN-PROGRAM Environment Setup</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the main-program environment setup workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[MAIN-PROGRAM Start] --> B[Call GB/SETENV]
    B --> C[Establish SQL Connection]
    C --> D[PERFORM GET-GPENV]
    D --> E[Parse INPUT-STRING to BT-REC]
    E --> F[Convert BT fields to BP-REC]
    F --> G[Date Conversion MMDDYY to YYYYMMDD]
    G --> H[PERFORM INITIALIZATION]
    H --> I{Initialization Success?}
    
    I -->|No| J[GO TO END-PROGRAM]
    I -->|Yes| K[Environment Setup Complete]
    
    style A fill:#e1f5fe
    style D fill:#f3e5f5
    style H fill:#fff3e0
    style I fill:#fce4ec
    style K fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="MAIN-PROGRAM_Main_Flow.mmd">
                <h2>ğŸ“Š MAIN-PROGRAM Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the main-program main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[MAIN-PROGRAM SECTION] --> B[Environment Setup]
    B --> C[Input Processing]
    C --> D[System Initialization]
    D --> E[Branch Validation]
    E --> F[Reference Code Processing]
    F --> G[Machine Validation]
    G --> H[File System Setup]
    H --> I[Business Day Validation]
    I --> J[Account Validation]
    J --> K[Transaction Validation]
    K --> L[Payment Amount Validation]
    L --> M[G/L Interface Check]
    M --> N{Transaction Type}
    
    N -->|Bankruptcy| O[BANKRUPT-POSTING]
    N -->|Reversal| P[REVERSAL-POSTING]
    N -->|Other Charges| Q[OTHER-CHG-POSTING]
    N -->|Payoff| R[PAYOFF-POSTING]
    N -->|Regular Payment| S[PAYMENT-POSTING]
    
    O --> T[Success Verification]
    P --> T
    Q --> T
    R --> T
    S --> T
    
    T --> U[Logging and Cleanup]
    U --> V[END-ROUTINE]
    
    style A fill:#e1f5fe
    style D fill:#f3e5f5
    style N fill:#fff3e0
    style T fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="MAIN-PROGRAM_Transaction_Routing.mmd">
                <h2>ğŸ“Š MAIN-PROGRAM Transaction Routing</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the main-program transaction routing workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Transaction Routing] --> B{CD-BR-FILE-TYPE}
    B -->|B| C[BANKRUPT-POSTING]
    B -->|Other| D{BP-TRCD}
    
    D -->|RV| E[REVERSAL-POSTING]
    D -->|OT| F[OTHER-CHG-POSTING]
    D -->|Other| G{Payment Amount Check}
    
    G -->|Large Amount & Payoff| H[PAYOFF-POSTING]
    G -->|Regular Amount| I[PAYMENT-POSTING]
    
    C --> J[Check POSTING-ERRCD]
    E --> J
    F --> J
    H --> J
    I --> J
    
    J --> K{Error Status}
    K -->|Error| L[Status 59: Posting Error]
    K -->|Success| M[Status 0: Success]
    
    style A fill:#e1f5fe
    style B fill:#fff3e0
    style D fill:#fff3e0
    style G fill:#fff3e0
    style M fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="MAIN-PROGRAM_Validation_Processing.mmd">
                <h2>ğŸ“Š MAIN-PROGRAM Validation Processing</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the main-program validation processing workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Branch Validation] --> B[READ-BR-FILE]
    B --> C{Branch Found?}
    C -->|No| D[Status 2: Branch Not Found]
    C -->|Yes| E[Reference Code Validation]
    
    E --> F[OPEN-CD1-FILE]
    F --> G[READ-CD1-FILE]
    G --> H{Reference Code Valid?}
    H -->|No| I[Status 3: Invalid Ref Code]
    H -->|Yes| J[Machine Validation]
    
    J --> K{Branch on This Machine?}
    K -->|No| L[Status 4: Wrong Machine]
    K -->|Yes| M[Global Record Check]
    
    M --> N[READ-GB-FILE]
    N --> O{Global Record Found?}
    O -->|No| P[Status 5: Missing Global]
    O -->|Yes| Q[Business Day Check]
    
    Q --> R[READ-RC2-FILE]
    R --> S{Day Open?}
    S -->|No| T[Status 6: Day Not Open]
    S -->|Yes| U[Account Validation]
    
    U --> V[READ-LN1-FILE]
    V --> W{Account Found?}
    W -->|No| X[Status: Account Not Found]
    W -->|Yes| Y[Validation Complete]
    
    style A fill:#e1f5fe
    style C fill:#fce4ec
    style H fill:#fce4ec
    style K fill:#fce4ec
    style Y fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="TIM360_Call_Graph.mmd">
                <h2>ğŸ“Š TIM360 Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the tim360 call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[TIM360] --> B[TIMALL]
    B --> C[DATER-ROUTINE]
    C --> D[NEWDATE]
    B --> E[Date Validation]
    B --> F[Month Calculation]
    B --> G[Day Calculation]
    B --> H[Comparison Logic]
    
    I[Calling Programs] --> A
    I --> |"360-day calculations"| A
    I --> |"Financial interest"| A
    I --> |"Payment scheduling"| A
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style I fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="TIM360_Main_Flow.mmd">
                <h2>ğŸ“Š TIM360 Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the tim360 main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[TIM360 Entry] --> B[Set ELAPSED-YRTYPE = 360]
    B --> C[Call TIMALL]
    C --> D[Date Validation Check]
    D --> E{Valid Dates?}
    E -->|No| F[Set Zero Values]
    E -->|Yes| G[Perform Date Calculations]
    G --> H[Calculate Elapsed Days]
    H --> I[Calculate Elapsed Months]
    I --> J[Calculate Remainder]
    J --> K[Set Comparison Results]
    K --> L[Return Results]
    F --> L
    
    style A fill:#e1f5fe
    style L fill:#e8f5e8
    style E fill:#fff3e0
    style F fill:#ffebee</div>
                </div>
            </div>
            <div class="diagram-section" id="TIM365_Call_Graph.mmd">
                <h2>ğŸ“Š TIM365 Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the tim365 call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[TIM365] --> B[TIMALL]
    B --> C[DATER-ROUTINE]
    C --> D[NEWDATE]
    B --> E[Date Validation]
    B --> F[Month Calculation]
    B --> G[Day Calculation]
    B --> H[Comparison Logic]
    
    I[Calling Programs] --> A
    I --> |"Standard calculations"| A
    I --> |"General accounting"| A
    I --> |"Business periods"| A
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style I fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="TIM365_Main_Flow.mmd">
                <h2>ğŸ“Š TIM365 Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the tim365 main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[TIM365 Entry] --> B[Set ELAPSED-YRTYPE = 365]
    B --> C[Call TIMALL]
    C --> D[Date Validation Check]
    D --> E{Valid Dates?}
    E -->|No| F[Set Zero Values]
    E -->|Yes| G[Perform Date Calculations]
    G --> H[Calculate Elapsed Days]
    H --> I[Calculate Elapsed Months]
    I --> J[Calculate Remainder]
    J --> K[Set Comparison Results]
    K --> L[Return Results]
    F --> L
    
    style A fill:#e1f5fe
    style L fill:#e8f5e8
    style E fill:#fff3e0
    style F fill:#ffebee</div>
                </div>
            </div>
            <div class="diagram-section" id="TIMALL_Call_Graph.mmd">
                <h2>ğŸ“Š TIMALL Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the timall call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[TIMALL] --> B[DATER-ROUTINE]
    B --> C[NEWDATE]
    B --> D[Date Calculation Logic]
    
    E[TIM360] --> A
    F[TIM365] --> A
    G[TIM361] --> A
    H[TIM362] --> A
    I[TIM367] --> A
    J[TIM999] --> A
    K[TIM] --> A
    L[TIMUPER] --> A
    
    M[Financial Modules] --> E
    N[General Accounting] --> F
    O[Special Processing] --> G
    P[Business Logic] --> A
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style E fill:#fff3e0
    style F fill:#fff3e0
    style G fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="TIMALL_Main_Flow.mmd">
                <h2>ğŸ“Š TIMALL Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the timall main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[TIMALL Entry] --> B{NUM-DATE or SYS-DATE = 0?}
    B -->|Yes| C[Set Zero Values]
    C --> D[Set ELAPSED-RESULTS to Spaces]
    D --> E[Return]
    
    B -->|No| F[Save NDTE-DATE]
    F --> G[Save DATER-UNITPER-INFO]
    G --> H[Set Unit Period Code = M]
    H --> I[Set Frequency = 1]
    I --> J[Set Action Code = E]
    J --> K[Call DATER-ROUTINE]
    K --> L[Restore DATER-UNITPER-INFO]
    L --> M[Restore NDTE-DATE]
    M --> N[Return with Results]
    
    style A fill:#e1f5fe
    style E fill:#e8f5e8
    style N fill:#e8f5e8
    style B fill:#fff3e0
    style C fill:#ffebee
    style K fill:#f3e5f5</div>
                </div>
            </div>
            <div class="diagram-section" id="TIMUPER_Call_Graph.mmd">
                <h2>ğŸ“Š TIMUPER Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the timuper call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[TIMUPER] --> B[DATER-ROUTINE]
    B --> C[NEWDATE]
    B --> D[Unit Period Logic]
    B --> E[Date Calculation]
    
    F[Payment Processing] --> A
    G[Loan Scheduling] --> A
    H[Payroll Systems] --> A
    I[Financial Planning] --> A
    J[Interest Calculations] --> A
    
    A --> K[Period Types: M/D/Y/S/W/B]
    A --> L[Frequency Settings]
    A --> M[Remainder Calculations]
    
    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style C fill:#e8f5e8
    style F fill:#fff3e0
    style G fill:#fff3e0
    style H fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="TIMUPER_Main_Flow.mmd">
                <h2>ğŸ“Š TIMUPER Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the timuper main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[TIMUPER Entry] --> B[Save NDTE-DATE]
    B --> C[Set ELAPSED-YRTYPE = 999]
    C --> D[Set DATER-ACTION-CODE = E]
    D --> E[Call DATER-ROUTINE]
    E --> F[Unit Period Calculation]
    F --> G[Calculate ELAPSED-UNITPER]
    G --> H[Calculate ELAPSED-UNITPER-REM]
    H --> I[Calculate ELAPSED-RESULT]
    I --> J[Set ELAPSED-DAYS/MONTHS/REM]
    J --> K[Restore NDTE-DATE]
    K --> L[Return Results]
    
    style A fill:#e1f5fe
    style L fill:#e8f5e8
    style E fill:#f3e5f5
    style F fill:#fff3e0
    style B fill:#e8f5e8
    style K fill:#e8f5e8</div>
                </div>
            </div>
            <div class="diagram-section" id="TIM_Call_Graph.mmd">
                <h2>ğŸ“Š TIM Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the tim call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[External Calling Program] --> B[TIM SECTION]
    B --> C[TIMALL]
    C --> D[DATER-ROUTINE]
    D --> E[365-Day Year Calculations]
    D --> F[Date Arithmetic Logic]
    D --> G[Result Processing]
    E --> H[Calculation Results]
    F --> H
    G --> H
    H --> C
    C --> B
    B --> A
    
    I[Payment Calculations] --> B
    J[Interest Calculations] --> B
    K[Account Aging] --> B
    L[Report Generation] --> B
    M[General Date Arithmetic] --> B
    
    B --> N[ELAPSED-DAYS]
    B --> O[ELAPSED-MONTHS]
    B --> P[ELAPSED-REM]
    B --> Q[ELAPSED-RESULTS]
    
    R[TIM360] -.->|360-day alternative| B
    S[TIM999] -.->|Truth-in-lending alternative| B
    T[TIM361] -.->|361-day alternative| B
    
    style B fill:#e1f5fe
    style C fill:#f3e5f5
    style D fill:#e8f5e8
    style A fill:#e8f5e8
    style N fill:#fff3e0
    style O fill:#fff3e0
    style P fill:#fff3e0
    style Q fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="TIM_Main_Flow.mmd">
                <h2>ğŸ“Š TIM Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the tim main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Start: TIM SECTION] --> B[Set ELAPSED-YRTYPE to 365]
    B --> C[Call TIMALL]
    C --> D[TIMALL Processing with 365-Day Year]
    D --> E[Calculate Elapsed Days]
    E --> F[Calculate Elapsed Months]
    F --> G[Calculate Remaining Days]
    G --> H[Set Result Indicators]
    H --> I[Return to Caller]
    
    J[Results Available:]
    J --> K[ELAPSED-DAYS]
    J --> L[ELAPSED-MONTHS]  
    J --> M[ELAPSED-REM]
    J --> N[ELAPSED-RESULTS]
    
    style A fill:#e1f5fe
    style I fill:#e8f5e8
    style B fill:#fff3e0
    style C fill:#f3e5f5</div>
                </div>
            </div>
            <div class="diagram-section" id="WEEKDAY_Call_Graph.mmd">
                <h2>ğŸ“Š WEEKDAY Call Graph</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the weekday call graph workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[External Calling Program] --> B[WEEKDAY SECTION]
    B --> C[DATER-ROUTINE]
    C --> D[Julian Date Conversion]
    C --> E[Reference Date Logic]
    C --> F[Modular Arithmetic]
    C --> G[Day Mapping]
    D --> H[Weekday Computation]
    E --> H
    F --> H
    G --> H
    H --> I[Flag Setting Logic]
    I --> C
    C --> B
    B --> A
    
    J[Business Day Processing] --> B
    K[Report Scheduling] --> B
    L[Batch Job Control] --> B
    M[Holiday Calculations] --> B
    N[Payment Processing] --> B
    
    B --> O[DAY-IS-SUN Flag]
    B --> P[DAY-IS-MON Flag]
    B --> Q[DAY-IS-TUE Flag]
    B --> R[DAY-IS-WED Flag]
    B --> S[DAY-IS-THU Flag]
    B --> T[DAY-IS-FRI Flag]
    B --> U[DAY-IS-SAT Flag]
    
    style B fill:#e1f5fe
    style C fill:#f3e5f5
    style A fill:#e8f5e8
    style O fill:#fff3e0
    style P fill:#fff3e0
    style Q fill:#fff3e0
    style R fill:#fff3e0
    style S fill:#fff3e0
    style T fill:#fff3e0
    style U fill:#fff3e0</div>
                </div>
            </div>
            <div class="diagram-section" id="WEEKDAY_Main_Flow.mmd">
                <h2>ğŸ“Š WEEKDAY Main Flow</h2>
                <div class="diagram-description">
                    <p>Interactive system flow diagram showing the weekday main flow workflow and data relationships.</p>
                </div>
                <div class="diagram-container">
                    <div class="mermaid">graph TD
    A[Start: WEEKDAY SECTION] --> B[Set DATER-ACTION-CODE to 'W']
    B --> C[Call DATER-ROUTINE]
    C --> D{Weekday Calculation}
    D --> E[Convert Date to Julian]
    E --> F[Calculate Days from Reference]
    F --> G[Apply MOD 7 Operation]
    G --> H[Map to Weekday Number]
    H --> I[Set DAY--OF-WEEK Value]
    I --> J[Clear All Day Flags]
    J --> K{Which Day?}
    K -->|1| L[Set DAY-IS-SUN]
    K -->|2| M[Set DAY-IS-MON]
    K -->|3| N[Set DAY-IS-TUE]
    K -->|4| O[Set DAY-IS-WED]
    K -->|5| P[Set DAY-IS-THU]
    K -->|6| Q[Set DAY-IS-FRI]
    K -->|7| R[Set DAY-IS-SAT]
    L --> S[Return to Caller]
    M --> S
    N --> S
    O --> S
    P --> S
    Q --> S
    R --> S
    
    style A fill:#e1f5fe
    style S fill:#e8f5e8
    style L fill:#fff3e0
    style M fill:#fff3e0
    style N fill:#fff3e0
    style O fill:#fff3e0
    style P fill:#fff3e0
    style Q fill:#fff3e0
    style R fill:#fff3e0</div>
                </div>
            </div>
    
    <style>
        .diagram-section {
            margin-bottom: 60px;
            padding-bottom: 40px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .diagram-section:last-child {
            border-bottom: none;
        }
        
        .diagram-description {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-left: 4px solid #667eea;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 0 10px 10px 0;
        }
        
        .diagram-container {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
        }
    </style>
        </div>

        <div class="footer">
            <p>Generated: July 22, 2025 | COBOL Documentation System</p>
            <p>Static HTML version - No server required</p>
        </div>
    </div>

    <button class="back-to-top" onclick="scrollToTop()" id="backToTop">â†‘</button>

    <script>
        // Initialize Mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#667eea',
                primaryTextColor: '#2c3e50',
                primaryBorderColor: '#e0e0e0',
                lineColor: '#7f8c8d',
                background: '#ffffff'
            }
        });

        // Back to top functionality
        window.onscroll = function() {
            const button = document.getElementById('backToTop');
            if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                button.style.display = 'block';
            } else {
                button.style.display = 'none';
            }
        };

        function scrollToTop() {
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
        }
    </script>
</body>
</html>