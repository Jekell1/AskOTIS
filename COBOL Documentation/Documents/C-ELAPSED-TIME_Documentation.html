<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C-ELAPSED-TIME Program Documentation</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#e1f5fe',
                primaryTextColor: '#01579b',
                primaryBorderColor: '#0277bd',
                lineColor: '#0288d1',
                secondaryColor: '#f3e5f5',
                tertiaryColor: '#e8f5e8'
            }
        });
    </script>
</head>
<body>
    <div class="container">
        <nav class="breadcrumb">
            <a href="index.html">Home</a> &gt; <span class="current">C-ELAPSED-TIME Program Documentation</span>
        </nav>
        <main class="content">
<h1 id="c-elapsed-time-program-documentation">C-ELAPSED-TIME Program Documentation</h1>
<hr />
<p>Location: APIPAY_Inlined.CBL
Generated on: 2025-07-31
Program ID: C-ELAPSED-TIME
Written: Extract the author and date from the source code comments if available. If not present, indicate "See source comments" or leave blank.</p>
<hr />
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#program-overview">Program Overview</a></li>
<li><a href="#transaction-types-supported">Transaction Types Supported</a></li>
<li><a href="#input-parameters">Input Parameters</a></li>
<li><a href="#output-fields">Output Fields</a></li>
<li><a href="#program-flow-diagrams">Program Flow Diagrams</a></li>
<li><a href="#batch-or-sequential-process-timeline">Batch or Sequential Process Timeline</a></li>
<li><a href="#paragraph-level-flow-explanation">Paragraph-Level Flow Explanation</a></li>
<li><a href="#data-flow-mapping">Data Flow Mapping</a></li>
<li><a href="#referenced-programs">Referenced Programs</a></li>
<li><a href="#error-handling-flow">Error Handling Flow</a></li>
<li><a href="#error-handling-and-validation">Error Handling and Validation</a></li>
<li><a href="#common-error-conditions">Common Error Conditions</a></li>
<li><a href="#technical-implementation">Technical Implementation</a></li>
<li><a href="#integration-points">Integration Points</a></li>
<li><a href="#file-dependencies">File Dependencies</a></li>
<li><a href="#call-graph-of-performed-paragraphs">Call Graph of PERFORMed Paragraphs</a></li>
</ul>
<h2 id="program-overview">Program Overview</h2>
<p>C-ELAPSED-TIME computes elapsed time between two dates, supporting multiple year types and unit period codes. It handles leap years, zero dates, and outputs elapsed months, days, and results.</p>
<h2 id="transaction-types-supported">Transaction Types Supported</h2>
<ul>
<li>Elapsed time calculation (multiple year types)</li>
</ul>
<h2 id="input-parameters">Input Parameters</h2>
<ul>
<li><code>NUM-DATE</code>, <code>SYS-DATE</code>: Input dates</li>
<li><code>DATER-UNITPER-CD</code>, <code>DATER-UNITPER-FREQ</code>: Unit period code and frequency</li>
</ul>
<h2 id="output-fields">Output Fields</h2>
<ul>
<li><code>ELAPSED-DAYS</code>, <code>ELAPSED-MONTHS</code>, <code>ELAPSED-REM</code>, <code>ELAPSED-RESULTS</code>: Elapsed values and result code</li>
</ul>
<h2 id="program-flow-diagrams">Program Flow Diagrams</h2>
<h3 id="high-level-flow">High-Level Flow</h3>
<div class="mermaid">graph TD
    A[Start] --> B[Move Input Dates]
    B --> C[Check for Zero Dates]
    C --> D[PERFORM C-TIMALL]
    D --> E[PERFORM C-TIM-RESULTS]
    E --> F[Output Results]
    F --> G[Unit Period Calculation]
    G --> H[PERFORM C-TIMALL]
    H --> I[Output Unit Period Results]
    I --> J[End]
</div>
<h3 id="detailed-flow">Detailed Flow</h3>
<div class="mermaid">%% Mermaid Flowchart: C-ELAPSED-TIME Detailed Flow
graph TD
    Start([Start])
    InitVars["Initialize variables"]
    ReadInput["Read input records"]
    ProcessLoop{More records?}
    Validate["Validate record"]
    Calc["Calculate elapsed time"]
    WriteOutput["Write output record"]
    Error["Handle errors"]
    End([End])

    Start --> InitVars --> ReadInput --> ProcessLoop
    ProcessLoop -- Yes --> Validate --> Calc --> WriteOutput --> ReadInput
    ProcessLoop -- No --> End
    Validate -- Error --> Error --> ReadInput
</div>
<h2 id="batch-or-sequential-process-timeline">Batch or Sequential Process Timeline</h2>
<div class="mermaid">gantt
    title C-ELAPSED-TIME Batch Timeline
    section Initialization
    Move Input Dates :done, a1, 2025-07-31, 1d
    section Calculation
    Check for Zero Dates :a2, after a1, 1d
    C-TIMALL :a3, after a2, 1d
    C-TIM-RESULTS :a4, after a3, 1d
    Output Results :a5, after a4, 1d
    Unit Period Calculation :a6, after a5, 1d
    C-TIMALL :a7, after a6, 1d
    Output Unit Period Results :a8, after a7, 1d
</div>
<h2 id="paragraph-level-flow-explanation">Paragraph-Level Flow Explanation</h2>
<ul>
<li><strong>Move Input Dates</strong>: Loads input dates into working variables.</li>
<li><strong>Check for Zero Dates</strong>: Handles special case for zero dates.</li>
<li><strong>PERFORM C-TIMALL</strong>: Calculates elapsed time based on year type.</li>
<li><strong>PERFORM C-TIM-RESULTS</strong>: Computes result code.</li>
<li><strong>Output Results</strong>: Moves results to output fields.</li>
<li><strong>Unit Period Calculation</strong>: Handles unit period code/frequency logic.</li>
</ul>
<h2 id="data-flow-mapping">Data Flow Mapping</h2>
<div class="mermaid">graph TD
    NUM-DATE --> WS-DATE1
    SYS-DATE --> WS-DATE2
    WS-DATE1 --> ELAPSED-DAYS
    WS-DATE2 --> ELAPSED-DAYS
    DATER-UNITPER-CD --> ELAPSED-REM
    DATER-UNITPER-FREQ --> ELAPSED-REM
</div>
<h2 id="referenced-programs">Referenced Programs</h2>
<ul>
<li>C-TIMALL (internal)</li>
<li>C-TIM-RESULTS (internal)</li>
</ul>
<h2 id="error-handling-flow">Error Handling Flow</h2>
<ul>
<li>Handles zero dates</li>
<li>Validates input fields</li>
</ul>
<h2 id="error-handling-and-validation">Error Handling and Validation</h2>
<ul>
<li>Validates input date fields</li>
<li>Ensures correct year type logic</li>
</ul>
<h2 id="common-error-conditions">Common Error Conditions</h2>
<ul>
<li>Zero or invalid date</li>
<li>Incorrect year type</li>
</ul>
<h2 id="technical-implementation">Technical Implementation</h2>
<ul>
<li>Uses working-storage fields</li>
<li>No external file I/O</li>
<li>Key algorithms: elapsed time calculation, unit period logic</li>
</ul>
<h2 id="integration-points">Integration Points</h2>
<ul>
<li>Used by other date calculation routines</li>
</ul>
<h2 id="file-dependencies">File Dependencies</h2>
<ul>
<li>No external files; uses internal paragraphs</li>
</ul>
<h2 id="call-graph-of-performed-paragraphs">Call Graph of PERFORMed Paragraphs</h2>
<div class="mermaid">graph TD
    C-ELAPSED-TIME --> C-TIMALL
    C-ELAPSED-TIME --> C-TIM-RESULTS
</div>
        </main>
        <footer>
            <p>Generated on 2025-09-02 15:30:16</p>
        </footer>
    </div>
</body>
</html>